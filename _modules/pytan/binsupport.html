

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>pytan.binsupport &mdash; PyTan v2.1.3 2.1.3 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="PyTan v2.1.3 2.1.3 documentation" href="../../index.html"/>
        <link rel="up" title="Module code" href="../index.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="../../index.html" class="fa fa-home"> PyTan v2.1.3</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../introduction.html">1. PyTan Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../introduction.html#description">1.1. Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../introduction.html#why-it-was-created">1.2. Why it was created</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../introduction.html#python-versions-supported">1.3. Python Versions Supported</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../introduction.html#tanium-platform-versions-supported">1.4. Tanium Platform Versions Supported</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../introduction.html#installation">1.5. Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../introduction.html#usage">1.6. Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../introduction.html#directory-layout">1.7. Directory Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../introduction.html#other-references">1.8. Other References</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../pytan.html">2. PyTan Package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../pytan.html#module-pytan.handler">2.1. pytan.handler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pytan.html#module-pytan.sessions">2.2. pytan.sessions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pytan.html#module-pytan.pollers">2.3. pytan.pollers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pytan.html#module-pytan.constants">2.4. pytan.constants</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pytan.html#module-pytan.utils">2.5. pytan.utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pytan.html#module-pytan.binsupport">2.6. pytan.binsupport</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pytan.html#module-pytan.exceptions">2.7. pytan.exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pytan.html#module-pytan.xml_clean">2.8. pytan.xml_clean</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../pytan_tests.html">3. PyTan Tests</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../pytan_tests.html#module-test_pytan_valid_server_tests">3.1. Valid Server Functional Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pytan_tests.html#module-test_pytan_invalid_server_tests">3.2. Invalid Server Functional Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pytan_tests.html#module-test_pytan_unit">3.3. Unit Tests</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../taniumpy/taniumpy.html">4. TaniumPy Package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../taniumpy/taniumpy.html#subpackages">4.1. Subpackages</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../other_packages.html">5. Other Packages</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../other_packages.html#requests-package">5.1. requests Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../other_packages.html#threaded-http-package">5.2. threaded_http Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../other_packages.html#xmltodict-package">5.3. xmltodict Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../other_packages.html#ddt-package">5.4. ddt Package</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../pytan_validation_index.html">6. PyTan API Validation Tests</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../valid_pytan_tests/pytan_validation_test-6.2.314.3321-OS_X_10.10.5-2.7.10.html">6.1. Tanium: 6.2.314.3321, OS: OS X 10.10.5, Python: 2.7.10</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../valid_pytan_tests/pytan_validation_test-6.2.314.3321-Windows_2008ServerR2_SP1-2.7.10.html">6.2. Tanium: 6.2.314.3321, OS: Windows 2008ServerR2 SP1, Python: 2.7.10</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../valid_pytan_tests/pytan_validation_test-6.2.314.3321-Windows_2008ServerR2_SP1-2.7.6.html">6.3. Tanium: 6.2.314.3321, OS: Windows 2008ServerR2 SP1, Python: 2.7.6</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../valid_pytan_tests/pytan_validation_test-6.2.314.3321-Windows_2008ServerR2_SP1-2.7.9.html">6.4. Tanium: 6.2.314.3321, OS: Windows 2008ServerR2 SP1, Python: 2.7.9</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../valid_pytan_tests/pytan_validation_test-6.5.314.4301-OS_X_10.10.5-2.7.10.html">6.5. Tanium: 6.5.314.4301, OS: OS X 10.10.5, Python: 2.7.10</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../valid_pytan_tests/pytan_validation_test-6.5.314.4301-Ubuntu_14.04_trusty-2.7.6.html">6.6. Tanium: 6.5.314.4301, OS: Ubuntu 14.04 trusty, Python: 2.7.6</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../valid_pytan_tests/pytan_validation_test-6.5.314.4301-Windows_2008ServerR2_SP1-2.7.10.html">6.7. Tanium: 6.5.314.4301, OS: Windows 2008ServerR2 SP1, Python: 2.7.10</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../valid_pytan_tests/pytan_validation_test-6.5.314.4301-Windows_2008ServerR2_SP1-2.7.6.html">6.8. Tanium: 6.5.314.4301, OS: Windows 2008ServerR2 SP1, Python: 2.7.6</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../valid_pytan_tests/pytan_validation_test-6.5.314.4301-Windows_2008ServerR2_SP1-2.7.9.html">6.9. Tanium: 6.5.314.4301, OS: Windows 2008ServerR2 SP1, Python: 2.7.9</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/pytan_examples.html">7. PyTan API Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../examples/pytan_api_basic_handler_example.html">7.1. PyTan API Basic Handler Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/valid_create_object.html">7.2. PyTan API Valid Create Object Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/valid_create_object_from_json.html">7.3. PyTan API Valid Create Object From JSON Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/valid_deploy_action.html">7.4. PyTan API Valid Deploy Action Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/valid_export_basetype.html">7.5. PyTan API Valid Export Basetype Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/valid_export_resultset.html">7.6. PyTan API Valid Export ResultSet Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/valid_get_object.html">7.7. PyTan API Valid Get Object Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/valid_questions.html">7.8. PyTan API Valid Questions Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/valid_saved_questions.html">7.9. PyTan API Valid Saved Questions Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/invalid_create_object.html">7.10. PyTan API Invalid Create Object Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/invalid_create_object_from_json.html">7.11. PyTan API Invalid Create Object From JSON Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/invalid_deploy_action.html">7.12. PyTan API Invalid Deploy Action Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/invalid_export_basetype.html">7.13. PyTan API Invalid Export Basetype Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/invalid_export_resultset.html">7.14. PyTan API Invalid Export ResultSet Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/invalid_get_object.html">7.15. PyTan API Invalid Get Object Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/invalid_questions.html">7.16. PyTan API Invalid Questions Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../soap_examples_index.html">8. SOAP API Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../soap_examples/6.2.314.3321/soap_examples_6.2.314.3321.html">8.1. SOAP API Examples for Platform Version 6.2.314.3321</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../soap_examples/6.5.314.4301/soap_examples_6.5.314.4301.html">8.2. SOAP API Examples for Platform Version 6.5.314.4301</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">PyTan v2.1.3</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">Module code</a> &raquo;</li>
      
    <li>pytan.binsupport</li>
      <li class="wy-breadcrumbs-aside">
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <h1>Source code for pytan.binsupport</h1><div class="highlight"><pre>
<span class="c">#!/usr/bin/env python</span>
<span class="c"># -*- mode: Python; tab-width: 4; indent-tabs-mode: nil; -*-</span>
<span class="c"># ex: set tabstop=4</span>
<span class="c"># Please do not change the two lines above. See PEP 8, PEP 263.</span>
<span class="sd">&quot;&quot;&quot;Collection of classes and methods used throughout :mod:`pytan` for command line support&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="c"># disable python from creating .pyc files everywhere</span>
<span class="n">sys</span><span class="o">.</span><span class="n">dont_write_bytecode</span> <span class="o">=</span> <span class="bp">True</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">code</span>
<span class="kn">import</span> <span class="nn">atexit</span>
<span class="kn">import</span> <span class="nn">traceback</span>
<span class="kn">import</span> <span class="nn">pprint</span>
<span class="kn">import</span> <span class="nn">argparse</span>
<span class="kn">import</span> <span class="nn">getpass</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">string</span>
<span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">import</span> <span class="nn">io</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">from</span> <span class="nn">argparse</span> <span class="kn">import</span> <span class="n">ArgumentDefaultsHelpFormatter</span> <span class="k">as</span> <span class="n">A1</span> <span class="c"># noqa</span>
<span class="kn">from</span> <span class="nn">argparse</span> <span class="kn">import</span> <span class="n">RawDescriptionHelpFormatter</span> <span class="k">as</span> <span class="n">A2</span> <span class="c"># noqa</span>

<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">readline</span>
    <span class="kn">import</span> <span class="nn">rlcompleter</span>
<span class="k">except</span><span class="p">:</span>
    <span class="k">pass</span>

<span class="n">my_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">__file__</span><span class="p">)</span>
<span class="n">my_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">my_file</span><span class="p">)</span>
<span class="n">parent_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">my_dir</span><span class="p">)</span>
<span class="n">path_adds</span> <span class="o">=</span> <span class="p">[</span><span class="n">parent_dir</span><span class="p">]</span>
<span class="p">[</span><span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">aa</span><span class="p">)</span> <span class="k">for</span> <span class="n">aa</span> <span class="ow">in</span> <span class="n">path_adds</span> <span class="k">if</span> <span class="n">aa</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="p">]</span>

<span class="kn">import</span> <span class="nn">pytan</span>
<span class="kn">import</span> <span class="nn">taniumpy</span>

<span class="n">__version__</span> <span class="o">=</span> <span class="n">pytan</span><span class="o">.</span><span class="n">__version__</span>
<span class="n">pname</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]))[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">mylog</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s">&quot;pytan.handler&quot;</span><span class="p">)</span>


<div class="viewcode-block" id="HistoryConsole"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.HistoryConsole">[docs]</a><span class="k">class</span> <span class="nc">HistoryConsole</span><span class="p">(</span><span class="n">code</span><span class="o">.</span><span class="n">InteractiveConsole</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Class that provides an interactive python console with full auto complete, history, and history file support.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">        &gt;&gt;&gt; console = pytan.binsupport.HistoryConsole()</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">locals</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s">&quot;&lt;console&gt;&quot;</span><span class="p">,</span>
                 <span class="n">histfile</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s">&quot;~/.console-history&quot;</span><span class="p">)):</span>
        <span class="n">code</span><span class="o">.</span><span class="n">InteractiveConsole</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">locals</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rldoc</span> <span class="o">=</span> <span class="n">rlcompleter</span><span class="o">.</span><span class="n">__doc__</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">init_history</span><span class="p">(</span><span class="n">histfile</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>

<div class="viewcode-block" id="HistoryConsole.init_history"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.HistoryConsole.init_history">[docs]</a>    <span class="k">def</span> <span class="nf">init_history</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">histfile</span><span class="p">):</span>
        <span class="k">if</span> <span class="s">&#39;libedit&#39;</span> <span class="ow">in</span> <span class="n">readline</span><span class="o">.</span><span class="n">__doc__</span><span class="p">:</span>
            <span class="c"># osx style readline</span>
            <span class="n">readline</span><span class="o">.</span><span class="n">parse_and_bind</span><span class="p">(</span><span class="s">&quot;bind ^I rl_complete&quot;</span><span class="p">)</span>
            <span class="n">readline</span><span class="o">.</span><span class="n">parse_and_bind</span><span class="p">(</span><span class="s">&quot;bind ^R em-inc-search-prev&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c"># unix style readline</span>
            <span class="n">readline</span><span class="o">.</span><span class="n">parse_and_bind</span><span class="p">(</span><span class="s">&quot;tab: complete&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">readline</span><span class="p">,</span> <span class="s">&quot;read_history_file&quot;</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">readline</span><span class="o">.</span><span class="n">read_history_file</span><span class="p">(</span><span class="n">histfile</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">IOError</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="n">atexit</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_history</span><span class="p">,</span> <span class="n">histfile</span><span class="p">)</span></div>

    <span class="nd">@staticmethod</span>
<div class="viewcode-block" id="HistoryConsole.save_history"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.HistoryConsole.save_history">[docs]</a>    <span class="k">def</span> <span class="nf">save_history</span><span class="p">(</span><span class="n">histfile</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">readline</span><span class="o">.</span><span class="n">write_history_file</span><span class="p">(</span><span class="n">histfile</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span></div></div>


<div class="viewcode-block" id="CustomArgFormat"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.CustomArgFormat">[docs]</a><span class="k">class</span> <span class="nc">CustomArgFormat</span><span class="p">(</span><span class="n">A1</span><span class="p">,</span> <span class="n">A2</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Multiple inheritance Formatter class for :class:`argparse.ArgumentParser`.</span>

<span class="sd">    If a :class:`argparse.ArgumentParser` class uses this as it&#39;s Formatter class, it will show the defaults for each argument in the `help` output</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span></div>


<div class="viewcode-block" id="CustomArgParse"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.CustomArgParse">[docs]</a><span class="k">class</span> <span class="nc">CustomArgParse</span><span class="p">(</span><span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Custom :class:`argparse.ArgumentParser` class which does a number of things:</span>

<span class="sd">        * Uses :class:`pytan.utils.CustomArgFormat` as it&#39;s Formatter class, if none was passed in</span>
<span class="sd">        * Prints help if there is an error</span>
<span class="sd">        * Prints the help for any subparsers that exist</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="s">&#39;formatter_class&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s">&#39;formatter_class&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">CustomArgFormat</span>
        <span class="c"># print kwargs</span>
        <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<div class="viewcode-block" id="CustomArgParse.error"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.CustomArgParse.error">[docs]</a>    <span class="k">def</span> <span class="nf">error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">print_help</span><span class="p">()</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&#39;ERROR:{}:{}</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pname</span><span class="p">,</span> <span class="n">message</span><span class="p">))</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span></div>

<div class="viewcode-block" id="CustomArgParse.print_help"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.CustomArgParse.print_help">[docs]</a>    <span class="k">def</span> <span class="nf">print_help</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">CustomArgParse</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">print_help</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">subparsers_actions</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">action</span> <span class="k">for</span> <span class="n">action</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_actions</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">argparse</span><span class="o">.</span><span class="n">_SubParsersAction</span><span class="p">)</span>
        <span class="p">]</span>
        <span class="k">for</span> <span class="n">subparsers_action</span> <span class="ow">in</span> <span class="n">subparsers_actions</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">&quot;&quot;</span>
            <span class="c"># get all subparsers and print help</span>
            <span class="k">for</span> <span class="n">choice</span><span class="p">,</span> <span class="n">subparser</span> <span class="ow">in</span> <span class="n">subparsers_action</span><span class="o">.</span><span class="n">choices</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="c"># print subparser</span>
                <span class="c"># print(&quot; ** {} &#39;{}&#39;:&quot;.format(</span>
                    <span class="c"># subparsers_action.dest, choice))</span>
                <span class="k">print</span><span class="p">(</span><span class="n">subparser</span><span class="o">.</span><span class="n">format_help</span><span class="p">())</span></div></div>


<div class="viewcode-block" id="setup_parser"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.setup_parser">[docs]</a><span class="k">def</span> <span class="nf">setup_parser</span><span class="p">(</span><span class="n">desc</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Method to setup the base :class:`pytan.utils.CustomArgParse` class for command line scripts that use :mod:`pytan`. This establishes the basic arguments that are needed by all such scripts, such as:</span>

<span class="sd">        * --help</span>
<span class="sd">        * --username</span>
<span class="sd">        * --password</span>
<span class="sd">        * --host</span>
<span class="sd">        * --port</span>
<span class="sd">        * --loglevel</span>
<span class="sd">        * --debugformat</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">CustomArgParse</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="n">desc</span><span class="p">,</span> <span class="n">add_help</span><span class="o">=</span><span class="n">help</span><span class="p">,</span> <span class="n">formatter_class</span><span class="o">=</span><span class="n">CustomArgFormat</span><span class="p">)</span>
    <span class="n">arggroup_name</span> <span class="o">=</span> <span class="s">&#39;Handler Authentication&#39;</span>
    <span class="n">auth_group</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span><span class="n">arggroup_name</span><span class="p">)</span>
    <span class="n">auth_group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;-u&#39;</span><span class="p">,</span>
        <span class="s">&#39;--username&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;username&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Name of user&#39;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">auth_group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;-p&#39;</span><span class="p">,</span>
        <span class="s">&#39;--password&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;password&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Password of user&#39;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">auth_group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--session_id&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;session_id&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Session ID to authenticate with instead of username/password&#39;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">auth_group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--host&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;host&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Hostname/ip of SOAP Server&#39;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">auth_group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--port&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="s">&quot;443&quot;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;port&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Port to use when connecting to SOAP Server&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">arggroup_name</span> <span class="o">=</span> <span class="s">&#39;Handler Options&#39;</span>
    <span class="n">opt_group</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span><span class="n">arggroup_name</span><span class="p">)</span>
    <span class="n">opt_group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;-l&#39;</span><span class="p">,</span>
        <span class="s">&#39;--loglevel&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;loglevel&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Logging level to use, increase for more verbosity&#39;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">opt_group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--debugformat&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;debugformat&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&quot;Enable debug format for logging&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">opt_group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--debug_method_locals&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;debug_method_locals&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&quot;Enable debug logging for each methods local variables&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">opt_group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--record_all_requests&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;record_all_requests&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&quot;Record all requests in handler.session.ALL_REQUESTS_RESPONSES&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">opt_group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--stats_loop_enabled&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;stats_loop_enabled&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&quot;Enable the statistics loop&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">opt_group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--http_auth_retry&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_false&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;http_auth_retry&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&quot;Disable retry on HTTP authentication failures&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">opt_group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--http_retry_count&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;http_retry_count&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&quot;Retry count for HTTP failures/invalid responses&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">parser</span></div>


<div class="viewcode-block" id="setup_parent_parser"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.setup_parent_parser">[docs]</a><span class="k">def</span> <span class="nf">setup_parent_parser</span><span class="p">(</span><span class="n">doc</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Method to setup the base :class:`pytan.utils.CustomArgParse` class for command line scripts using :func:`pytan.utils.setup_parser` and return a parser object for adding arguments to</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">parent_parser</span> <span class="o">=</span> <span class="n">setup_parser</span><span class="p">(</span><span class="n">desc</span><span class="o">=</span><span class="n">doc</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">CustomArgParse</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="n">doc</span><span class="p">,</span> <span class="n">parents</span><span class="o">=</span><span class="p">[</span><span class="n">parent_parser</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">parser</span></div>


<div class="viewcode-block" id="setup_tsat_argparser"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.setup_tsat_argparser">[docs]</a><span class="k">def</span> <span class="nf">setup_tsat_argparser</span><span class="p">(</span><span class="n">doc</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Method to setup the base :class:`pytan.utils.CustomArgParse` class for command line scripts using :func:`pytan.utils.setup_parser`, then add specific arguments for scripts that use :mod:`pytan` to get objects.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">setup_parent_parser</span><span class="p">(</span><span class="n">doc</span><span class="o">=</span><span class="n">doc</span><span class="p">)</span>

    <span class="n">output_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="s">&#39;TSAT_OUTPUT&#39;</span><span class="p">,</span> <span class="n">pytan</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">get_now</span><span class="p">())</span>

    <span class="n">arggroup</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span><span class="s">&#39;TSAT Options&#39;</span><span class="p">)</span>
    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--platform&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;append&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;platforms&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Only ask questions for sensors on a given platform&#39;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--category&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;append&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;categories&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Only ask questions for sensors in a given category&#39;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--output_dir&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">output_dir</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;report_dir&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Directory to save output to&#39;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--sleep&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;sleep&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Number of seconds to wait between asking questions&#39;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--pct&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="mf">99.00</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;pct_complete_threshold&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Percent to consider questions complete&#39;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--timeout&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;timeout&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;How many seconds to wait before a question times out&#39;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;-f&#39;</span><span class="p">,</span>
        <span class="s">&#39;--filter&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;append&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;question_filters&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Whole question filter; pass --filters-help to get a full description&#39;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;-o&#39;</span><span class="p">,</span>
        <span class="s">&#39;--option&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;append&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;question_options&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Whole question option; pass --options-help to get a full description&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--sensors-help&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;sensors_help&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Get the full help for sensor strings&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--filters-help&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;filters_help&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Get the full help for filters strings&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--options-help&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;options_help&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Get the full help for options strings&#39;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">parser</span></div>


<div class="viewcode-block" id="setup_get_object_argparser"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.setup_get_object_argparser">[docs]</a><span class="k">def</span> <span class="nf">setup_get_object_argparser</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">doc</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Method to setup the base :class:`pytan.utils.CustomArgParse` class for command line scripts using :func:`pytan.utils.setup_parser`, then add specific arguments for scripts that use :mod:`pytan` to get objects.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">setup_parent_parser</span><span class="p">(</span><span class="n">doc</span><span class="o">=</span><span class="n">doc</span><span class="p">)</span>
    <span class="n">arggroup_name</span> <span class="o">=</span> <span class="s">&#39;Get {} Options&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;_&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">capitalize</span><span class="p">())</span>
    <span class="n">get_object_group</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span><span class="n">arggroup_name</span><span class="p">)</span>

    <span class="n">get_object_group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--all&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;all&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Get all {}s&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">obj</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">obj_map</span> <span class="o">=</span> <span class="n">pytan</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">get_obj_map</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
    <span class="n">search_keys</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">obj_map</span><span class="p">[</span><span class="s">&#39;search&#39;</span><span class="p">])</span>

    <span class="k">if</span> <span class="s">&#39;id&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">search_keys</span><span class="p">:</span>
        <span class="n">search_keys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;id&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">obj</span> <span class="o">==</span> <span class="s">&#39;whitelisted_url&#39;</span><span class="p">:</span>
        <span class="n">search_keys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;url_regex&#39;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">obj</span> <span class="o">==</span> <span class="s">&#39;user&#39;</span><span class="p">:</span>
        <span class="n">search_keys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;name&#39;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">search_keys</span><span class="p">:</span>
        <span class="n">get_object_group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s">&#39;--{}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">k</span><span class="p">),</span>
            <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
            <span class="n">action</span><span class="o">=</span><span class="s">&#39;append&#39;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="p">[],</span>
            <span class="n">dest</span><span class="o">=</span><span class="n">k</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s">&#39;{} of {} to get&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">obj</span><span class="p">),</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">parser</span></div>


<div class="viewcode-block" id="setup_print_server_info_argparser"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.setup_print_server_info_argparser">[docs]</a><span class="k">def</span> <span class="nf">setup_print_server_info_argparser</span><span class="p">(</span><span class="n">doc</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Method to setup the base :class:`pytan.utils.CustomArgParse` class for command line scripts using :func:`pytan.utils.setup_parser`, then add specific arguments for scripts that use :mod:`pytan` to print sensor info.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">setup_parent_parser</span><span class="p">(</span><span class="n">doc</span><span class="o">=</span><span class="n">doc</span><span class="p">)</span>
    <span class="n">output_group</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span><span class="s">&#39;Output Options&#39;</span><span class="p">)</span>

    <span class="n">output_group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--json&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;json&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Show a json dump of the server information&#39;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">parser</span></div>


<div class="viewcode-block" id="setup_print_sensors_argparser"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.setup_print_sensors_argparser">[docs]</a><span class="k">def</span> <span class="nf">setup_print_sensors_argparser</span><span class="p">(</span><span class="n">doc</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Method to setup the base :class:`pytan.utils.CustomArgParse` class for command line scripts using :func:`pytan.utils.setup_parser`, then add specific arguments for scripts that use :mod:`pytan` to print server info.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">setup_get_object_argparser</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="s">&#39;sensor&#39;</span><span class="p">,</span> <span class="n">doc</span><span class="o">=</span><span class="n">__doc__</span><span class="p">)</span>
    <span class="n">output_group</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span><span class="s">&#39;Output Options&#39;</span><span class="p">)</span>
    <span class="n">output_group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--category&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;append&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;categories&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Only show sensors in given category&#39;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">output_group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--platform&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;append&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;platforms&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Only show sensors for given platform&#39;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">output_group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--hide_params&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;hide_params&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Do not show parameters in output&#39;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">output_group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--params_only&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;params_only&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Only show sensors with parameters&#39;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">output_group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--json&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;json&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Show a json dump of the server information&#39;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">parser</span></div>


<div class="viewcode-block" id="setup_create_sensor_argparser"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.setup_create_sensor_argparser">[docs]</a><span class="k">def</span> <span class="nf">setup_create_sensor_argparser</span><span class="p">(</span><span class="n">doc</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Method to setup the base :class:`pytan.utils.CustomArgParse` class for command line scripts using :func:`pytan.utils.setup_parser`, then add specific arguments for scripts that use :mod:`pytan` to create a sensor.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">pytan</span><span class="o">.</span><span class="n">binsupport</span><span class="o">.</span><span class="n">setup_parser</span><span class="p">(</span><span class="n">desc</span><span class="o">=</span><span class="n">doc</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">arggroup_name</span> <span class="o">=</span> <span class="s">&#39;Create Sensor Options&#39;</span>
    <span class="n">arggroup</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span><span class="n">arggroup_name</span><span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--unsupported&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;unsupported&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Creating sensors using this method not yet supported, use create_sensor_from_json instead!&#39;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">parser</span></div>


<div class="viewcode-block" id="setup_create_group_argparser"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.setup_create_group_argparser">[docs]</a><span class="k">def</span> <span class="nf">setup_create_group_argparser</span><span class="p">(</span><span class="n">doc</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Method to setup the base :class:`pytan.utils.CustomArgParse` class for command line scripts using :func:`pytan.utils.setup_parser`, then add specific arguments for scripts that use :mod:`pytan` to create a group.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">pytan</span><span class="o">.</span><span class="n">binsupport</span><span class="o">.</span><span class="n">setup_parser</span><span class="p">(</span><span class="n">desc</span><span class="o">=</span><span class="n">doc</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">arggroup_name</span> <span class="o">=</span> <span class="s">&#39;Create Group Options&#39;</span>
    <span class="n">arggroup</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span><span class="n">arggroup_name</span><span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;-n&#39;</span><span class="p">,</span>
        <span class="s">&#39;--name&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;groupname&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Name of group to create&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;-f&#39;</span><span class="p">,</span>
        <span class="s">&#39;--filter&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;append&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;filters&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Filters to use for group, supply --filters-help to see filter help&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;-o&#39;</span><span class="p">,</span>
        <span class="s">&#39;--option&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;append&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;filter_options&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Filter options to use for group, supply --options-help to see options&#39;</span>
        <span class="s">&#39; help&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--filters-help&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;filters_help&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Get the full help for filters strings&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--options-help&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;options_help&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Get the full help for options strings&#39;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">parser</span></div>


<div class="viewcode-block" id="setup_create_whitelisted_url_argparser"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.setup_create_whitelisted_url_argparser">[docs]</a><span class="k">def</span> <span class="nf">setup_create_whitelisted_url_argparser</span><span class="p">(</span><span class="n">doc</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Method to setup the base :class:`pytan.utils.CustomArgParse` class for command line scripts using :func:`pytan.utils.setup_parser`, then add specific arguments for scripts that use :mod:`pytan` to create a whitelisted_url.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">setup_parser</span><span class="p">(</span><span class="n">desc</span><span class="o">=</span><span class="n">doc</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">arggroup_name</span> <span class="o">=</span> <span class="s">&#39;Create Whitelisted URL Options&#39;</span>
    <span class="n">arggroup</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span><span class="n">arggroup_name</span><span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--url&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;url&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Text of new Whitelisted URL&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--regex&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;regex&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Whitelisted URL is a regex pattern&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;-d&#39;</span><span class="p">,</span>
        <span class="s">&#39;--download&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;download_seconds&#39;</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">86400</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Download Whitelisted URL every N seconds&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;-prop&#39;</span><span class="p">,</span>
        <span class="s">&#39;--property&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;append&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;properties&#39;</span><span class="p">,</span>
        <span class="n">nargs</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Property name and value to assign to Whitelisted URL&#39;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">parser</span></div>


<div class="viewcode-block" id="setup_create_package_argparser"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.setup_create_package_argparser">[docs]</a><span class="k">def</span> <span class="nf">setup_create_package_argparser</span><span class="p">(</span><span class="n">doc</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Method to setup the base :class:`pytan.utils.CustomArgParse` class for command line scripts using :func:`pytan.utils.setup_parser`, then add specific arguments for scripts that use :mod:`pytan` to create a package.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">pytan</span><span class="o">.</span><span class="n">binsupport</span><span class="o">.</span><span class="n">setup_parser</span><span class="p">(</span><span class="n">desc</span><span class="o">=</span><span class="n">doc</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">arggroup_name</span> <span class="o">=</span> <span class="s">&#39;Create Package Options&#39;</span>
    <span class="n">arggroup</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span><span class="n">arggroup_name</span><span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;-n&#39;</span><span class="p">,</span>
        <span class="s">&#39;--name&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;name&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Name of package to create&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;-c&#39;</span><span class="p">,</span>
        <span class="s">&#39;--command&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;command&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Command to execute with package&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;-d&#39;</span><span class="p">,</span>
        <span class="s">&#39;--display-name&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;display_name&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Display name of package&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--command-timeout&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;command_timeout_seconds&#39;</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Command for this package timeout in N seconds&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--expire-seconds&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;expire_seconds&#39;</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Expire actions created for this package in N seconds&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;-f&#39;</span><span class="p">,</span>
        <span class="s">&#39;--file-url&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;file_urls&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;URL of file to include with package, can specify any of the &#39;</span>
        <span class="s">&#39;following: &quot;$url&quot;, or &quot;$download_seconds::$url&quot;, or &quot;$filename||$url&quot;,&#39;</span>
        <span class="s">&#39; or &quot;$filename||$download_seconds::$url&quot;&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--parameters-file&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;parameters_json_file&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;JSON file describing parameters for this package, see &#39;</span>
        <span class="s">&#39;doc/example_of_all_package_parameters.json for an example&#39;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;-vf&#39;</span><span class="p">,</span>
        <span class="s">&#39;--verify-filter&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;append&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;verify_filters&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Filters to use for verifying the package after it is deployed, &#39;</span>
        <span class="s">&#39;, supply --filters-help to see filter help&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;-vo&#39;</span><span class="p">,</span>
        <span class="s">&#39;--verify-option&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;append&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;verify_filter_options&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Options to use for the verify filters, supply --options-help to see &#39;</span>
        <span class="s">&#39;options help&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--filters-help&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;filters_help&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Get the full help for filters strings&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--options-help&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;options_help&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Get the full help for options strings&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--verify-expire-seconds&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;verify_expire_seconds&#39;</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Expire the verify filters used by this package in N seconds&#39;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">parser</span></div>


<div class="viewcode-block" id="setup_pytan_shell_argparser"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.setup_pytan_shell_argparser">[docs]</a><span class="k">def</span> <span class="nf">setup_pytan_shell_argparser</span><span class="p">(</span><span class="n">doc</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Method to setup the base :class:`pytan.utils.CustomArgParse` class for command line scripts using :func:`pytan.utils.setup_parser`, then add specific arguments for scripts that use :mod:`pytan` to create a python shell.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">pytan</span><span class="o">.</span><span class="n">binsupport</span><span class="o">.</span><span class="n">setup_parser</span><span class="p">(</span><span class="n">desc</span><span class="o">=</span><span class="n">doc</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">parser</span></div>


<div class="viewcode-block" id="setup_create_user_argparser"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.setup_create_user_argparser">[docs]</a><span class="k">def</span> <span class="nf">setup_create_user_argparser</span><span class="p">(</span><span class="n">doc</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Method to setup the base :class:`pytan.utils.CustomArgParse` class for command line scripts using :func:`pytan.utils.setup_parser`, then add specific arguments for scripts that use :mod:`pytan` to create a user.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">pytan</span><span class="o">.</span><span class="n">binsupport</span><span class="o">.</span><span class="n">setup_parser</span><span class="p">(</span><span class="n">desc</span><span class="o">=</span><span class="n">doc</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">arggroup_name</span> <span class="o">=</span> <span class="s">&#39;Create User Options&#39;</span>
    <span class="n">arggroup</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span><span class="n">arggroup_name</span><span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;-n&#39;</span><span class="p">,</span>
        <span class="s">&#39;--name&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;name&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Name of user to create&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;-rn&#39;</span><span class="p">,</span>
        <span class="s">&#39;--rolename&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;append&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;rolename&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Name of role to assign to new user&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;-ri&#39;</span><span class="p">,</span>
        <span class="s">&#39;--roleid&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;append&#39;</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;roleid&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;ID of role to assign to new user&#39;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;-g&#39;</span><span class="p">,</span>
        <span class="s">&#39;--group&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;group&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Name of group to assign to user&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;-prop&#39;</span><span class="p">,</span>
        <span class="s">&#39;--property&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;append&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;properties&#39;</span><span class="p">,</span>
        <span class="n">nargs</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Property name and value to assign to user&#39;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">parser</span></div>


<div class="viewcode-block" id="setup_create_json_object_argparser"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.setup_create_json_object_argparser">[docs]</a><span class="k">def</span> <span class="nf">setup_create_json_object_argparser</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">doc</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Method to setup the base :class:`pytan.utils.CustomArgParse` class for command line scripts using :func:`pytan.utils.setup_parser`, then add specific arguments for scripts that use :mod:`pytan` to create objects from json files.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">setup_parent_parser</span><span class="p">(</span><span class="n">doc</span><span class="o">=</span><span class="n">doc</span><span class="p">)</span>
    <span class="n">arggroup_name</span> <span class="o">=</span> <span class="s">&#39;Create {} from JSON Options&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;_&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">capitalize</span><span class="p">())</span>
    <span class="n">arggroup</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span><span class="n">arggroup_name</span><span class="p">)</span>
    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;-j&#39;</span><span class="p">,</span>
        <span class="s">&#39;--json&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;json_file&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;JSON file to use for creating the object&#39;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">parser</span></div>


<div class="viewcode-block" id="setup_delete_object_argparser"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.setup_delete_object_argparser">[docs]</a><span class="k">def</span> <span class="nf">setup_delete_object_argparser</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">doc</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Method to setup the base :class:`pytan.utils.CustomArgParse` class for command line scripts using :func:`pytan.utils.setup_parser`, then add specific arguments for scripts that use :mod:`pytan` to delete objects.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">setup_parent_parser</span><span class="p">(</span><span class="n">doc</span><span class="o">=</span><span class="n">doc</span><span class="p">)</span>
    <span class="n">arggroup_name</span> <span class="o">=</span> <span class="s">&#39;Delete {} Options&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;_&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">capitalize</span><span class="p">())</span>
    <span class="n">arggroup</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span><span class="n">arggroup_name</span><span class="p">)</span>

    <span class="n">obj_map</span> <span class="o">=</span> <span class="n">pytan</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">get_obj_map</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
    <span class="n">search_keys</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">obj_map</span><span class="p">[</span><span class="s">&#39;search&#39;</span><span class="p">])</span>

    <span class="k">if</span> <span class="n">obj</span> <span class="o">==</span> <span class="s">&#39;whitelisted_url&#39;</span><span class="p">:</span>
        <span class="n">search_keys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;url_regex&#39;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">obj</span> <span class="o">==</span> <span class="s">&#39;user&#39;</span><span class="p">:</span>
        <span class="n">search_keys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;name&#39;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">search_keys</span><span class="p">:</span>
        <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s">&#39;--{}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">k</span><span class="p">),</span>
            <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
            <span class="n">action</span><span class="o">=</span><span class="s">&#39;append&#39;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="p">[],</span>
            <span class="n">dest</span><span class="o">=</span><span class="n">k</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s">&#39;{} of {} to get&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">obj</span><span class="p">),</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">parser</span></div>


<div class="viewcode-block" id="setup_ask_saved_argparser"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.setup_ask_saved_argparser">[docs]</a><span class="k">def</span> <span class="nf">setup_ask_saved_argparser</span><span class="p">(</span><span class="n">doc</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Method to setup the base :class:`pytan.utils.CustomArgParse` class for command line scripts using :func:`pytan.utils.setup_parser`, then add specific arguments for scripts that use :mod:`pytan` to ask saved questions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">setup_parent_parser</span><span class="p">(</span><span class="n">doc</span><span class="o">=</span><span class="n">doc</span><span class="p">)</span>
    <span class="n">arggroup_name</span> <span class="o">=</span> <span class="s">&#39;Saved Question Options&#39;</span>
    <span class="n">arggroup</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span><span class="n">arggroup_name</span><span class="p">)</span>

    <span class="n">arggroup_name</span> <span class="o">=</span> <span class="s">&#39;Saved Question Selectors&#39;</span>
    <span class="n">arggroup</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span><span class="n">arggroup_name</span><span class="p">)</span>

    <span class="n">group</span> <span class="o">=</span> <span class="n">arggroup</span><span class="o">.</span><span class="n">add_mutually_exclusive_group</span><span class="p">()</span>

    <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--no-refresh_data&#39;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_false&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;refresh_data&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">SUPPRESS</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Do not refresh the data available for a saved question (default)&#39;</span>
    <span class="p">)</span>

    <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--refresh_data&#39;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;refresh_data&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">SUPPRESS</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Refresh the data available for a saved question&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">group</span> <span class="o">=</span> <span class="n">arggroup</span><span class="o">.</span><span class="n">add_mutually_exclusive_group</span><span class="p">()</span>

    <span class="n">obj</span> <span class="o">=</span> <span class="s">&#39;saved_question&#39;</span>
    <span class="n">obj_map</span> <span class="o">=</span> <span class="n">pytan</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">get_obj_map</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
    <span class="n">search_keys</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">obj_map</span><span class="p">[</span><span class="s">&#39;search&#39;</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">search_keys</span><span class="p">:</span>
        <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s">&#39;--{}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">k</span><span class="p">),</span>
            <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
            <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
            <span class="n">dest</span><span class="o">=</span><span class="n">k</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s">&#39;{} of {} to ask&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">obj</span><span class="p">),</span>
        <span class="p">)</span>

    <span class="n">parser</span> <span class="o">=</span> <span class="n">add_ask_report_argparser</span><span class="p">(</span><span class="n">parser</span><span class="o">=</span><span class="n">parser</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">parser</span></div>


<div class="viewcode-block" id="setup_stop_action_argparser"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.setup_stop_action_argparser">[docs]</a><span class="k">def</span> <span class="nf">setup_stop_action_argparser</span><span class="p">(</span><span class="n">doc</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Method to setup the base :class:`pytan.utils.CustomArgParse` class for command line scripts using :func:`pytan.utils.setup_parser`, then add specific arguments for scripts that use :mod:`pytan` to stop actions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">setup_parent_parser</span><span class="p">(</span><span class="n">doc</span><span class="o">=</span><span class="n">doc</span><span class="p">)</span>
    <span class="n">arggroup_name</span> <span class="o">=</span> <span class="s">&#39;Stop Action Options&#39;</span>
    <span class="n">arggroup</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span><span class="n">arggroup_name</span><span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;-i&#39;</span><span class="p">,</span>
        <span class="s">&#39;--id&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;id&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;ID of Deploy Action to stop&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">parser</span></div>


<div class="viewcode-block" id="setup_deploy_action_argparser"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.setup_deploy_action_argparser">[docs]</a><span class="k">def</span> <span class="nf">setup_deploy_action_argparser</span><span class="p">(</span><span class="n">doc</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Method to setup the base :class:`pytan.utils.CustomArgParse` class for command line scripts using :func:`pytan.utils.setup_parser`, then add specific arguments for scripts that use :mod:`pytan` to deploy actions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">setup_parent_parser</span><span class="p">(</span><span class="n">doc</span><span class="o">=</span><span class="n">doc</span><span class="p">)</span>
    <span class="n">arggroup_name</span> <span class="o">=</span> <span class="s">&#39;Deploy Action Options&#39;</span>
    <span class="n">arggroup</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span><span class="n">arggroup_name</span><span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--run&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;run&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Run the deploy action, if not supplied the deploy action will &#39;</span>
        <span class="s">&#39;only ask the question that matches --filter and save the results to &#39;</span>
        <span class="s">&#39;csv file for verification&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">group</span> <span class="o">=</span> <span class="n">arggroup</span><span class="o">.</span><span class="n">add_mutually_exclusive_group</span><span class="p">()</span>

    <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--no-results&#39;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_false&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;get_results&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">SUPPRESS</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Do not get the results after starting the deploy &#39;</span>
        <span class="s">&#39;action&#39;</span>
    <span class="p">)</span>
    <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--results&#39;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;get_results&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Get the results after starting the deploy action &#39;</span>
        <span class="s">&#39;(default)&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;-k&#39;</span><span class="p">,</span>
        <span class="s">&#39;--package&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;package&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Package to deploy action with, optionally describe parameters, &#39;</span>
        <span class="s">&#39;pass --package-help to get a full description&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;-f&#39;</span><span class="p">,</span>
        <span class="s">&#39;--filter&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;append&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;action_filters&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Filter to deploy action against; pass --filters-help&#39;</span>
        <span class="s">&#39;to get a full description&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;-o&#39;</span><span class="p">,</span>
        <span class="s">&#39;--option&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;append&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;action_options&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Options for deploy action filter; pass --options-help to get a &#39;</span>
        <span class="s">&#39;full description&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--start_seconds_from_now&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;start_seconds_from_now&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Start the action N seconds from now&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--expire_seconds&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;expire_seconds&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Expire the action N seconds after it starts, if not supplied &#39;</span>
        <span class="s">&#39;the packages own expire_seconds will be used&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--package-help&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;package_help&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Get the full help for package string&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--filters-help&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;filters_help&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Get the full help for filters strings&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--options-help&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;options_help&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Get the full help for options strings&#39;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">add_report_file_options</span><span class="p">(</span><span class="n">parser</span><span class="o">=</span><span class="n">parser</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">parser</span></div>


<div class="viewcode-block" id="setup_get_results_argparser"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.setup_get_results_argparser">[docs]</a><span class="k">def</span> <span class="nf">setup_get_results_argparser</span><span class="p">(</span><span class="n">doc</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Method to setup the base :class:`pytan.utils.CustomArgParse` class for command line scripts using :func:`pytan.utils.setup_parser`, then add specific arguments for scripts that use :mod:`pytan` to get results for questions or actions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">setup_parent_parser</span><span class="p">(</span><span class="n">doc</span><span class="o">=</span><span class="n">doc</span><span class="p">)</span>
    <span class="n">arggroup_name</span> <span class="o">=</span> <span class="s">&#39;Get Result Options&#39;</span>
    <span class="n">arggroup</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span><span class="n">arggroup_name</span><span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;-o&#39;</span><span class="p">,</span>
        <span class="s">&#39;--object&#39;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="s">&#39;question&#39;</span><span class="p">,</span>
        <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;saved_question&#39;</span><span class="p">,</span> <span class="s">&#39;question&#39;</span><span class="p">,</span> <span class="s">&#39;action&#39;</span><span class="p">],</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;objtype&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Type of object to get results for&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;-i&#39;</span><span class="p">,</span>
        <span class="s">&#39;--id&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;id&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;id of object to get results for&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;-n&#39;</span><span class="p">,</span>
        <span class="s">&#39;--name&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;name&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;name of object to get results for&#39;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">add_ask_report_argparser</span><span class="p">(</span><span class="n">parser</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">parser</span></div>


<div class="viewcode-block" id="setup_ask_parsed_argparser"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.setup_ask_parsed_argparser">[docs]</a><span class="k">def</span> <span class="nf">setup_ask_parsed_argparser</span><span class="p">(</span><span class="n">doc</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Method to setup the base :class:`pytan.utils.CustomArgParse` class for command line scripts using :func:`pytan.utils.setup_parser`, then add specific arguments for scripts that use :mod:`pytan` to ask parsed questions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">setup_parent_parser</span><span class="p">(</span><span class="n">doc</span><span class="o">=</span><span class="n">doc</span><span class="p">)</span>
    <span class="n">arggroup_name</span> <span class="o">=</span> <span class="s">&#39;Parsed Question Options&#39;</span>
    <span class="n">arggroup</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span><span class="n">arggroup_name</span><span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;-q&#39;</span><span class="p">,</span>
        <span class="s">&#39;--question_text&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;question_text&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;The question text you want the server to parse into a list of parsed results&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--picker&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
        <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;picker&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;The index number of the parsed results that correlates to the actual question you wish to run -- you can get this by running this once without it to print out a list of indexes&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">group</span> <span class="o">=</span> <span class="n">arggroup</span><span class="o">.</span><span class="n">add_mutually_exclusive_group</span><span class="p">()</span>

    <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--no-results&#39;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_false&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;get_results&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">SUPPRESS</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Do not get the results after asking the quesiton &#39;</span>
        <span class="s">&#39;action&#39;</span>
    <span class="p">)</span>
    <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--results&#39;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;get_results&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Get the results after asking the quesiton (default)&#39;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">add_ask_report_argparser</span><span class="p">(</span><span class="n">parser</span><span class="o">=</span><span class="n">parser</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">parser</span></div>


<div class="viewcode-block" id="setup_ask_manual_argparser"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.setup_ask_manual_argparser">[docs]</a><span class="k">def</span> <span class="nf">setup_ask_manual_argparser</span><span class="p">(</span><span class="n">doc</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Method to setup the base :class:`pytan.utils.CustomArgParse` class for command line scripts using :func:`pytan.utils.setup_parser`, then add specific arguments for scripts that use :mod:`pytan` to ask manual questions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">setup_parent_parser</span><span class="p">(</span><span class="n">doc</span><span class="o">=</span><span class="n">doc</span><span class="p">)</span>
    <span class="n">arggroup_name</span> <span class="o">=</span> <span class="s">&#39;Manual Question Options&#39;</span>
    <span class="n">arggroup</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span><span class="n">arggroup_name</span><span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;-s&#39;</span><span class="p">,</span>
        <span class="s">&#39;--sensor&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;append&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;sensors&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Sensor, optionally describe parameters, options, and a filter&#39;</span>
        <span class="s">&#39;; pass --sensors-help to get a full description&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;-f&#39;</span><span class="p">,</span>
        <span class="s">&#39;--filter&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;append&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;question_filters&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Whole question filter; pass --filters-help to get a full description&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;-o&#39;</span><span class="p">,</span>
        <span class="s">&#39;--option&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;append&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;question_options&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Whole question option; pass --options-help to get a full description&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--sensors-help&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;sensors_help&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Get the full help for sensor strings&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--filters-help&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;filters_help&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Get the full help for filters strings&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--options-help&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;options_help&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Get the full help for options strings&#39;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">group</span> <span class="o">=</span> <span class="n">arggroup</span><span class="o">.</span><span class="n">add_mutually_exclusive_group</span><span class="p">()</span>

    <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--no-results&#39;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_false&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;get_results&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">SUPPRESS</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Do not get the results after asking the quesiton &#39;</span>
        <span class="s">&#39;action&#39;</span>
    <span class="p">)</span>
    <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--results&#39;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;get_results&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Get the results after asking the quesiton &#39;</span>
        <span class="s">&#39;(default)&#39;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">add_ask_report_argparser</span><span class="p">(</span><span class="n">parser</span><span class="o">=</span><span class="n">parser</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">parser</span></div>


<div class="viewcode-block" id="add_ask_report_argparser"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.add_ask_report_argparser">[docs]</a><span class="k">def</span> <span class="nf">add_ask_report_argparser</span><span class="p">(</span><span class="n">parser</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Method to extend a :class:`pytan.utils.CustomArgParse` class for command line scripts with arguments for scripts that need to supply export format subparsers for asking questions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">add_report_file_options</span><span class="p">(</span><span class="n">parser</span><span class="o">=</span><span class="n">parser</span><span class="p">)</span>

    <span class="n">arggroup_name</span> <span class="o">=</span> <span class="s">&#39;Export Options&#39;</span>
    <span class="n">arggroup</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span><span class="n">arggroup_name</span><span class="p">)</span>

    <span class="n">group</span> <span class="o">=</span> <span class="n">arggroup</span><span class="o">.</span><span class="n">add_mutually_exclusive_group</span><span class="p">()</span>
    <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--enable_sse&#39;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;sse&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Perform a server side export when getting data&#39;</span>
    <span class="p">)</span>
    <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--disable_sse&#39;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_false&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;sse&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Perform a normal get result data export when getting data&#39;</span>
    <span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--sse_format&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="s">&#39;xml_obj&#39;</span><span class="p">,</span>
        <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;csv&#39;</span><span class="p">,</span> <span class="s">&#39;xml&#39;</span><span class="p">,</span> <span class="s">&#39;xml_obj&#39;</span><span class="p">,</span> <span class="s">&#39;cef&#39;</span><span class="p">],</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;sse_format&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;If sse = True, perform server side export in this format&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--leading&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;leading&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;If sse = True, and sse_format = &quot;cef&quot;, prepend each row with this text&#39;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--trailing&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;trailing&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;If sse = True, and sse_format = &quot;cef&quot;, append each row with this text&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--export_format&#39;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="s">&#39;csv&#39;</span><span class="p">,</span>
        <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;csv&#39;</span><span class="p">,</span> <span class="s">&#39;xml&#39;</span><span class="p">,</span> <span class="s">&#39;json&#39;</span><span class="p">],</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;export_format&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Export Format to create report file in, only used if sse = False&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">group</span> <span class="o">=</span> <span class="n">arggroup</span><span class="o">.</span><span class="n">add_mutually_exclusive_group</span><span class="p">()</span>
    <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--sort&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;append&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;header_sort&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;For export_format: csv, Sort headers by given names&#39;</span>
    <span class="p">)</span>
    <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--no-sort&#39;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_false&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;header_sort&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">SUPPRESS</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;For export_format: csv, Do not sort the headers at all&#39;</span>
    <span class="p">)</span>
    <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--auto_sort&#39;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;header_sort&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">SUPPRESS</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;For export_format: csv, Sort the headers with a basic alphanumeric sort (default)&#39;</span>
    <span class="p">)</span>

    <span class="n">group</span> <span class="o">=</span> <span class="n">arggroup</span><span class="o">.</span><span class="n">add_mutually_exclusive_group</span><span class="p">()</span>
    <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--add-sensor&#39;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;header_add_sensor&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">SUPPRESS</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;For export_format: csv, Add the sensor names to each header&#39;</span>
    <span class="p">)</span>
    <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--no-add-sensor&#39;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_false&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;header_add_sensor&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">SUPPRESS</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;For export_format: csv, Do not add the sensor names to each header (default)&#39;</span>
    <span class="p">)</span>

    <span class="n">group</span> <span class="o">=</span> <span class="n">arggroup</span><span class="o">.</span><span class="n">add_mutually_exclusive_group</span><span class="p">()</span>
    <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--add-type&#39;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;header_add_type&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">SUPPRESS</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;For export_format: csv, Add the result type to each header&#39;</span>
    <span class="p">)</span>
    <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--no-add-type&#39;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_false&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;header_add_type&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">SUPPRESS</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;For export_format: csv, Do not add the result type to each header (default)&#39;</span>
    <span class="p">)</span>

    <span class="n">group</span> <span class="o">=</span> <span class="n">arggroup</span><span class="o">.</span><span class="n">add_mutually_exclusive_group</span><span class="p">()</span>
    <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--expand-columns&#39;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;expand_grouped_columns&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">SUPPRESS</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;For export_format: csv, Expand multi-line cells into their own rows that have sensor correlated columns in the new rows&#39;</span>
    <span class="p">)</span>
    <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--no-columns&#39;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_false&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;expand_grouped_columns&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">SUPPRESS</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;For export_format: csv, Do not add expand multi-line cells into their own rows (default)&#39;</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">parser</span></div>


<div class="viewcode-block" id="add_report_file_options"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.add_report_file_options">[docs]</a><span class="k">def</span> <span class="nf">add_report_file_options</span><span class="p">(</span><span class="n">parser</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Method to extend a :class:`pytan.utils.CustomArgParse` class for command line scripts with arguments for scripts that need to supply export file and directory options.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">opt_group</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span><span class="s">&#39;Report File Options&#39;</span><span class="p">)</span>
    <span class="n">opt_group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--file&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;report_file&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;File to save report to (will be automatically generated if not &#39;</span>
        <span class="s">&#39;supplied)&#39;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">opt_group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--dir&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;report_dir&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Directory to save report to (current directory will be used if &#39;</span>
        <span class="s">&#39;not supplied)&#39;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">parser</span></div>


<div class="viewcode-block" id="add_get_object_report_argparser"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.add_get_object_report_argparser">[docs]</a><span class="k">def</span> <span class="nf">add_get_object_report_argparser</span><span class="p">(</span><span class="n">parser</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Method to extend a :class:`pytan.utils.CustomArgParse` class for command line scripts with arguments for scripts that need to supply export format subparsers for getting objects.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">add_report_file_options</span><span class="p">(</span><span class="n">parser</span><span class="p">)</span>
    <span class="n">arggroup_name</span> <span class="o">=</span> <span class="s">&#39;Export Options&#39;</span>
    <span class="n">arggroup</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">add_argument_group</span><span class="p">(</span><span class="n">arggroup_name</span><span class="p">)</span>

    <span class="n">arggroup</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--export_format&#39;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="s">&#39;csv&#39;</span><span class="p">,</span>
        <span class="n">choices</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;csv&#39;</span><span class="p">,</span> <span class="s">&#39;xml&#39;</span><span class="p">,</span> <span class="s">&#39;json&#39;</span><span class="p">],</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;export_format&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Export Format to create report file in, only used if sse = False&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">group</span> <span class="o">=</span> <span class="n">arggroup</span><span class="o">.</span><span class="n">add_mutually_exclusive_group</span><span class="p">()</span>
    <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--sort&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;append&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;header_sort&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Only for export_format csv, Sort headers by given names&#39;</span>
    <span class="p">)</span>
    <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--no-sort&#39;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_false&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;header_sort&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">SUPPRESS</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Only for export_format csv, Do not sort the headers at all&#39;</span>
    <span class="p">)</span>
    <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--auto_sort&#39;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;header_sort&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">SUPPRESS</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Only for export_format csv, Sort the headers with a basic alphanumeric sort (default)&#39;</span>
    <span class="p">)</span>

    <span class="n">group</span> <span class="o">=</span> <span class="n">arggroup</span><span class="o">.</span><span class="n">add_mutually_exclusive_group</span><span class="p">()</span>
    <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--no-explode-json&#39;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_false&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;explode_json_string_values&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">SUPPRESS</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Only for export_format csv or json, Do not explode any embedded JSON into their own columns&#39;</span>
    <span class="p">)</span>
    <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--explode-json&#39;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;explode_json_string_values&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">SUPPRESS</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Only for export_format csv or json, Only for export_format csv, Explode any embedded JSON into their own columns (default)&#39;</span>
    <span class="p">)</span>

    <span class="n">group</span> <span class="o">=</span> <span class="n">arggroup</span><span class="o">.</span><span class="n">add_mutually_exclusive_group</span><span class="p">()</span>
    <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--no-include_type&#39;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_false&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;include_type&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">SUPPRESS</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Only for export_format json, Do not include SOAP type in JSON output&#39;</span>
    <span class="p">)</span>
    <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--include_type&#39;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;include_type&#39;</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">SUPPRESS</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Only for export_format json, Include SOAP type in JSON output (default)&#39;</span>
    <span class="p">)</span>

    <span class="n">group</span> <span class="o">=</span> <span class="n">arggroup</span><span class="o">.</span><span class="n">add_mutually_exclusive_group</span><span class="p">()</span>
    <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--no-minimal&#39;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_false&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;minimal&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">SUPPRESS</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Only for export_format xml, Produce the full XML representation, including empty attributes&#39;</span>
    <span class="p">)</span>
    <span class="n">group</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s">&#39;--minimal&#39;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s">&#39;store_true&#39;</span><span class="p">,</span>
        <span class="n">dest</span><span class="o">=</span><span class="s">&#39;minimal&#39;</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="n">argparse</span><span class="o">.</span><span class="n">SUPPRESS</span><span class="p">,</span>
        <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s">&#39;Only for export_format xml, Only include attributes that are not empty (default)&#39;</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">parser</span></div>


<div class="viewcode-block" id="process_create_json_object_args"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.process_create_json_object_args">[docs]</a><span class="k">def</span> <span class="nf">process_create_json_object_args</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">handler</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Process command line args supplied by user for create json object</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    parser : :class:`argparse.ArgParse`</span>
<span class="sd">        * ArgParse object used to parse `all_args`</span>
<span class="sd">    handler : :class:`pytan.handler.Handler`</span>
<span class="sd">        * Instance of Handler created from command line args</span>
<span class="sd">    obj : str</span>
<span class="sd">        * Object type for create json object</span>
<span class="sd">    args : args object</span>
<span class="sd">        * args parsed from `parser`</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    response : :class:`taniumpy.object_types.base.BaseType`</span>
<span class="sd">        * response from :func:`pytan.handler.Handler.create_from_json`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c"># put our query args into their own dict and remove them from all_args</span>
    <span class="n">obj_grp_names</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s">&#39;Create {} from JSON Options&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;_&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span>
        <span class="p">)</span>
    <span class="p">]</span>
    <span class="n">obj_grp_opts</span> <span class="o">=</span> <span class="n">get_grp_opts</span><span class="p">(</span><span class="n">parser</span><span class="o">=</span><span class="n">parser</span><span class="p">,</span> <span class="n">grp_names</span><span class="o">=</span><span class="n">obj_grp_names</span><span class="p">)</span>
    <span class="n">obj_grp_args</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">obj_grp_opts</span><span class="p">}</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">create_from_json</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="o">**</span><span class="n">obj_grp_args</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
        <span class="k">print</span> <span class="s">&quot;</span><span class="se">\n\n</span><span class="s">Error occurred: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">response</span><span class="p">:</span>
        <span class="n">obj_id</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="s">&#39;unknown&#39;</span><span class="p">)</span>
        <span class="k">print</span> <span class="s">&quot;Created item: {}, ID: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">obj_id</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">response</span></div>


<div class="viewcode-block" id="process_tsat_args"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.process_tsat_args">[docs]</a><span class="k">def</span> <span class="nf">process_tsat_args</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">handler</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Process command line args supplied by user for tsat</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    parser : :class:`argparse.ArgParse`</span>
<span class="sd">        * ArgParse object used to parse `all_args`</span>
<span class="sd">    handler : :class:`pytan.handler.Handler`</span>
<span class="sd">        * Instance of Handler created from command line args</span>
<span class="sd">    args : args object</span>
<span class="sd">        * args parsed from `parser`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    TODO:</span>
<span class="sd">        file with params to pass for paramaretrized sensors</span>
<span class="sd">        saved questions</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">mylog</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s">&#39;TSAT&#39;</span><span class="p">)</span>
    <span class="n">mylog</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">debugformat</span><span class="p">:</span>
        <span class="n">mylog</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">mylog</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">any</span><span class="p">([</span><span class="n">args</span><span class="o">.</span><span class="n">sensors_help</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">filters_help</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">options_help</span><span class="p">]):</span>
        <span class="n">handler</span><span class="o">.</span><span class="n">ask_manual</span><span class="p">(</span>
            <span class="n">sensors_help</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">sensors_help</span><span class="p">,</span>
            <span class="n">filters_help</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">filters_help</span><span class="p">,</span>
            <span class="n">options_help</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">options_help</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">99</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">report_dir</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">report_dir</span><span class="p">)</span>

    <span class="n">my_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">my_file</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">whole_logfile</span> <span class="o">=</span> <span class="s">&#39;{}_{}.log&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">my_name</span><span class="p">,</span> <span class="n">pytan</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">get_now</span><span class="p">())</span>
    <span class="n">whole_logfile</span> <span class="o">=</span> <span class="n">filter_filename</span><span class="p">(</span><span class="n">whole_logfile</span><span class="p">)</span>
    <span class="n">whole_logfile_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">report_dir</span><span class="p">,</span> <span class="n">whole_logfile</span><span class="p">)</span>
    <span class="n">add_file_log</span><span class="p">(</span><span class="n">whole_logfile_path</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">debugformat</span><span class="p">)</span>

    <span class="n">sensors</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">get_all</span><span class="p">(</span><span class="s">&#39;sensor&#39;</span><span class="p">)</span>
    <span class="n">mylog</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Found {} total sensors&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">sensors</span><span class="p">)))</span>

    <span class="c"># filter out all sensors that have a source_id (i.e. are created as temp sensors for params)</span>
    <span class="n">real_sensors</span> <span class="o">=</span> <span class="n">filter_sourced_sensors</span><span class="p">(</span><span class="n">sensors</span><span class="o">=</span><span class="n">sensors</span><span class="p">)</span>
    <span class="n">mylog</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Filtered out sourced sensors: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">real_sensors</span><span class="p">)))</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">real_sensors</span><span class="p">:</span>
        <span class="n">mylog</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s">&quot;No sensors found!&quot;</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

    <span class="n">filtered_sensors</span> <span class="o">=</span> <span class="n">filter_sensors</span><span class="p">(</span>
        <span class="n">sensors</span><span class="o">=</span><span class="n">real_sensors</span><span class="p">,</span> <span class="n">filter_platforms</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">platforms</span><span class="p">,</span> <span class="n">filter_categories</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">categories</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">mylog</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Filtered out sensors based on user filters: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">filtered_sensors</span><span class="p">)))</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">filtered_sensors</span><span class="p">:</span>
        <span class="n">mylog</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s">&quot;Platform/Category filters too restrictive, no sensors match!&quot;</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

    <span class="n">reports_run</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">sensor</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">filtered_sensors</span><span class="p">):</span>
        <span class="n">report_info</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;sensor&#39;</span><span class="p">:</span> <span class="n">sensor</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="s">&#39;msg&#39;</span><span class="p">:</span> <span class="s">&#39;Not run&#39;</span><span class="p">,</span>
            <span class="s">&#39;report_file&#39;</span><span class="p">:</span> <span class="s">&#39;N/A&#39;</span><span class="p">,</span>
            <span class="s">&#39;elapsed_seconds&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span>
            <span class="s">&#39;question&#39;</span><span class="p">:</span> <span class="s">&#39;N/A&#39;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">mylog</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="s">&quot;NOW WORKING ON SENSOR: {} ({}/{})</span><span class="se">\n</span><span class="s">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sensor</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">idx</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">filtered_sensors</span><span class="p">))</span>
        <span class="p">)</span>
        <span class="n">sensor_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">report_dir</span><span class="p">,</span> <span class="n">filter_filename</span><span class="p">(</span><span class="n">sensor</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">sensor_dir</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">sensor_dir</span><span class="p">)</span>

        <span class="n">logfile</span> <span class="o">=</span> <span class="s">&#39;{}_{}.log&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sensor</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">pytan</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">get_now</span><span class="p">())</span>
        <span class="n">logfile</span> <span class="o">=</span> <span class="n">filter_filename</span><span class="p">(</span><span class="n">logfile</span><span class="p">)</span>
        <span class="n">logfile_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sensor_dir</span><span class="p">,</span> <span class="n">logfile</span><span class="p">)</span>

        <span class="n">add_file_log</span><span class="p">(</span><span class="n">logfile_path</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">debugformat</span><span class="p">)</span>
        <span class="n">mylog</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;++ Asking question for sensor: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sensor</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">start_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
            <span class="n">ret</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">ask_manual</span><span class="p">(</span>
                <span class="n">sensors</span><span class="o">=</span><span class="n">sensor</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="n">timeout</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">timeout</span><span class="p">,</span>
                <span class="n">pct_complete_threshold</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">pct_complete_threshold</span><span class="p">,</span>
                <span class="n">question_filters</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">question_filters</span><span class="p">,</span>
                <span class="n">question_options</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">question_options</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="c"># TODO: NO MORE EXCEPTION, ITS POLLER.STATUS</span>
        <span class="k">except</span> <span class="n">taniumpy</span><span class="o">.</span><span class="n">question_asker</span><span class="o">.</span><span class="n">QuestionTimeoutException</span><span class="p">:</span>
            <span class="n">m</span> <span class="o">=</span> <span class="s">&quot;!! Question failed to complete due to timeout (timeout is {} seconds)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">args</span><span class="o">.</span><span class="n">timeout</span>
            <span class="p">)</span>
            <span class="n">report_info</span><span class="p">[</span><span class="s">&#39;msg&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">m</span>
            <span class="n">reports_run</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">report_info</span><span class="p">)</span>
            <span class="n">mylog</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
            <span class="n">remove_file_log</span><span class="p">(</span><span class="n">logfile_path</span><span class="p">)</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">sleep</span><span class="p">)</span>
            <span class="k">continue</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">m</span> <span class="o">=</span> <span class="s">&quot;!! Question failed to complete: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="n">report_info</span><span class="p">[</span><span class="s">&#39;msg&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">m</span>
            <span class="n">reports_run</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">report_info</span><span class="p">)</span>
            <span class="n">mylog</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
            <span class="n">remove_file_log</span><span class="p">(</span><span class="n">logfile_path</span><span class="p">)</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">sleep</span><span class="p">)</span>
            <span class="k">continue</span>

        <span class="n">end_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="n">elapsed_time</span> <span class="o">=</span> <span class="n">end_time</span> <span class="o">-</span> <span class="n">start_time</span>
        <span class="n">m</span> <span class="o">=</span> <span class="s">&quot;++ Asked Question {!r} ID: {!r} in {} seconds&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="n">ret</span><span class="p">[</span><span class="s">&#39;question_object&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">query_text</span><span class="p">,</span> <span class="n">ret</span><span class="p">[</span><span class="s">&#39;question_object&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">elapsed_time</span><span class="o">.</span><span class="n">seconds</span>
        <span class="p">)</span>
        <span class="n">report_info</span><span class="p">[</span><span class="s">&#39;question&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ret</span><span class="p">[</span><span class="s">&#39;question_object&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">query_text</span>
        <span class="n">report_info</span><span class="p">[</span><span class="s">&#39;question_id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ret</span><span class="p">[</span><span class="s">&#39;question_object&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">id</span>
        <span class="n">report_info</span><span class="p">[</span><span class="s">&#39;elapsed_seconds&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">elapsed_time</span><span class="o">.</span><span class="n">seconds</span>
        <span class="n">report_info</span><span class="p">[</span><span class="s">&#39;msg&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">m</span>
        <span class="n">mylog</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">ret</span><span class="p">[</span><span class="s">&#39;question_results&#39;</span><span class="p">]:</span>
            <span class="n">m</span> <span class="o">=</span> <span class="s">&quot;Unable to export question results to report file, no ResultSet returned!&quot;</span>
            <span class="n">report_info</span><span class="p">[</span><span class="s">&#39;report_file&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">m</span>
            <span class="n">reports_run</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">report_info</span><span class="p">)</span>
            <span class="n">mylog</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
            <span class="n">remove_file_log</span><span class="p">(</span><span class="n">logfile_path</span><span class="p">)</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">sleep</span><span class="p">)</span>
            <span class="k">continue</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">ret</span><span class="p">[</span><span class="s">&#39;question_results&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">rows</span><span class="p">:</span>
            <span class="n">m</span> <span class="o">=</span> <span class="s">&quot;Unable to export question results to report file, no rows returned!&quot;</span>
            <span class="n">report_info</span><span class="p">[</span><span class="s">&#39;report_file&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">m</span>
            <span class="n">reports_run</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">report_info</span><span class="p">)</span>
            <span class="n">mylog</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
            <span class="n">remove_file_log</span><span class="p">(</span><span class="n">logfile_path</span><span class="p">)</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">sleep</span><span class="p">)</span>
            <span class="k">continue</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">report_file</span><span class="p">,</span> <span class="n">result</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">export_to_report_file</span><span class="p">(</span>
                <span class="n">obj</span><span class="o">=</span><span class="n">ret</span><span class="p">[</span><span class="s">&#39;question_results&#39;</span><span class="p">],</span> <span class="n">export_format</span><span class="o">=</span><span class="s">&#39;csv&#39;</span><span class="p">,</span> <span class="n">report_dir</span><span class="o">=</span><span class="n">sensor_dir</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">report_info</span><span class="p">[</span><span class="s">&#39;report_file&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">report_file</span>
            <span class="n">m</span> <span class="o">=</span> <span class="s">&quot;++ Report file {!r} written with {} bytes&quot;</span><span class="o">.</span><span class="n">format</span>
            <span class="n">mylog</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">m</span><span class="p">(</span><span class="n">report_file</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">)))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">m</span> <span class="o">=</span> <span class="s">&quot;Unable to export question results to report file, error: {}&quot;</span><span class="o">.</span><span class="n">format</span>
            <span class="n">report_info</span><span class="p">[</span><span class="s">&#39;report_file&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">m</span>
            <span class="n">reports_run</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">report_info</span><span class="p">)</span>
            <span class="n">mylog</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">m</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>
            <span class="n">remove_file_log</span><span class="p">(</span><span class="n">logfile_path</span><span class="p">)</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">sleep</span><span class="p">)</span>
            <span class="k">continue</span>

        <span class="n">reports_run</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">report_info</span><span class="p">)</span>
        <span class="n">remove_file_log</span><span class="p">(</span><span class="n">logfile_path</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">sleep</span><span class="p">)</span>

    <span class="n">headers</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;sensor&#39;</span><span class="p">,</span> <span class="s">&#39;question&#39;</span><span class="p">,</span> <span class="s">&#39;question_id&#39;</span><span class="p">,</span> <span class="s">&#39;elapsed_seconds&#39;</span><span class="p">,</span> <span class="s">&#39;msg&#39;</span><span class="p">,</span> <span class="s">&#39;report_file&#39;</span><span class="p">]</span>
    <span class="n">csv_str</span> <span class="o">=</span> <span class="n">csvdictwriter</span><span class="p">(</span><span class="n">reports_run</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

    <span class="n">csv_file</span> <span class="o">=</span> <span class="s">&#39;{}_{}.csv&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">my_name</span><span class="p">,</span> <span class="n">pytan</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">get_now</span><span class="p">())</span>
    <span class="n">csv_file</span> <span class="o">=</span> <span class="n">filter_filename</span><span class="p">(</span><span class="n">csv_file</span><span class="p">)</span>
    <span class="n">csv_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">report_dir</span><span class="p">,</span> <span class="n">csv_file</span><span class="p">)</span>

    <span class="n">csv_fh</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">csv_file_path</span><span class="p">,</span> <span class="s">&#39;wb&#39;</span><span class="p">)</span>
    <span class="n">csv_fh</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">csv_str</span><span class="p">)</span>
    <span class="n">csv_fh</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="n">mylog</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Final CSV results of from all questions run written to: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">csv_file_path</span><span class="p">))</span></div>


<div class="viewcode-block" id="process_delete_object_args"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.process_delete_object_args">[docs]</a><span class="k">def</span> <span class="nf">process_delete_object_args</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">handler</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Process command line args supplied by user for delete object</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    parser : :class:`argparse.ArgParse`</span>
<span class="sd">        * ArgParse object used to parse `all_args`</span>
<span class="sd">    handler : :class:`pytan.handler.Handler`</span>
<span class="sd">        * Instance of Handler created from command line args</span>
<span class="sd">    obj : str</span>
<span class="sd">        * Object type for delete object</span>
<span class="sd">    args : args object</span>
<span class="sd">        * args parsed from `parser`</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    response : :class:`taniumpy.object_types.base.BaseType`</span>
<span class="sd">        * response from :func:`pytan.handler.Handler.delete`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c"># put our query args into their own dict and remove them from all_args</span>
    <span class="n">obj_grp_names</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s">&#39;Delete {} Options&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;_&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">capitalize</span><span class="p">())</span>
    <span class="p">]</span>
    <span class="n">obj_grp_opts</span> <span class="o">=</span> <span class="n">get_grp_opts</span><span class="p">(</span><span class="n">parser</span><span class="o">=</span><span class="n">parser</span><span class="p">,</span> <span class="n">grp_names</span><span class="o">=</span><span class="n">obj_grp_names</span><span class="p">)</span>
    <span class="n">obj_grp_args</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">obj_grp_opts</span><span class="p">}</span>
    <span class="n">obj_grp_args</span><span class="p">[</span><span class="s">&#39;objtype&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="o">**</span><span class="n">obj_grp_args</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
        <span class="k">print</span> <span class="s">&quot;</span><span class="se">\n\n</span><span class="s">Error occurred: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">response</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&quot;Deleted item: &quot;</span><span class="p">,</span> <span class="n">i</span>
    <span class="k">return</span> <span class="n">response</span></div>


<div class="viewcode-block" id="process_stop_action_args"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.process_stop_action_args">[docs]</a><span class="k">def</span> <span class="nf">process_stop_action_args</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">handler</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Process command line args supplied by user for getting results</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    parser : :class:`argparse.ArgParse`</span>
<span class="sd">        * ArgParse object used to parse `all_args`</span>
<span class="sd">    handler : :class:`pytan.handler.Handler`</span>
<span class="sd">        * Instance of Handler created from command line args</span>
<span class="sd">    args : args</span>
<span class="sd">        * args object from parsing `parser`</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    report_path, report_contents : tuple</span>
<span class="sd">        * results from :func:`pytan.handler.Handler.export_to_report_file` on the return of :func:`pytan.handler.Handler.get_result_data`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">action_stop</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">stop_action</span><span class="p">(</span><span class="o">**</span><span class="n">args</span><span class="o">.</span><span class="n">__dict__</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
        <span class="k">print</span> <span class="s">&quot;</span><span class="se">\n\n</span><span class="s">Error occurred: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">99</span><span class="p">)</span>

    <span class="k">print</span> <span class="s">&quot;++ Action ID stopped successfully: {0.id!r}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">action_stop</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">action_stop</span></div>


<div class="viewcode-block" id="process_get_results_args"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.process_get_results_args">[docs]</a><span class="k">def</span> <span class="nf">process_get_results_args</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">handler</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Process command line args supplied by user for getting results</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    parser : :class:`argparse.ArgParse`</span>
<span class="sd">        * ArgParse object used to parse `all_args`</span>
<span class="sd">    handler : :class:`pytan.handler.Handler`</span>
<span class="sd">        * Instance of Handler created from command line args</span>
<span class="sd">    args : args</span>
<span class="sd">        * args object from parsing `parser`</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    report_path, report_contents : tuple</span>
<span class="sd">        * results from :func:`pytan.handler.Handler.export_to_report_file` on the return of :func:`pytan.handler.Handler.get_result_data`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="o">**</span><span class="n">args</span><span class="o">.</span><span class="n">__dict__</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
        <span class="k">print</span> <span class="s">&quot;</span><span class="se">\n\n</span><span class="s">Error occurred: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">99</span><span class="p">)</span>

    <span class="n">m</span> <span class="o">=</span> <span class="s">&quot;++ Found object: {}&quot;</span><span class="o">.</span><span class="n">format</span>
    <span class="k">print</span><span class="p">(</span><span class="n">m</span><span class="p">(</span><span class="n">obj</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">sse</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">results_obj</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">get_result_data_sse</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="o">.</span><span class="n">__dict__</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">&quot;</span><span class="se">\n\n</span><span class="s">Error occurred: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">99</span><span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">results_obj</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">get_result_data</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">obj</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="o">.</span><span class="n">__dict__</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">&quot;</span><span class="se">\n\n</span><span class="s">Error occurred: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">99</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">results_obj</span><span class="p">,</span> <span class="n">taniumpy</span><span class="o">.</span><span class="n">object_types</span><span class="o">.</span><span class="n">result_set</span><span class="o">.</span><span class="n">ResultSet</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">results_obj</span><span class="o">.</span><span class="n">rows</span><span class="p">:</span>
            <span class="n">m</span> <span class="o">=</span> <span class="s">&quot;++ Found results for object: {}&quot;</span><span class="o">.</span><span class="n">format</span>
            <span class="k">print</span><span class="p">(</span><span class="n">m</span><span class="p">(</span><span class="n">results_obj</span><span class="p">))</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">report_path</span><span class="p">,</span> <span class="n">report_contents</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">export_to_report_file</span><span class="p">(</span>
                    <span class="n">obj</span><span class="o">=</span><span class="n">results_obj</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="o">.</span><span class="n">__dict__</span>
                <span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
                <span class="k">print</span> <span class="s">&quot;</span><span class="se">\n\n</span><span class="s">Error occurred: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">99</span><span class="p">)</span>

            <span class="n">m</span> <span class="o">=</span> <span class="s">&quot;++ Report file {!r} written with {} bytes&quot;</span><span class="o">.</span><span class="n">format</span>
            <span class="k">print</span><span class="p">(</span><span class="n">m</span><span class="p">(</span><span class="n">report_path</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">report_contents</span><span class="p">)))</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">report_contents</span> <span class="o">=</span> <span class="n">results_obj</span>
            <span class="n">report_path</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
            <span class="n">m</span> <span class="o">=</span> <span class="s">&quot;++ No rows returned for results: {}&quot;</span><span class="o">.</span><span class="n">format</span>
            <span class="k">print</span><span class="p">(</span><span class="n">m</span><span class="p">(</span><span class="n">results_obj</span><span class="p">))</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="n">report_contents</span> <span class="o">=</span> <span class="n">results_obj</span>
        <span class="n">report_path</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">create_report_file</span><span class="p">(</span><span class="n">contents</span><span class="o">=</span><span class="n">report_contents</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="o">.</span><span class="n">__dict__</span><span class="p">)</span>
        <span class="n">m</span> <span class="o">=</span> <span class="s">&quot;++ Report file {!r} written with {} bytes&quot;</span><span class="o">.</span><span class="n">format</span>
        <span class="k">print</span><span class="p">(</span><span class="n">m</span><span class="p">(</span><span class="n">report_path</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">report_contents</span><span class="p">)))</span>

    <span class="k">return</span> <span class="n">report_path</span><span class="p">,</span> <span class="n">report_contents</span></div>


<div class="viewcode-block" id="process_create_user_args"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.process_create_user_args">[docs]</a><span class="k">def</span> <span class="nf">process_create_user_args</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">handler</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Process command line args supplied by user for create user object</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    parser : :class:`argparse.ArgParse`</span>
<span class="sd">        * ArgParse object used to parse `all_args`</span>
<span class="sd">    handler : :class:`pytan.handler.Handler`</span>
<span class="sd">        * Instance of Handler created from command line args</span>
<span class="sd">    args : args object</span>
<span class="sd">        * args parsed from `parser`</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    response : :class:`taniumpy.object_types.base.BaseType`</span>
<span class="sd">        * response from :func:`pytan.handler.Handler.create_user`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">obj_grp_names</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Create User Options&#39;</span><span class="p">]</span>
    <span class="n">obj_grp_opts</span> <span class="o">=</span> <span class="n">get_grp_opts</span><span class="p">(</span><span class="n">parser</span><span class="o">=</span><span class="n">parser</span><span class="p">,</span> <span class="n">grp_names</span><span class="o">=</span><span class="n">obj_grp_names</span><span class="p">)</span>
    <span class="n">obj_grp_args</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">obj_grp_opts</span><span class="p">}</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">create_user</span><span class="p">(</span><span class="o">**</span><span class="n">obj_grp_args</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
        <span class="k">print</span> <span class="s">&quot;</span><span class="se">\n\n</span><span class="s">Error occurred: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">99</span><span class="p">)</span>

    <span class="n">roles_txt</span> <span class="o">=</span> <span class="s">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">x</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">roles</span><span class="p">])</span>

    <span class="n">m</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s">&quot;New user {0.name!r} created with ID {0.id!r}, roles: {1!r}, &quot;</span>
        <span class="s">&quot;group id: {0.group_id!r}&quot;</span>
    <span class="p">)</span><span class="o">.</span><span class="n">format</span>
    <span class="k">print</span><span class="p">(</span><span class="n">m</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">roles_txt</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">response</span></div>


<div class="viewcode-block" id="process_create_package_args"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.process_create_package_args">[docs]</a><span class="k">def</span> <span class="nf">process_create_package_args</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">handler</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Process command line args supplied by user for create package object</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    parser : :class:`argparse.ArgParse`</span>
<span class="sd">        * ArgParse object used to parse `all_args`</span>
<span class="sd">    handler : :class:`pytan.handler.Handler`</span>
<span class="sd">        * Instance of Handler created from command line args</span>
<span class="sd">    args : args object</span>
<span class="sd">        * args parsed from `parser`</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    response : :class:`taniumpy.object_types.base.BaseType`</span>
<span class="sd">        * response from :func:`pytan.handler.Handler.create_package`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">obj_grp_names</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Create Package Options&#39;</span><span class="p">]</span>
    <span class="n">obj_grp_opts</span> <span class="o">=</span> <span class="n">get_grp_opts</span><span class="p">(</span><span class="n">parser</span><span class="o">=</span><span class="n">parser</span><span class="p">,</span> <span class="n">grp_names</span><span class="o">=</span><span class="n">obj_grp_names</span><span class="p">)</span>
    <span class="n">obj_grp_args</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">obj_grp_opts</span><span class="p">}</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">create_package</span><span class="p">(</span><span class="o">**</span><span class="n">obj_grp_args</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
        <span class="k">print</span> <span class="s">&quot;</span><span class="se">\n\n</span><span class="s">Error occurred: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">99</span><span class="p">)</span>

    <span class="n">m</span> <span class="o">=</span> <span class="s">&quot;New package {0.name!r} created with ID {0.id!r}, command: {0.command!r}&quot;</span><span class="o">.</span><span class="n">format</span>
    <span class="k">print</span><span class="p">(</span><span class="n">m</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">response</span></div>


<div class="viewcode-block" id="process_create_sensor_args"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.process_create_sensor_args">[docs]</a><span class="k">def</span> <span class="nf">process_create_sensor_args</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">handler</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Process command line args supplied by user for create sensor object</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    parser : :class:`argparse.ArgParse`</span>
<span class="sd">        * ArgParse object used to parse `all_args`</span>
<span class="sd">    handler : :class:`pytan.handler.Handler`</span>
<span class="sd">        * Instance of Handler created from command line args</span>
<span class="sd">    args : args object</span>
<span class="sd">        * args parsed from `parser`</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    response : :class:`taniumpy.object_types.base.BaseType`</span>
<span class="sd">        * response from :func:`pytan.handler.Handler.create_sensor`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">obj_grp_names</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Create Sensor Options&#39;</span><span class="p">]</span>
    <span class="n">obj_grp_opts</span> <span class="o">=</span> <span class="n">get_grp_opts</span><span class="p">(</span><span class="n">parser</span><span class="o">=</span><span class="n">parser</span><span class="p">,</span> <span class="n">grp_names</span><span class="o">=</span><span class="n">obj_grp_names</span><span class="p">)</span>
    <span class="n">obj_grp_args</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">obj_grp_opts</span><span class="p">}</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">create_sensor</span><span class="p">(</span><span class="o">**</span><span class="n">obj_grp_args</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
        <span class="k">print</span> <span class="s">&quot;</span><span class="se">\n\n</span><span class="s">Error occurred: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">99</span><span class="p">)</span>

    <span class="n">m</span> <span class="o">=</span> <span class="s">&quot;New sensor {0.name!r} created with ID {0.id!r}&quot;</span><span class="o">.</span><span class="n">format</span>
    <span class="k">print</span><span class="p">(</span><span class="n">m</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">response</span></div>


<div class="viewcode-block" id="process_create_whitelisted_url_args"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.process_create_whitelisted_url_args">[docs]</a><span class="k">def</span> <span class="nf">process_create_whitelisted_url_args</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">handler</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Process command line args supplied by user for create group object</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    parser : :class:`argparse.ArgParse`</span>
<span class="sd">        * ArgParse object used to parse `all_args`</span>
<span class="sd">    handler : :class:`pytan.handler.Handler`</span>
<span class="sd">        * Instance of Handler created from command line args</span>
<span class="sd">    args : args object</span>
<span class="sd">        * args parsed from `parser`</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    response : :class:`taniumpy.object_types.base.BaseType`</span>
<span class="sd">        * response from :func:`pytan.handler.Handler.create_group`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">obj_grp_names</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Create Whitelisted URL Options&#39;</span><span class="p">]</span>
    <span class="n">obj_grp_opts</span> <span class="o">=</span> <span class="n">get_grp_opts</span><span class="p">(</span><span class="n">parser</span><span class="o">=</span><span class="n">parser</span><span class="p">,</span> <span class="n">grp_names</span><span class="o">=</span><span class="n">obj_grp_names</span><span class="p">)</span>
    <span class="n">obj_grp_args</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">obj_grp_opts</span><span class="p">}</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">create_whitelisted_url</span><span class="p">(</span><span class="o">**</span><span class="n">obj_grp_args</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
        <span class="k">print</span> <span class="s">&quot;</span><span class="se">\n\n</span><span class="s">Error occurred: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">99</span><span class="p">)</span>

    <span class="n">m</span> <span class="o">=</span> <span class="s">&quot;New Whitelisted URL {0.url_regex!r} created with ID {0.id!r}&quot;</span><span class="o">.</span><span class="n">format</span>
    <span class="k">print</span><span class="p">(</span><span class="n">m</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">response</span></div>


<div class="viewcode-block" id="process_create_group_args"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.process_create_group_args">[docs]</a><span class="k">def</span> <span class="nf">process_create_group_args</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">handler</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Process command line args supplied by user for create group object</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    parser : :class:`argparse.ArgParse`</span>
<span class="sd">        * ArgParse object used to parse `all_args`</span>
<span class="sd">    handler : :class:`pytan.handler.Handler`</span>
<span class="sd">        * Instance of Handler created from command line args</span>
<span class="sd">    args : args object</span>
<span class="sd">        * args parsed from `parser`</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    response : :class:`taniumpy.object_types.base.BaseType`</span>
<span class="sd">        * response from :func:`pytan.handler.Handler.create_group`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">obj_grp_names</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Create Group Options&#39;</span><span class="p">]</span>
    <span class="n">obj_grp_opts</span> <span class="o">=</span> <span class="n">get_grp_opts</span><span class="p">(</span><span class="n">parser</span><span class="o">=</span><span class="n">parser</span><span class="p">,</span> <span class="n">grp_names</span><span class="o">=</span><span class="n">obj_grp_names</span><span class="p">)</span>
    <span class="n">obj_grp_args</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">obj_grp_opts</span><span class="p">}</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">create_group</span><span class="p">(</span><span class="o">**</span><span class="n">obj_grp_args</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
        <span class="k">print</span> <span class="s">&quot;</span><span class="se">\n\n</span><span class="s">Error occurred: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">99</span><span class="p">)</span>

    <span class="n">m</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s">&quot;New group {0.name!r} created with ID {0.id!r}, filter text: {0.text!r}&quot;</span>
    <span class="p">)</span><span class="o">.</span><span class="n">format</span>
    <span class="k">print</span><span class="p">(</span><span class="n">m</span><span class="p">(</span><span class="n">response</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">response</span></div>


<div class="viewcode-block" id="process_print_server_info_args"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.process_print_server_info_args">[docs]</a><span class="k">def</span> <span class="nf">process_print_server_info_args</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">handler</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Process command line args supplied by user for printing server info</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    parser : :class:`argparse.ArgParse`</span>
<span class="sd">        * ArgParse object used to parse `all_args`</span>
<span class="sd">    handler : :class:`pytan.handler.Handler`</span>
<span class="sd">        * Instance of Handler created from command line args</span>
<span class="sd">    args : args object</span>
<span class="sd">        * args parsed from `parser`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">si</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">get_server_info</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">json</span><span class="p">:</span>
        <span class="k">print</span> <span class="n">pytan</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">jsonify</span><span class="p">(</span><span class="n">si</span><span class="p">[</span><span class="s">&#39;diags_flat&#39;</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span>
        <span class="n">print_obj</span><span class="p">(</span><span class="n">si</span><span class="p">[</span><span class="s">&#39;diags_flat&#39;</span><span class="p">])</span></div>


<div class="viewcode-block" id="process_print_sensors_args"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.process_print_sensors_args">[docs]</a><span class="k">def</span> <span class="nf">process_print_sensors_args</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">handler</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Process command line args supplied by user for printing sensors</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    parser : :class:`argparse.ArgParse`</span>
<span class="sd">        * ArgParse object used to parse `all_args`</span>
<span class="sd">    handler : :class:`pytan.handler.Handler`</span>
<span class="sd">        * Instance of Handler created from command line args</span>
<span class="sd">    args : args object</span>
<span class="sd">        * args parsed from `parser`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">all_sensors</span> <span class="o">=</span> <span class="n">process_get_object_args</span><span class="p">(</span>
        <span class="n">parser</span><span class="o">=</span><span class="n">parser</span><span class="p">,</span> <span class="n">handler</span><span class="o">=</span><span class="n">handler</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="s">&#39;sensor&#39;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">,</span> <span class="n">report</span><span class="o">=</span><span class="bp">False</span>
    <span class="p">)</span>

    <span class="n">real_sensors</span> <span class="o">=</span> <span class="n">filter_sourced_sensors</span><span class="p">(</span><span class="n">all_sensors</span><span class="p">)</span>
    <span class="k">print</span> <span class="s">&quot;Filtered out sourced sensors: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">real_sensors</span><span class="p">))</span>

    <span class="n">filtered_sensors</span> <span class="o">=</span> <span class="n">filter_sensors</span><span class="p">(</span>
        <span class="n">sensors</span><span class="o">=</span><span class="n">real_sensors</span><span class="p">,</span> <span class="n">filter_platforms</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">platforms</span><span class="p">,</span> <span class="n">filter_categories</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">categories</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">print</span> <span class="s">&quot;Filtered out sensors based on user filters: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">filtered_sensors</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">json</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">filtered_sensors</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">export_obj</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">export_format</span><span class="o">=</span><span class="s">&#39;json&#39;</span><span class="p">)</span>
            <span class="k">print</span> <span class="s">&quot;{}:</span><span class="se">\n</span><span class="s">{}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">filtered_sensors</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">category</span><span class="p">):</span>
        <span class="n">platforms</span> <span class="o">=</span> <span class="n">parse_sensor_platforms</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

        <span class="n">param_def</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">parameter_definition</span> <span class="ow">or</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">param_def</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">param_def</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">param_def</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">print</span> <span class="s">&quot;Error loading JSON parameter definition {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">param_def</span><span class="p">)</span>
                <span class="n">param_def</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">params</span> <span class="o">=</span> <span class="n">param_def</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;parameters&#39;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">params_only</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">params</span><span class="p">:</span>
            <span class="k">continue</span>

        <span class="n">desc</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">description</span> <span class="ow">or</span> <span class="s">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">print</span> <span class="p">(</span>
            <span class="s">&quot;</span><span class="se">\n</span><span class="s">  * Sensor Name: &#39;{0.name}&#39;, Platforms: {1}, Category: {0.category}&quot;</span>
        <span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">platforms</span><span class="p">))</span>
        <span class="k">print</span> <span class="s">&quot;  * Description: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">desc</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">hide_params</span><span class="p">:</span>
            <span class="k">continue</span>

        <span class="n">skip_attrs</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s">&#39;model&#39;</span><span class="p">,</span>
            <span class="s">&#39;parameterType&#39;</span><span class="p">,</span>
            <span class="s">&#39;snapInterval&#39;</span><span class="p">,</span>
            <span class="s">&#39;validationExpressions&#39;</span><span class="p">,</span>
            <span class="s">&#39;key&#39;</span><span class="p">,</span>
        <span class="p">]</span>

        <span class="k">for</span> <span class="n">param</span> <span class="ow">in</span> <span class="n">params</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">&quot;  * Parameter &#39;{}&#39;:&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">param</span><span class="p">[</span><span class="s">&#39;key&#39;</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">param</span><span class="o">.</span><span class="n">iteritems</span><span class="p">()):</span>
                <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">skip_attrs</span><span class="p">:</span>
                    <span class="k">continue</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">v</span><span class="p">:</span>
                    <span class="k">continue</span>
                <span class="k">print</span> <span class="s">&quot;    - &#39;{}&#39;: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span></div>


<div class="viewcode-block" id="process_get_object_args"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.process_get_object_args">[docs]</a><span class="k">def</span> <span class="nf">process_get_object_args</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">handler</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">report</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Process command line args supplied by user for get object</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    parser : :class:`argparse.ArgParse`</span>
<span class="sd">        * ArgParse object used to parse `all_args`</span>
<span class="sd">    handler : :class:`pytan.handler.Handler`</span>
<span class="sd">        * Instance of Handler created from command line args</span>
<span class="sd">    obj : str</span>
<span class="sd">        * Object type for get object</span>
<span class="sd">    args : args object</span>
<span class="sd">        * args parsed from `parser`</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    response : :class:`taniumpy.object_types.base.BaseType`</span>
<span class="sd">        * response from :func:`pytan.handler.Handler.get`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c"># put our query args into their own dict and remove them from all_args</span>
    <span class="n">obj_grp_names</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s">&#39;Get {} Options&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;_&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">capitalize</span><span class="p">())</span>
    <span class="p">]</span>
    <span class="n">obj_grp_opts</span> <span class="o">=</span> <span class="n">get_grp_opts</span><span class="p">(</span><span class="n">parser</span><span class="o">=</span><span class="n">parser</span><span class="p">,</span> <span class="n">grp_names</span><span class="o">=</span><span class="n">obj_grp_names</span><span class="p">)</span>
    <span class="n">obj_grp_args</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">obj_grp_opts</span><span class="p">}</span>
    <span class="n">get_all</span> <span class="o">=</span> <span class="n">obj_grp_args</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s">&#39;all&#39;</span><span class="p">)</span>
    <span class="n">o_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;objtype&#39;</span><span class="p">:</span> <span class="n">obj</span><span class="p">}</span>
    <span class="n">obj_grp_args</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">o_dict</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">get_all</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">get_all</span><span class="p">(</span><span class="o">**</span><span class="n">o_dict</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
            <span class="k">print</span> <span class="s">&quot;</span><span class="se">\n\n</span><span class="s">Error occurred: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="o">**</span><span class="n">obj_grp_args</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
            <span class="k">print</span> <span class="s">&quot;</span><span class="se">\n\n</span><span class="s">Error occurred: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>

    <span class="k">print</span> <span class="s">&quot;Found items: &quot;</span><span class="p">,</span> <span class="n">response</span>

    <span class="k">if</span> <span class="n">report</span><span class="p">:</span>
        <span class="n">report_file</span><span class="p">,</span> <span class="n">result</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">export_to_report_file</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">response</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="o">.</span><span class="n">__dict__</span><span class="p">)</span>

        <span class="n">m</span> <span class="o">=</span> <span class="s">&quot;Report file {!r} written with {} bytes&quot;</span><span class="o">.</span><span class="n">format</span>
        <span class="k">print</span><span class="p">(</span><span class="n">m</span><span class="p">(</span><span class="n">report_file</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">)))</span>

    <span class="k">return</span> <span class="n">response</span></div>


<div class="viewcode-block" id="process_ask_parsed_args"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.process_ask_parsed_args">[docs]</a><span class="k">def</span> <span class="nf">process_ask_parsed_args</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">handler</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Process command line args supplied by user for ask parsed</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    parser : :class:`argparse.ArgParse`</span>
<span class="sd">        * ArgParse object used to parse `all_args`</span>
<span class="sd">    handler : :class:`pytan.handler.Handler`</span>
<span class="sd">        * Instance of Handler created from command line args</span>
<span class="sd">    args : args object</span>
<span class="sd">        * args parsed from `parser`</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    response</span>
<span class="sd">        * response from :func:`pytan.handler.Handler.ask_parsed`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c"># put our query args into their own dict and remove them from all_args</span>
    <span class="n">obj_grp_names</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Parsed Question Options&#39;</span><span class="p">]</span>
    <span class="n">obj_grp_opts</span> <span class="o">=</span> <span class="n">get_grp_opts</span><span class="p">(</span><span class="n">parser</span><span class="o">=</span><span class="n">parser</span><span class="p">,</span> <span class="n">grp_names</span><span class="o">=</span><span class="n">obj_grp_names</span><span class="p">)</span>
    <span class="n">obj_grp_args</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">obj_grp_opts</span><span class="p">}</span>

    <span class="k">print</span> <span class="s">&quot;++ Asking parsed question:</span><span class="se">\n</span><span class="s">{}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pytan</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">jsonify</span><span class="p">(</span><span class="n">obj_grp_args</span><span class="p">))</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="n">qtype</span><span class="o">=</span><span class="s">&#39;parsed&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">obj_grp_args</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
        <span class="k">print</span> <span class="s">&quot;</span><span class="se">\n\n</span><span class="s">Error occurred: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">99</span><span class="p">)</span>

    <span class="n">question</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s">&#39;question_object&#39;</span><span class="p">]</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s">&#39;question_results&#39;</span><span class="p">]</span>
    <span class="k">print</span> <span class="s">&quot;++ Asked Question {0.query_text!r} ID: {0.id!r}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">question</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">results</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">report_file</span><span class="p">,</span> <span class="n">report_contents</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">export_to_report_file</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">results</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="o">.</span><span class="n">__dict__</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">&quot;</span><span class="se">\n\n</span><span class="s">Error occurred: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">99</span><span class="p">)</span>

        <span class="n">m</span> <span class="o">=</span> <span class="s">&quot;++ Report file {!r} written with {} bytes&quot;</span><span class="o">.</span><span class="n">format</span>
        <span class="k">print</span><span class="p">(</span><span class="n">m</span><span class="p">(</span><span class="n">report_file</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">report_contents</span><span class="p">)))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&quot;++ No action results returned, run get_results.py to get the results&quot;</span>

    <span class="k">return</span> <span class="n">response</span></div>


<div class="viewcode-block" id="process_ask_manual_args"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.process_ask_manual_args">[docs]</a><span class="k">def</span> <span class="nf">process_ask_manual_args</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">handler</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Process command line args supplied by user for ask manual</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    parser : :class:`argparse.ArgParse`</span>
<span class="sd">        * ArgParse object used to parse `all_args`</span>
<span class="sd">    handler : :class:`pytan.handler.Handler`</span>
<span class="sd">        * Instance of Handler created from command line args</span>
<span class="sd">    args : args object</span>
<span class="sd">        * args parsed from `parser`</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    response</span>
<span class="sd">        * response from :func:`pytan.handler.Handler.ask_manual`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c"># put our query args into their own dict and remove them from all_args</span>
    <span class="n">obj_grp_names</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Manual Question Options&#39;</span><span class="p">]</span>
    <span class="n">obj_grp_opts</span> <span class="o">=</span> <span class="n">get_grp_opts</span><span class="p">(</span><span class="n">parser</span><span class="o">=</span><span class="n">parser</span><span class="p">,</span> <span class="n">grp_names</span><span class="o">=</span><span class="n">obj_grp_names</span><span class="p">)</span>
    <span class="n">obj_grp_args</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">obj_grp_opts</span><span class="p">}</span>
    <span class="n">other_args</span> <span class="o">=</span> <span class="p">{</span><span class="n">a</span><span class="p">:</span> <span class="n">b</span> <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">args</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">iteritems</span><span class="p">()</span> <span class="k">if</span> <span class="n">a</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">obj_grp_args</span><span class="p">}</span>

    <span class="k">print</span> <span class="s">&quot;++ Asking manual question:</span><span class="se">\n</span><span class="s">{}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pytan</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">jsonify</span><span class="p">(</span><span class="n">obj_grp_args</span><span class="p">))</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="n">qtype</span><span class="o">=</span><span class="s">&#39;manual&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">obj_grp_args</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
        <span class="k">print</span> <span class="s">&quot;</span><span class="se">\n\n</span><span class="s">Error occurred: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">99</span><span class="p">)</span>

    <span class="n">question</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s">&#39;question_object&#39;</span><span class="p">]</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s">&#39;question_results&#39;</span><span class="p">]</span>
    <span class="k">print</span> <span class="s">&quot;++ Asked Question {0.query_text!r} ID: {0.id!r}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">question</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">results</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">report_file</span><span class="p">,</span> <span class="n">report_contents</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">export_to_report_file</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">results</span><span class="p">,</span> <span class="o">**</span><span class="n">other_args</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
            <span class="k">print</span> <span class="s">&quot;</span><span class="se">\n\n</span><span class="s">Error occurred: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">99</span><span class="p">)</span>

        <span class="n">m</span> <span class="o">=</span> <span class="s">&quot;++ Report file {!r} written with {} bytes&quot;</span><span class="o">.</span><span class="n">format</span>
        <span class="k">print</span><span class="p">(</span><span class="n">m</span><span class="p">(</span><span class="n">report_file</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">report_contents</span><span class="p">)))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&quot;++ No action results returned, run get_results.py to get the results&quot;</span>

    <span class="k">return</span> <span class="n">response</span></div>


<div class="viewcode-block" id="process_deploy_action_args"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.process_deploy_action_args">[docs]</a><span class="k">def</span> <span class="nf">process_deploy_action_args</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">handler</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Process command line args supplied by user for deploy action</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    parser : :class:`argparse.ArgParse`</span>
<span class="sd">        * ArgParse object used to parse `all_args`</span>
<span class="sd">    handler : :class:`pytan.handler.Handler`</span>
<span class="sd">        * Instance of Handler created from command line args</span>
<span class="sd">    args : args object</span>
<span class="sd">        * args parsed from `parser`</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    response</span>
<span class="sd">        * response from :func:`pytan.handler.Handler.deploy_action`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c"># put our query args into their own dict and remove them from all_args</span>
    <span class="n">obj_grp_names</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Deploy Action Options&#39;</span><span class="p">,</span> <span class="s">&#39;Report File Options&#39;</span><span class="p">]</span>
    <span class="n">obj_grp_opts</span> <span class="o">=</span> <span class="n">get_grp_opts</span><span class="p">(</span><span class="n">parser</span><span class="o">=</span><span class="n">parser</span><span class="p">,</span> <span class="n">grp_names</span><span class="o">=</span><span class="n">obj_grp_names</span><span class="p">)</span>
    <span class="n">obj_grp_args</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">obj_grp_opts</span><span class="p">}</span>

    <span class="k">print</span> <span class="s">&quot;++ Deploying action:</span><span class="se">\n</span><span class="s">{}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pytan</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">jsonify</span><span class="p">(</span><span class="n">obj_grp_args</span><span class="p">))</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">deploy_action</span><span class="p">(</span><span class="o">**</span><span class="n">obj_grp_args</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
        <span class="k">print</span> <span class="s">&quot;</span><span class="se">\n\n</span><span class="s">Error occurred: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">99</span><span class="p">)</span>

    <span class="n">action</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s">&#39;action_object&#39;</span><span class="p">]</span>
    <span class="k">print</span> <span class="s">&quot;++ Deployed Action {0.name!r} ID: {0.id!r}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>
    <span class="k">print</span> <span class="s">&quot;++ Command used in Action: {0.package_spec.command!r}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">response</span><span class="p">[</span><span class="s">&#39;action_result_map&#39;</span><span class="p">]:</span>
        <span class="k">print</span> <span class="s">&quot;++ Deploy action progress results:&quot;</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">response</span><span class="p">[</span><span class="s">&#39;action_result_map&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iteritems</span><span class="p">()):</span>
            <span class="k">print</span> <span class="s">&quot;Total {}: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">[</span><span class="s">&#39;total&#39;</span><span class="p">])</span>

    <span class="n">results</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s">&#39;action_results&#39;</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">results</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">obj_grp_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;report_file&#39;</span><span class="p">):</span>
            <span class="n">obj_grp_args</span><span class="p">[</span><span class="s">&#39;prefix&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">obj_grp_args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;prefix&#39;</span><span class="p">,</span> <span class="s">&#39;deploy_action_&#39;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">report_file</span><span class="p">,</span> <span class="n">report_contents</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">export_to_report_file</span><span class="p">(</span>
                <span class="n">obj</span><span class="o">=</span><span class="n">results</span><span class="p">,</span> <span class="o">**</span><span class="n">obj_grp_args</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">&quot;</span><span class="se">\n\n</span><span class="s">Error occurred: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">99</span><span class="p">)</span>

        <span class="n">response</span><span class="p">[</span><span class="s">&#39;report_file&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">report_file</span>
        <span class="n">response</span><span class="p">[</span><span class="s">&#39;report_contents&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">report_contents</span>

        <span class="n">m</span> <span class="o">=</span> <span class="s">&quot;++ Deploy results written to {!r} with {} bytes&quot;</span><span class="o">.</span><span class="n">format</span>
        <span class="k">print</span><span class="p">(</span><span class="n">m</span><span class="p">(</span><span class="n">report_file</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">report_contents</span><span class="p">)))</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span> <span class="p">(</span>
            <span class="s">&quot;++ No action results returned, run get_results.py to get the results&quot;</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">response</span></div>


<div class="viewcode-block" id="process_pytan_shell_args"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.process_pytan_shell_args">[docs]</a><span class="k">def</span> <span class="nf">process_pytan_shell_args</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">handler</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Process command line args supplied by user for a python shell</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    parser : :class:`argparse.ArgParse`</span>
<span class="sd">        * ArgParse object used to parse `all_args`</span>
<span class="sd">    handler : :class:`pytan.handler.Handler`</span>
<span class="sd">        * Instance of Handler created from command line args</span>
<span class="sd">    args : args object</span>
<span class="sd">        * args parsed from `parser`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">console</span> <span class="o">=</span> <span class="n">pytan</span><span class="o">.</span><span class="n">binsupport</span><span class="o">.</span><span class="n">HistoryConsole</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">console</span></div>


<div class="viewcode-block" id="process_ask_saved_args"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.process_ask_saved_args">[docs]</a><span class="k">def</span> <span class="nf">process_ask_saved_args</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">handler</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Process command line args supplied by user for ask saved</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    parser : :class:`argparse.ArgParse`</span>
<span class="sd">        * ArgParse object used to parse `all_args`</span>
<span class="sd">    handler : :class:`pytan.handler.Handler`</span>
<span class="sd">        * Instance of Handler created from command line args</span>
<span class="sd">    args : args object</span>
<span class="sd">        * args parsed from `parser`</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    response</span>
<span class="sd">        * response from :func:`pytan.handler.Handler.ask_saved`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">id_arg</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">id</span>
    <span class="n">name_arg</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">name</span>
    <span class="n">refresh_arg</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">__dict__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;refresh_data&#39;</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>

    <span class="n">q_args</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">if</span> <span class="n">id_arg</span><span class="p">:</span>
        <span class="n">q_args</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">id_arg</span>
    <span class="k">elif</span> <span class="n">name_arg</span><span class="p">:</span>
        <span class="n">q_args</span><span class="p">[</span><span class="s">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">name_arg</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s">&quot;Must supply --id or --name&quot;</span><span class="p">)</span>

    <span class="n">q_args</span><span class="p">[</span><span class="s">&#39;refresh_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">refresh_arg</span>

    <span class="k">print</span> <span class="s">&quot;++ Asking saved question: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pytan</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">jsonify</span><span class="p">(</span><span class="n">q_args</span><span class="p">))</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="n">qtype</span><span class="o">=</span><span class="s">&#39;saved&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">q_args</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
        <span class="k">print</span> <span class="s">&quot;</span><span class="se">\n\n</span><span class="s">Error occurred: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">99</span><span class="p">)</span>

    <span class="n">question</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s">&#39;question_object&#39;</span><span class="p">]</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s">&#39;question_results&#39;</span><span class="p">]</span>
    <span class="k">print</span> <span class="s">&quot;++ Saved Question {0.query_text!r} ID: {0.id!r}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">question</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">report_file</span><span class="p">,</span> <span class="n">report_contents</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">export_to_report_file</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">results</span><span class="p">,</span> <span class="o">**</span><span class="n">args</span><span class="o">.</span><span class="n">__dict__</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
        <span class="k">print</span> <span class="s">&quot;</span><span class="se">\n\n</span><span class="s">Error occurred: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">99</span><span class="p">)</span>

    <span class="n">response</span><span class="p">[</span><span class="s">&#39;report_file&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">report_file</span>
    <span class="n">response</span><span class="p">[</span><span class="s">&#39;report_contents&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">report_contents</span>

    <span class="n">m</span> <span class="o">=</span> <span class="s">&quot;Report file {!r} written with {} bytes&quot;</span><span class="o">.</span><span class="n">format</span>
    <span class="k">print</span><span class="p">(</span><span class="n">m</span><span class="p">(</span><span class="n">report_file</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">report_contents</span><span class="p">)))</span>
    <span class="k">return</span> <span class="n">response</span></div>


<div class="viewcode-block" id="process_handler_args"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.process_handler_args">[docs]</a><span class="k">def</span> <span class="nf">process_handler_args</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Process command line args supplied by user for handler</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    parser : :class:`argparse.ArgParse`</span>
<span class="sd">        * ArgParse object used to parse `all_args`</span>
<span class="sd">    args : args</span>
<span class="sd">        * args parsed from `parser`</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    h : :class:`pytan.handler.Handler`</span>
<span class="sd">        * Handler object</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">input_prompts</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
    <span class="n">handler_grp_names</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Handler Authentication&#39;</span><span class="p">,</span> <span class="s">&#39;Handler Options&#39;</span><span class="p">]</span>
    <span class="n">handler_opts</span> <span class="o">=</span> <span class="n">get_grp_opts</span><span class="p">(</span><span class="n">parser</span><span class="o">=</span><span class="n">parser</span><span class="p">,</span> <span class="n">grp_names</span><span class="o">=</span><span class="n">handler_grp_names</span><span class="p">)</span>
    <span class="n">handler_args</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">handler_opts</span><span class="p">}</span>
    <span class="c"># print handler_args</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">h</span> <span class="o">=</span> <span class="n">pytan</span><span class="o">.</span><span class="n">Handler</span><span class="p">(</span><span class="o">**</span><span class="n">handler_args</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
        <span class="k">print</span> <span class="s">&quot;</span><span class="se">\n\n</span><span class="s">Error occurred: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">99</span><span class="p">)</span>

    <span class="k">print</span> <span class="nb">str</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">h</span></div>


<div class="viewcode-block" id="get_grp_opts"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.get_grp_opts">[docs]</a><span class="k">def</span> <span class="nf">get_grp_opts</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="n">grp_names</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Used to get arguments in `parser` that match argument group names in `grp_names`</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    parser : :class:`argparse.ArgParse`</span>
<span class="sd">        * ArgParse object</span>
<span class="sd">    grp_names : list of str</span>
<span class="sd">        * list of str of argument group names to get arguments for</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    grp_opts : list of str</span>
<span class="sd">        * list of arguments gathered from argument group names in `grp_names`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">action_grps</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">parser</span><span class="o">.</span><span class="n">_action_groups</span> <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">title</span> <span class="ow">in</span> <span class="n">grp_names</span><span class="p">]</span>
    <span class="n">grp_opts</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span><span class="o">.</span><span class="n">dest</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">action_grps</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">b</span><span class="o">.</span><span class="n">_group_actions</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">grp_opts</span></div>


<div class="viewcode-block" id="version_check"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.version_check">[docs]</a><span class="k">def</span> <span class="nf">version_check</span><span class="p">(</span><span class="n">reqver</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Allows scripts using :mod:`pytan` to validate the version of the script</span>
<span class="sd">    aginst the version of :mod:`pytan`</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    reqver : str</span>
<span class="sd">        * string containing version number to check against :exc:`Exception`</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    VersionMismatchError : :exc:`Exception`</span>
<span class="sd">        * if :data:`pytan.__version__` is not greater or equal to `reqver`</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">log_tpl</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s">&quot;{}: {} version {}, required {}&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">__version__</span> <span class="o">&gt;=</span> <span class="n">reqver</span><span class="p">:</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;Script and API Version mismatch!&quot;</span>
        <span class="k">raise</span> <span class="n">pytan</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">VersionMismatchError</span><span class="p">(</span><span class="n">log_tpl</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">__version__</span><span class="p">,</span> <span class="n">reqver</span><span class="p">))</span>

    <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;Script and API Version match&quot;</span>
    <span class="n">mylog</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="n">log_tpl</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">__version__</span><span class="p">,</span> <span class="n">reqver</span><span class="p">))</span>
    <span class="k">return</span> <span class="bp">True</span></div>


<div class="viewcode-block" id="debug_list"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.debug_list">[docs]</a><span class="k">def</span> <span class="nf">debug_list</span><span class="p">(</span><span class="n">debuglist</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Utility function to print the variables for a list of objects&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">debuglist</span><span class="p">:</span>
        <span class="n">debug_obj</span><span class="p">(</span><span class="n">x</span><span class="p">)</span></div>


<div class="viewcode-block" id="debug_obj"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.debug_obj">[docs]</a><span class="k">def</span> <span class="nf">debug_obj</span><span class="p">(</span><span class="n">debugobj</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Utility function to print the variables for an object&quot;&quot;&quot;</span>
    <span class="n">pprint</span><span class="o">.</span><span class="n">pprint</span><span class="p">(</span><span class="nb">vars</span><span class="p">(</span><span class="n">debugobj</span><span class="p">))</span></div>


<div class="viewcode-block" id="introspect"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.introspect">[docs]</a><span class="k">def</span> <span class="nf">introspect</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">depth</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Utility function to dump all info about an object&quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">types</span>
    <span class="k">print</span> <span class="s">&quot;</span><span class="si">%s%s</span><span class="s">: </span><span class="si">%s</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">depth</span> <span class="o">*</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="p">[</span>
        <span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s">&quot;__&quot;</span><span class="p">])</span>
    <span class="n">depth</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">x</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s">&quot;__&quot;</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">subobj</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
        <span class="k">print</span> <span class="s">&quot;</span><span class="si">%s%s</span><span class="s">: </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">depth</span> <span class="o">*</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">subobj</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">subobj</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">InstanceType</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">dir</span><span class="p">(</span><span class="n">subobj</span><span class="p">)</span> <span class="o">!=</span> <span class="p">[]:</span>
            <span class="n">introspect</span><span class="p">(</span><span class="n">subobj</span><span class="p">,</span> <span class="n">depth</span><span class="o">=</span><span class="n">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">print</span></div>


<div class="viewcode-block" id="input_prompts"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.input_prompts">[docs]</a><span class="k">def</span> <span class="nf">input_prompts</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Utility function to prompt for username, password, and host if empty&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span><span class="o">.</span><span class="n">username</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">args</span><span class="o">.</span><span class="n">session_id</span><span class="p">:</span>
        <span class="n">username</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">&#39;Tanium Username: &#39;</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">username</span> <span class="o">=</span> <span class="n">username</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span><span class="o">.</span><span class="n">password</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">args</span><span class="o">.</span><span class="n">session_id</span><span class="p">:</span>
        <span class="n">password</span> <span class="o">=</span> <span class="n">getpass</span><span class="o">.</span><span class="n">getpass</span><span class="p">(</span><span class="s">&#39;Tanium Password: &#39;</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">password</span> <span class="o">=</span> <span class="n">password</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span><span class="o">.</span><span class="n">host</span><span class="p">:</span>
        <span class="n">host</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">&#39;Tanium Host: &#39;</span><span class="p">)</span>
        <span class="n">args</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="n">host</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">args</span></div>


<div class="viewcode-block" id="print_obj"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.print_obj">[docs]</a><span class="k">def</span> <span class="nf">print_obj</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Pretty print a dictionary&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">pytan</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">is_dict</span><span class="p">(</span><span class="n">v</span><span class="p">):</span>
            <span class="k">print</span> <span class="s">&quot;{}{}: </span><span class="se">\n</span><span class="s">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s">&#39;  &#39;</span> <span class="o">*</span> <span class="n">indent</span><span class="p">,</span> <span class="n">k</span><span class="p">),</span>
            <span class="n">print_obj</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">indent</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">pytan</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">is_list</span><span class="p">(</span><span class="n">v</span><span class="p">):</span>
            <span class="k">print</span> <span class="s">&quot;{}{}: &quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s">&#39;  &#39;</span> <span class="o">*</span> <span class="n">indent</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
                <span class="n">print_obj</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">indent</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">&quot;{}{}: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s">&#39;  &#39;</span> <span class="o">*</span> <span class="n">indent</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span></div>


<div class="viewcode-block" id="filter_filename"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.filter_filename">[docs]</a><span class="k">def</span> <span class="nf">filter_filename</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Utility to filter a string into a valid filename&quot;&quot;&quot;</span>
    <span class="n">valid_chars</span> <span class="o">=</span> <span class="s">&quot;-_.() </span><span class="si">%s%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">string</span><span class="o">.</span><span class="n">ascii_letters</span><span class="p">,</span> <span class="n">string</span><span class="o">.</span><span class="n">digits</span><span class="p">)</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">filename</span> <span class="k">if</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">valid_chars</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">filename</span></div>


<div class="viewcode-block" id="remove_file_log"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.remove_file_log">[docs]</a><span class="k">def</span> <span class="nf">remove_file_log</span><span class="p">(</span><span class="n">logfile</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Utility to remove a log file from python&#39;s logging module&quot;&quot;&quot;</span>
    <span class="n">basename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">logfile</span><span class="p">)</span>
    <span class="n">root_logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">root_logger</span><span class="o">.</span><span class="n">handlers</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">basename</span><span class="p">:</span>
                <span class="n">mylog</span><span class="o">.</span><span class="n">info</span><span class="p">((</span><span class="s">&#39;Stopped file logging to: {}&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">logfile</span><span class="p">))</span>
                <span class="n">root_logger</span><span class="o">.</span><span class="n">removeHandler</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">pass</span></div>


<div class="viewcode-block" id="add_file_log"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.add_file_log">[docs]</a><span class="k">def</span> <span class="nf">add_file_log</span><span class="p">(</span><span class="n">logfile</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Utility to add a log file from python&#39;s logging module&quot;&quot;&quot;</span>
    <span class="n">remove_file_log</span><span class="p">(</span><span class="n">logfile</span><span class="p">)</span>
    <span class="n">root_logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">()</span>
    <span class="n">basename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">logfile</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">file_handler</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(</span><span class="n">logfile</span><span class="p">)</span>
        <span class="n">file_handler</span><span class="o">.</span><span class="n">set_name</span><span class="p">(</span><span class="n">basename</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">debug</span><span class="p">:</span>
            <span class="n">file_handler</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>
            <span class="n">file_handler</span><span class="o">.</span><span class="n">setFormatter</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">Formatter</span><span class="p">(</span><span class="n">pytan</span><span class="o">.</span><span class="n">constants</span><span class="o">.</span><span class="n">DEBUG_FORMAT</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">file_handler</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
            <span class="n">file_handler</span><span class="o">.</span><span class="n">setFormatter</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">Formatter</span><span class="p">(</span><span class="n">pytan</span><span class="o">.</span><span class="n">constants</span><span class="o">.</span><span class="n">INFO_FORMAT</span><span class="p">))</span>
        <span class="n">root_logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">file_handler</span><span class="p">)</span>
        <span class="n">mylog</span><span class="o">.</span><span class="n">info</span><span class="p">((</span><span class="s">&#39;Added file logging to: {}&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">logfile</span><span class="p">))</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">mylog</span><span class="o">.</span><span class="n">error</span><span class="p">((</span>
            <span class="s">&#39;Problem setting up file logging to {}: {}&#39;</span>
        <span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">logfile</span><span class="p">,</span> <span class="n">e</span><span class="p">))</span></div>


<div class="viewcode-block" id="parse_sensor_platforms"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.parse_sensor_platforms">[docs]</a><span class="k">def</span> <span class="nf">parse_sensor_platforms</span><span class="p">(</span><span class="n">sensor</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Utility to create a list of platforms for a given sensor&quot;&quot;&quot;</span>
    <span class="n">platforms</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">q</span><span class="o">.</span><span class="n">platform</span> <span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="n">sensor</span><span class="o">.</span><span class="n">queries</span>
        <span class="k">if</span> <span class="n">q</span><span class="o">.</span><span class="n">script</span>
        <span class="ow">and</span> <span class="s">&#39;THIS IS A STUB&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">q</span><span class="o">.</span><span class="n">script</span>
        <span class="ow">and</span> <span class="s">&#39;echo Windows Only&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">q</span><span class="o">.</span><span class="n">script</span>
        <span class="ow">and</span> <span class="s">&#39;Not a Windows Sensor&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">q</span><span class="o">.</span><span class="n">script</span>
    <span class="p">]</span>
    <span class="k">return</span> <span class="n">platforms</span></div>


<div class="viewcode-block" id="filter_sourced_sensors"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.filter_sourced_sensors">[docs]</a><span class="k">def</span> <span class="nf">filter_sourced_sensors</span><span class="p">(</span><span class="n">sensors</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Utility to filter out all sensors that have a source_id specified (i.e. they are temp sensors created by the API)&quot;&quot;&quot;</span>
    <span class="n">sensors</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">sensors</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">x</span><span class="o">.</span><span class="n">source_id</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">sensors</span></div>


<div class="viewcode-block" id="filter_sensors"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.filter_sensors">[docs]</a><span class="k">def</span> <span class="nf">filter_sensors</span><span class="p">(</span><span class="n">sensors</span><span class="p">,</span> <span class="n">filter_platforms</span><span class="o">=</span><span class="p">[],</span> <span class="n">filter_categories</span><span class="o">=</span><span class="p">[]):</span>
    <span class="sd">&quot;&quot;&quot;Utility to filter a list of sensors for specific platforms and/or categories&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">filter_platforms</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">filter_categories</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">sensors</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">category</span><span class="p">)</span>

    <span class="n">new_sensors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">sensors</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">category</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">filter_categories</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">category</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="n">y</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">filter_categories</span><span class="p">]:</span>
                <span class="k">continue</span>

        <span class="n">platforms</span> <span class="o">=</span> <span class="n">parse_sensor_platforms</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">platforms</span><span class="p">:</span>
            <span class="n">match</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">platforms</span>
                <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="n">y</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">filter_platforms</span><span class="p">]</span>
            <span class="p">]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">match</span><span class="p">:</span>
                <span class="k">continue</span>

        <span class="n">new_sensors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">new_sensors</span></div>


<div class="viewcode-block" id="get_all_headers"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.get_all_headers">[docs]</a><span class="k">def</span> <span class="nf">get_all_headers</span><span class="p">(</span><span class="n">rows_list</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Utility to get all the keys for a list of dicts&quot;&quot;&quot;</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">row_dict</span> <span class="ow">in</span> <span class="n">rows_list</span><span class="p">:</span>
        <span class="p">[</span><span class="n">headers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">h</span><span class="p">)</span> <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">row_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">if</span> <span class="n">h</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">headers</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">headers</span></div>


<div class="viewcode-block" id="csvdictwriter"><a class="viewcode-back" href="../../pytan.html#pytan.binsupport.csvdictwriter">[docs]</a><span class="k">def</span> <span class="nf">csvdictwriter</span><span class="p">(</span><span class="n">rows_list</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;returns the rows_list (list of dicts) as a CSV string&quot;&quot;&quot;</span>
    <span class="n">csv_io</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">()</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;headers&#39;</span><span class="p">,</span> <span class="p">[])</span> <span class="ow">or</span> <span class="n">get_all_headers</span><span class="p">(</span><span class="n">rows_list</span><span class="p">)</span>
    <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictWriter</span><span class="p">(</span>
        <span class="n">csv_io</span><span class="p">,</span> <span class="n">fieldnames</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">quoting</span><span class="o">=</span><span class="n">csv</span><span class="o">.</span><span class="n">QUOTE_NONNUMERIC</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span><span class="nb">dict</span><span class="p">((</span><span class="n">h</span><span class="p">,</span> <span class="n">h</span><span class="p">)</span> <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">headers</span><span class="p">))</span>
    <span class="n">writer</span><span class="o">.</span><span class="n">writerows</span><span class="p">(</span><span class="n">rows_list</span><span class="p">)</span>
    <span class="n">csv_str</span> <span class="o">=</span> <span class="n">csv_io</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">csv_str</span></div>
</pre></div>

          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Tanium.
      Last updated on Sep 09, 2015.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'2.1.3',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>