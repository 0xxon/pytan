

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>test_pytan_unit &mdash; PyTan v2.1.0 2.1.0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="PyTan v2.1.0 2.1.0 documentation" href="../index.html"/>
        <link rel="up" title="Module code" href="index.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="../index.html" class="fa fa-home"> PyTan v2.1.0</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">1. PyTan Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../introduction.html#description">1.1. Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction.html#why-it-was-created">1.2. Why it was created</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction.html#python-versions-supported">1.3. Python Versions Supported</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction.html#tanium-platform-versions-supported">1.4. Tanium Platform Versions Supported</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction.html#installation">1.5. Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction.html#usage">1.6. Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction.html#directory-layout">1.7. Directory Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction.html#other-references">1.8. Other References</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../pytan.html">2. PyTan Package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../pytan.html#module-pytan.handler">2.1. pytan.handler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pytan.html#module-pytan.sessions">2.2. pytan.sessions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pytan.html#module-pytan.pollers">2.3. pytan.pollers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pytan.html#module-pytan.constants">2.4. pytan.constants</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pytan.html#module-pytan.utils">2.5. pytan.utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pytan.html#module-pytan.binsupport">2.6. pytan.binsupport</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pytan.html#module-pytan.exceptions">2.7. pytan.exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pytan.html#module-pytan.xml_clean">2.8. pytan.xml_clean</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../pytan_tests.html">3. PyTan Tests</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../pytan_tests.html#module-test_pytan_valid_server_tests">3.1. Valid Server Functional Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pytan_tests.html#module-test_pytan_invalid_server_tests">3.2. Invalid Server Functional Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pytan_tests.html#module-test_pytan_unit">3.3. Unit Tests</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../taniumpy/taniumpy.html">4. TaniumPy Package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../taniumpy/taniumpy.html#subpackages">4.1. Subpackages</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../other_packages.html">5. Other Packages</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../other_packages.html#requests-package">5.1. requests Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other_packages.html#threaded-http-package">5.2. threaded_http Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other_packages.html#xmltodict-package">5.3. xmltodict Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../other_packages.html#ddt-package">5.4. ddt Package</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../examples/pytan_examples.html">6. PyTan API Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../examples/pytan_api_basic_handler_example.html">6.1. PyTan API Basic Handler Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/valid_create_object.html">6.2. PyTan API Valid Create Object Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/valid_create_object_from_json.html">6.3. PyTan API Valid Create Object From JSON Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/valid_deploy_action.html">6.4. PyTan API Valid Deploy Action Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/valid_export_basetype.html">6.5. PyTan API Valid Export Basetype Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/valid_export_resultset.html">6.6. PyTan API Valid Export ResultSet Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/valid_get_object.html">6.7. PyTan API Valid Get Object Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/valid_questions.html">6.8. PyTan API Valid Questions Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/valid_saved_questions.html">6.9. PyTan API Valid Saved Questions Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/invalid_create_object.html">6.10. PyTan API Invalid Create Object Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/invalid_create_object_from_json.html">6.11. PyTan API Invalid Create Object From JSON Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/invalid_deploy_action.html">6.12. PyTan API Invalid Deploy Action Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/invalid_export_basetype.html">6.13. PyTan API Invalid Export Basetype Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/invalid_export_resultset.html">6.14. PyTan API Invalid Export ResultSet Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/invalid_get_object.html">6.15. PyTan API Invalid Get Object Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples/invalid_questions.html">6.16. PyTan API Invalid Questions Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../soap_examples_index.html">7. SOAP API Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../soap_examples/6.5.314.4301/soap_examples_6.5.314.4301.html">7.1. SOAP API Examples for Platform Version 6.5.314.4301</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">PyTan v2.1.0</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Module code</a> &raquo;</li>
      
    <li>test_pytan_unit</li>
      <li class="wy-breadcrumbs-aside">
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <h1>Source code for test_pytan_unit</h1><div class="highlight"><pre>
<span class="c">#!/usr/bin/env python -ttB</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">This contains unit tests for pytan.</span>

<span class="sd">These unit tests do not require a connection to a Tanium server in order to run.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="c"># disable python from creating .pyc files everywhere</span>
<span class="n">sys</span><span class="o">.</span><span class="n">dont_write_bytecode</span> <span class="o">=</span> <span class="bp">True</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">unittest</span>

<span class="n">my_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">my_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">my_file</span><span class="p">)</span>
<span class="n">root_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">my_dir</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">pardir</span><span class="p">)</span>
<span class="n">root_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">root_dir</span><span class="p">)</span>
<span class="n">lib_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root_dir</span><span class="p">,</span> <span class="s">&#39;lib&#39;</span><span class="p">)</span>
<span class="n">path_adds</span> <span class="o">=</span> <span class="p">[</span><span class="n">my_dir</span><span class="p">,</span> <span class="n">lib_dir</span><span class="p">]</span>

<span class="k">for</span> <span class="n">aa</span> <span class="ow">in</span> <span class="n">path_adds</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">aa</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="p">:</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">aa</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">pytan</span>
<span class="kn">import</span> <span class="nn">taniumpy</span>
<span class="kn">from</span> <span class="nn">pytan</span> <span class="kn">import</span> <span class="n">utils</span>
<span class="kn">from</span> <span class="nn">pytan</span> <span class="kn">import</span> <span class="n">constants</span>
<span class="kn">from</span> <span class="nn">pytan.exceptions</span> <span class="kn">import</span> <span class="n">HumanParserError</span>
<span class="kn">from</span> <span class="nn">pytan.exceptions</span> <span class="kn">import</span> <span class="n">DefinitionParserError</span>
<span class="kn">from</span> <span class="nn">pytan.exceptions</span> <span class="kn">import</span> <span class="n">HandlerError</span>

<span class="c"># get our server connection info</span>
<span class="kn">from</span> <span class="nn">API_INFO</span> <span class="kn">import</span> <span class="n">SERVER_INFO</span>

<span class="c"># set logging for all logs in pytan to same level as loglevel</span>
<span class="n">utils</span><span class="o">.</span><span class="n">setup_console_logging</span><span class="p">()</span>
<span class="n">utils</span><span class="o">.</span><span class="n">set_log_levels</span><span class="p">(</span><span class="n">SERVER_INFO</span><span class="p">[</span><span class="s">&quot;loglevel&quot;</span><span class="p">])</span>


<div class="viewcode-block" id="TestDehumanizeSensorUtils"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeSensorUtils">[docs]</a><span class="k">class</span> <span class="nc">TestDehumanizeSensorUtils</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<div class="viewcode-block" id="TestDehumanizeSensorUtils.test_single_str"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeSensorUtils.test_single_str">[docs]</a>    <span class="k">def</span> <span class="nf">test_single_str</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">sensors</span> <span class="o">=</span> <span class="s">&#39;Sensor1&#39;</span>
        <span class="n">sensor_defs</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">dehumanize_sensors</span><span class="p">(</span><span class="n">sensors</span><span class="p">)</span>
        <span class="n">exp</span> <span class="o">=</span> <span class="p">[{</span><span class="s">&#39;filter&#39;</span><span class="p">:</span> <span class="p">{},</span> <span class="s">&#39;params&#39;</span><span class="p">:</span> <span class="p">{},</span> <span class="s">&#39;options&#39;</span><span class="p">:</span> <span class="p">{},</span> <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Sensor1&#39;</span><span class="p">}]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">sensor_defs</span><span class="p">,</span> <span class="n">exp</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestDehumanizeSensorUtils.test_single_str_with_filter"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeSensorUtils.test_single_str_with_filter">[docs]</a>    <span class="k">def</span> <span class="nf">test_single_str_with_filter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">sensors</span> <span class="o">=</span> <span class="s">&#39;Sensor1, that is:.*&#39;</span>
        <span class="n">sensor_defs</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">dehumanize_sensors</span><span class="p">(</span><span class="n">sensors</span><span class="p">)</span>
        <span class="n">exp</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s">&#39;filter&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s">&#39;operator&#39;</span><span class="p">:</span> <span class="s">&#39;RegexMatch&#39;</span><span class="p">,</span>
                    <span class="s">&#39;not_flag&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="s">&#39;.*&#39;</span>
                <span class="p">},</span>
                <span class="s">&#39;params&#39;</span><span class="p">:</span> <span class="p">{},</span>
                <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Sensor1&#39;</span><span class="p">,</span>
                <span class="s">&#39;options&#39;</span><span class="p">:</span> <span class="p">{}</span>
            <span class="p">}</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">sensor_defs</span><span class="p">,</span> <span class="n">exp</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestDehumanizeSensorUtils.test_single_str_complex1"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeSensorUtils.test_single_str_complex1">[docs]</a>    <span class="k">def</span> <span class="nf">test_single_str_complex1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">sensors</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s">&#39;Sensor1, that is:.*, opt:value_type:string, opt:ignore_case, &#39;</span>
            <span class="s">&#39;opt:max_data_age:3600, opt:match_any_value&#39;</span>
        <span class="p">)</span>
        <span class="n">sensor_defs</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">dehumanize_sensors</span><span class="p">(</span><span class="n">sensors</span><span class="p">)</span>
        <span class="n">exp</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s">&#39;filter&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s">&#39;operator&#39;</span><span class="p">:</span> <span class="s">&#39;RegexMatch&#39;</span><span class="p">,</span>
                    <span class="s">&#39;not_flag&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="s">&#39;.*&#39;</span>
                <span class="p">},</span>
                <span class="s">&#39;params&#39;</span><span class="p">:</span> <span class="p">{},</span>
                <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Sensor1&#39;</span><span class="p">,</span>
                <span class="s">&#39;options&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s">&#39;all_values_flag&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="s">&#39;ignore_case_flag&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="s">&#39;max_age_seconds&#39;</span><span class="p">:</span> <span class="s">&#39;3600&#39;</span><span class="p">,</span>
                    <span class="s">&#39;value_type&#39;</span><span class="p">:</span> <span class="s">&#39;string&#39;</span><span class="p">,</span>
                    <span class="s">&#39;all_times_flag&#39;</span><span class="p">:</span> <span class="mi">0</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">sensor_defs</span><span class="p">,</span> <span class="n">exp</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestDehumanizeSensorUtils.test_single_str_complex2"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeSensorUtils.test_single_str_complex2">[docs]</a>    <span class="k">def</span> <span class="nf">test_single_str_complex2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">sensors</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s">&#39;Sensor1{k1=v1,k2=v2}, that is:.*, opt:value_type:string, &#39;</span>
            <span class="s">&#39;opt:ignore_case, opt:max_data_age:3600, opt:match_any_value&#39;</span>
        <span class="p">)</span>
        <span class="n">sensor_defs</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">dehumanize_sensors</span><span class="p">(</span><span class="n">sensors</span><span class="p">)</span>
        <span class="n">exp</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s">&#39;filter&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s">&#39;not_flag&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="s">&#39;operator&#39;</span><span class="p">:</span> <span class="s">&#39;RegexMatch&#39;</span><span class="p">,</span>
                    <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="s">&#39;.*&#39;</span>
                <span class="p">},</span>
                <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Sensor1&#39;</span><span class="p">,</span>
                <span class="s">&#39;options&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s">&#39;all_times_flag&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="s">&#39;all_values_flag&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="s">&#39;ignore_case_flag&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="s">&#39;max_age_seconds&#39;</span><span class="p">:</span> <span class="s">&#39;3600&#39;</span><span class="p">,</span>
                    <span class="s">&#39;value_type&#39;</span><span class="p">:</span> <span class="s">&#39;string&#39;</span>
                <span class="p">},</span>
                <span class="s">&#39;params&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;k1&#39;</span><span class="p">:</span> <span class="s">&#39;v1&#39;</span><span class="p">,</span> <span class="s">&#39;k2&#39;</span><span class="p">:</span> <span class="s">&#39;v2&#39;</span><span class="p">}</span>
            <span class="p">}</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">sensor_defs</span><span class="p">,</span> <span class="n">exp</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestDehumanizeSensorUtils.test_multi_list_complex"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeSensorUtils.test_multi_list_complex">[docs]</a>    <span class="k">def</span> <span class="nf">test_multi_list_complex</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">sensors</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s">&#39;Computer Name&#39;</span><span class="p">,</span>
            <span class="s">&#39;id:1&#39;</span><span class="p">,</span>
            <span class="s">&#39;Operating System, that contains:Windows&#39;</span><span class="p">,</span>
            <span class="p">(</span><span class="s">&#39;Sensor1{k1=v1,k2=v2}, that is:.*, opt:value_type:string, &#39;</span>
             <span class="s">&#39;opt:ignore_case, opt:max_data_age:3600, opt:match_any_value&#39;</span><span class="p">),</span>
        <span class="p">]</span>
        <span class="n">sensor_defs</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">dehumanize_sensors</span><span class="p">(</span><span class="n">sensors</span><span class="p">)</span>
        <span class="n">exp</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s">&#39;filter&#39;</span><span class="p">:</span> <span class="p">{},</span>
                <span class="s">&#39;params&#39;</span><span class="p">:</span> <span class="p">{},</span>
                <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Computer Name&#39;</span><span class="p">,</span>
                <span class="s">&#39;options&#39;</span><span class="p">:</span> <span class="p">{}</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="s">&#39;filter&#39;</span><span class="p">:</span> <span class="p">{},</span>
                <span class="s">&#39;params&#39;</span><span class="p">:</span> <span class="p">{},</span>
                <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="s">&#39;1&#39;</span><span class="p">,</span>
                <span class="s">&#39;options&#39;</span><span class="p">:</span> <span class="p">{}</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="s">&#39;filter&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s">&#39;operator&#39;</span><span class="p">:</span> <span class="s">&#39;RegexMatch&#39;</span><span class="p">,</span>
                    <span class="s">&#39;not_flag&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="s">&#39;.*Windows.*&#39;</span>
                <span class="p">},</span>
                <span class="s">&#39;params&#39;</span><span class="p">:</span> <span class="p">{},</span>
                <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Operating System&#39;</span><span class="p">,</span>
                <span class="s">&#39;options&#39;</span><span class="p">:</span> <span class="p">{}</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="s">&#39;filter&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s">&#39;operator&#39;</span><span class="p">:</span> <span class="s">&#39;RegexMatch&#39;</span><span class="p">,</span>
                    <span class="s">&#39;not_flag&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="s">&#39;.*&#39;</span>
                <span class="p">},</span>
                <span class="s">&#39;params&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;k2&#39;</span><span class="p">:</span> <span class="s">&#39;v2&#39;</span><span class="p">,</span> <span class="s">&#39;k1&#39;</span><span class="p">:</span> <span class="s">&#39;v1&#39;</span><span class="p">},</span>
                <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Sensor1&#39;</span><span class="p">,</span>
                <span class="s">&#39;options&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s">&#39;all_values_flag&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="s">&#39;ignore_case_flag&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="s">&#39;max_age_seconds&#39;</span><span class="p">:</span> <span class="s">&#39;3600&#39;</span><span class="p">,</span>
                    <span class="s">&#39;value_type&#39;</span><span class="p">:</span> <span class="s">&#39;string&#39;</span><span class="p">,</span>
                    <span class="s">&#39;all_times_flag&#39;</span><span class="p">:</span> <span class="mi">0</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">sensor_defs</span><span class="p">,</span> <span class="n">exp</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestDehumanizeSensorUtils.test_valid_simple_str_id_selector"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeSensorUtils.test_valid_simple_str_id_selector">[docs]</a>    <span class="k">def</span> <span class="nf">test_valid_simple_str_id_selector</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">sensors</span> <span class="o">=</span> <span class="s">&#39;id:1&#39;</span>
        <span class="n">sensor_defs</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">dehumanize_sensors</span><span class="p">(</span><span class="n">sensors</span><span class="p">)</span>
        <span class="n">exp</span> <span class="o">=</span> <span class="p">[{</span><span class="s">&#39;filter&#39;</span><span class="p">:</span> <span class="p">{},</span> <span class="s">&#39;params&#39;</span><span class="p">:</span> <span class="p">{},</span> <span class="s">&#39;options&#39;</span><span class="p">:</span> <span class="p">{},</span> <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="s">&#39;1&#39;</span><span class="p">}]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">sensor_defs</span><span class="p">,</span> <span class="n">exp</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestDehumanizeSensorUtils.test_valid_simple_str_hash_selector"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeSensorUtils.test_valid_simple_str_hash_selector">[docs]</a>    <span class="k">def</span> <span class="nf">test_valid_simple_str_hash_selector</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">sensors</span> <span class="o">=</span> <span class="s">&#39;hash:1&#39;</span>
        <span class="n">sensor_defs</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">dehumanize_sensors</span><span class="p">(</span><span class="n">sensors</span><span class="p">)</span>
        <span class="n">exp</span> <span class="o">=</span> <span class="p">[{</span><span class="s">&#39;filter&#39;</span><span class="p">:</span> <span class="p">{},</span> <span class="s">&#39;params&#39;</span><span class="p">:</span> <span class="p">{},</span> <span class="s">&#39;options&#39;</span><span class="p">:</span> <span class="p">{},</span> <span class="s">&#39;hash&#39;</span><span class="p">:</span> <span class="s">&#39;1&#39;</span><span class="p">}]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">sensor_defs</span><span class="p">,</span> <span class="n">exp</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestDehumanizeSensorUtils.test_valid_simple_str_name_selector"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeSensorUtils.test_valid_simple_str_name_selector">[docs]</a>    <span class="k">def</span> <span class="nf">test_valid_simple_str_name_selector</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">sensors</span> <span class="o">=</span> <span class="s">&#39;name:Sensor1&#39;</span>
        <span class="n">sensor_defs</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">dehumanize_sensors</span><span class="p">(</span><span class="n">sensors</span><span class="p">)</span>
        <span class="n">exp</span> <span class="o">=</span> <span class="p">[{</span><span class="s">&#39;filter&#39;</span><span class="p">:</span> <span class="p">{},</span> <span class="s">&#39;params&#39;</span><span class="p">:</span> <span class="p">{},</span> <span class="s">&#39;options&#39;</span><span class="p">:</span> <span class="p">{},</span> <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Sensor1&#39;</span><span class="p">}]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">sensor_defs</span><span class="p">,</span> <span class="n">exp</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestDehumanizeSensorUtils.test_valid_simple_list"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeSensorUtils.test_valid_simple_list">[docs]</a>    <span class="k">def</span> <span class="nf">test_valid_simple_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">sensors</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Sensor1&#39;</span><span class="p">]</span>
        <span class="n">sensor_defs</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">dehumanize_sensors</span><span class="p">(</span><span class="n">sensors</span><span class="p">)</span>
        <span class="n">exp</span> <span class="o">=</span> <span class="p">[{</span><span class="s">&#39;filter&#39;</span><span class="p">:</span> <span class="p">{},</span> <span class="s">&#39;params&#39;</span><span class="p">:</span> <span class="p">{},</span> <span class="s">&#39;options&#39;</span><span class="p">:</span> <span class="p">{},</span> <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Sensor1&#39;</span><span class="p">}]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">sensor_defs</span><span class="p">,</span> <span class="n">exp</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestDehumanizeSensorUtils.test_empty_args_str"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeSensorUtils.test_empty_args_str">[docs]</a>    <span class="k">def</span> <span class="nf">test_empty_args_str</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">e</span> <span class="o">=</span> <span class="s">&quot;A string or list of strings must be supplied as &#39;sensors&#39;!&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegexp</span><span class="p">(</span><span class="n">HumanParserError</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">dehumanize_sensors</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">empty_ok</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestDehumanizeSensorUtils.test_empty_args_list"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeSensorUtils.test_empty_args_list">[docs]</a>    <span class="k">def</span> <span class="nf">test_empty_args_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">e</span> <span class="o">=</span> <span class="s">&quot;A string or list of strings must be supplied as &#39;sensors&#39;!&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegexp</span><span class="p">(</span><span class="n">HumanParserError</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">dehumanize_sensors</span><span class="p">([],</span> <span class="n">empty_ok</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestDehumanizeSensorUtils.test_empty_args_dict"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeSensorUtils.test_empty_args_dict">[docs]</a>    <span class="k">def</span> <span class="nf">test_empty_args_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">e</span> <span class="o">=</span> <span class="s">&quot;A string or list of strings must be supplied as &#39;sensors&#39;!&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegexp</span><span class="p">(</span><span class="n">HumanParserError</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">dehumanize_sensors</span><span class="p">({})</span></div></div>


<div class="viewcode-block" id="TestDehumanizeQuestionFilterUtils"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeQuestionFilterUtils">[docs]</a><span class="k">class</span> <span class="nc">TestDehumanizeQuestionFilterUtils</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<div class="viewcode-block" id="TestDehumanizeQuestionFilterUtils.test_single_filter_str"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeQuestionFilterUtils.test_single_filter_str">[docs]</a>    <span class="k">def</span> <span class="nf">test_single_filter_str</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">question_filters</span> <span class="o">=</span> <span class="s">&#39;Sensor1, that contains:Windows&#39;</span>
        <span class="n">question_filter_defs</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">dehumanize_question_filters</span><span class="p">(</span>
            <span class="n">question_filters</span>
        <span class="p">)</span>
        <span class="n">exp</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s">&#39;filter&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s">&#39;operator&#39;</span><span class="p">:</span> <span class="s">&#39;RegexMatch&#39;</span><span class="p">,</span>
                    <span class="s">&#39;not_flag&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="s">&#39;.*Windows.*&#39;</span>
                <span class="p">},</span>
                <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Sensor1&#39;</span>
            <span class="p">}</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">question_filter_defs</span><span class="p">,</span> <span class="n">exp</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestDehumanizeQuestionFilterUtils.test_single_filter_list"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeQuestionFilterUtils.test_single_filter_list">[docs]</a>    <span class="k">def</span> <span class="nf">test_single_filter_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">question_filters</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Sensor1, that contains:Windows&#39;</span><span class="p">]</span>
        <span class="n">question_filter_defs</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">dehumanize_question_filters</span><span class="p">(</span>
            <span class="n">question_filters</span>
        <span class="p">)</span>
        <span class="n">exp</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s">&#39;filter&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s">&#39;operator&#39;</span><span class="p">:</span> <span class="s">&#39;RegexMatch&#39;</span><span class="p">,</span>
                    <span class="s">&#39;not_flag&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="s">&#39;.*Windows.*&#39;</span>
                <span class="p">},</span>
                <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Sensor1&#39;</span>
            <span class="p">}</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">question_filter_defs</span><span class="p">,</span> <span class="n">exp</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestDehumanizeQuestionFilterUtils.test_multi_filter_list"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeQuestionFilterUtils.test_multi_filter_list">[docs]</a>    <span class="k">def</span> <span class="nf">test_multi_filter_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">question_filters</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s">&#39;Sensor1, that contains:Windows&#39;</span><span class="p">,</span>
            <span class="s">&#39;Sensor2, that does not contain:10.10.10.10&#39;</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="n">question_filter_defs</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">dehumanize_question_filters</span><span class="p">(</span>
            <span class="n">question_filters</span>
        <span class="p">)</span>
        <span class="n">exp</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s">&#39;filter&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s">&#39;operator&#39;</span><span class="p">:</span> <span class="s">&#39;RegexMatch&#39;</span><span class="p">,</span>
                    <span class="s">&#39;not_flag&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="s">&#39;.*Windows.*&#39;</span>
                <span class="p">},</span>
                <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Sensor1&#39;</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="s">&#39;filter&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s">&#39;operator&#39;</span><span class="p">:</span> <span class="s">&#39;RegexMatch&#39;</span><span class="p">,</span>
                    <span class="s">&#39;not_flag&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="s">&#39;.*10.10.10.10.*&#39;</span>
                <span class="p">},</span>
                <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Sensor2&#39;</span>
            <span class="p">}</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">question_filter_defs</span><span class="p">,</span> <span class="n">exp</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestDehumanizeQuestionFilterUtils.test_empty_filterstr"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeQuestionFilterUtils.test_empty_filterstr">[docs]</a>    <span class="k">def</span> <span class="nf">test_empty_filterstr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">question_filters</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="n">question_filter_defs</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">dehumanize_question_filters</span><span class="p">(</span>
            <span class="n">question_filters</span>
        <span class="p">)</span>
        <span class="n">exp</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">question_filter_defs</span><span class="p">,</span> <span class="n">exp</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestDehumanizeQuestionFilterUtils.test_empty_filterlist"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeQuestionFilterUtils.test_empty_filterlist">[docs]</a>    <span class="k">def</span> <span class="nf">test_empty_filterlist</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">question_filters</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">question_filter_defs</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">dehumanize_question_filters</span><span class="p">(</span>
            <span class="n">question_filters</span>
        <span class="p">)</span>
        <span class="n">exp</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">question_filter_defs</span><span class="p">,</span> <span class="n">exp</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestDehumanizeQuestionFilterUtils.test_invalid_filter1"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeQuestionFilterUtils.test_invalid_filter1">[docs]</a>    <span class="k">def</span> <span class="nf">test_invalid_filter1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">o</span> <span class="o">=</span> <span class="s">&#39;Sensor1, that feels:funny&#39;</span>
        <span class="n">e</span> <span class="o">=</span> <span class="s">&quot;Filter .* is not a valid filter!&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegexp</span><span class="p">(</span><span class="n">HumanParserError</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">dehumanize_question_filters</span><span class="p">(</span><span class="n">o</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestDehumanizeQuestionFilterUtils.test_invalid_filter2"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeQuestionFilterUtils.test_invalid_filter2">[docs]</a>    <span class="k">def</span> <span class="nf">test_invalid_filter2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">o</span> <span class="o">=</span> <span class="s">&#39;Sensor1&#39;</span>
        <span class="n">e</span> <span class="o">=</span> <span class="s">&quot;Filter .* is not a valid filter!&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegexp</span><span class="p">(</span><span class="n">HumanParserError</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">dehumanize_question_filters</span><span class="p">(</span><span class="n">o</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestDehumanizeQuestionFilterUtils.test_invalid_filter3"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeQuestionFilterUtils.test_invalid_filter3">[docs]</a>    <span class="k">def</span> <span class="nf">test_invalid_filter3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">o</span> <span class="o">=</span> <span class="s">&#39;Sensor1, th&#39;</span>
        <span class="n">e</span> <span class="o">=</span> <span class="s">&quot;Filter .* is not a valid filter!&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegexp</span><span class="p">(</span><span class="n">HumanParserError</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">dehumanize_question_filters</span><span class="p">(</span><span class="n">o</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TestDehumanizeQuestionOptionUtils"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeQuestionOptionUtils">[docs]</a><span class="k">class</span> <span class="nc">TestDehumanizeQuestionOptionUtils</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<div class="viewcode-block" id="TestDehumanizeQuestionOptionUtils.test_empty_optionstr"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeQuestionOptionUtils.test_empty_optionstr">[docs]</a>    <span class="k">def</span> <span class="nf">test_empty_optionstr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">question_options</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="n">question_option_defs</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">dehumanize_question_options</span><span class="p">(</span>
            <span class="n">question_options</span>
        <span class="p">)</span>
        <span class="n">exp</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">question_option_defs</span><span class="p">,</span> <span class="n">exp</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestDehumanizeQuestionOptionUtils.test_empty_optionlist"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeQuestionOptionUtils.test_empty_optionlist">[docs]</a>    <span class="k">def</span> <span class="nf">test_empty_optionlist</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">question_options</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">question_option_defs</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">dehumanize_question_options</span><span class="p">(</span>
            <span class="n">question_options</span>
        <span class="p">)</span>
        <span class="n">exp</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">question_option_defs</span><span class="p">,</span> <span class="n">exp</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestDehumanizeQuestionOptionUtils.test_option_str"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeQuestionOptionUtils.test_option_str">[docs]</a>    <span class="k">def</span> <span class="nf">test_option_str</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">question_options</span> <span class="o">=</span> <span class="s">&#39;ignore_case&#39;</span>
        <span class="n">question_option_defs</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">dehumanize_question_options</span><span class="p">(</span>
            <span class="n">question_options</span>
        <span class="p">)</span>
        <span class="n">exp</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;ignore_case_flag&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">question_option_defs</span><span class="p">,</span> <span class="n">exp</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestDehumanizeQuestionOptionUtils.test_option_list_single"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeQuestionOptionUtils.test_option_list_single">[docs]</a>    <span class="k">def</span> <span class="nf">test_option_list_single</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">question_options</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;ignore_case&#39;</span><span class="p">]</span>
        <span class="n">question_option_defs</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">dehumanize_question_options</span><span class="p">(</span>
            <span class="n">question_options</span>
        <span class="p">)</span>
        <span class="n">exp</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;ignore_case_flag&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">question_option_defs</span><span class="p">,</span> <span class="n">exp</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestDehumanizeQuestionOptionUtils.test_option_list_multi"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeQuestionOptionUtils.test_option_list_multi">[docs]</a>    <span class="k">def</span> <span class="nf">test_option_list_multi</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">question_options</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;ignore_case&#39;</span><span class="p">,</span> <span class="s">&#39;and&#39;</span><span class="p">]</span>
        <span class="n">question_option_defs</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">dehumanize_question_options</span><span class="p">(</span>
            <span class="n">question_options</span>
        <span class="p">)</span>
        <span class="n">exp</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;ignore_case_flag&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;and_flag&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">question_option_defs</span><span class="p">,</span> <span class="n">exp</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestDehumanizeQuestionOptionUtils.test_option_list_many"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeQuestionOptionUtils.test_option_list_many">[docs]</a>    <span class="k">def</span> <span class="nf">test_option_list_many</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">question_options</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s">&#39;ignore_case&#39;</span><span class="p">,</span> <span class="s">&#39;and&#39;</span><span class="p">,</span> <span class="s">&#39;value_type:string&#39;</span><span class="p">,</span> <span class="s">&#39;max_data_age:3600&#39;</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="n">question_option_defs</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">dehumanize_question_options</span><span class="p">(</span>
            <span class="n">question_options</span>
        <span class="p">)</span>
        <span class="n">exp</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;value_type&#39;</span><span class="p">:</span> <span class="s">&#39;string&#39;</span><span class="p">,</span>
            <span class="s">&#39;ignore_case_flag&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s">&#39;max_age_seconds&#39;</span><span class="p">:</span> <span class="s">&#39;3600&#39;</span><span class="p">,</span>
            <span class="s">&#39;and_flag&#39;</span><span class="p">:</span> <span class="mi">1</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">question_option_defs</span><span class="p">,</span> <span class="n">exp</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestDehumanizeQuestionOptionUtils.test_invalid_option1"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeQuestionOptionUtils.test_invalid_option1">[docs]</a>    <span class="k">def</span> <span class="nf">test_invalid_option1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">o</span> <span class="o">=</span> <span class="s">&#39;willy wonka&#39;</span>
        <span class="n">e</span> <span class="o">=</span> <span class="s">&quot;Option &#39;{}&#39; is not a valid option!&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegexp</span><span class="p">(</span><span class="n">HumanParserError</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
            <span class="n">question_options</span> <span class="o">=</span> <span class="p">[</span><span class="n">o</span><span class="p">]</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">dehumanize_question_options</span><span class="p">(</span><span class="n">question_options</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestDehumanizeQuestionOptionUtils.test_invalid_option2"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeQuestionOptionUtils.test_invalid_option2">[docs]</a>    <span class="k">def</span> <span class="nf">test_invalid_option2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">o</span> <span class="o">=</span> <span class="s">&#39;willy wonka&#39;</span>
        <span class="n">e</span> <span class="o">=</span> <span class="s">&quot;Option &#39;{}&#39; is not a valid option!&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegexp</span><span class="p">(</span><span class="n">HumanParserError</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
            <span class="n">question_options</span> <span class="o">=</span> <span class="n">o</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">dehumanize_question_options</span><span class="p">(</span><span class="n">question_options</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TestDehumanizeExtractionUtils"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeExtractionUtils">[docs]</a><span class="k">class</span> <span class="nc">TestDehumanizeExtractionUtils</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<div class="viewcode-block" id="TestDehumanizeExtractionUtils.test_extract_selector"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeExtractionUtils.test_extract_selector">[docs]</a>    <span class="k">def</span> <span class="nf">test_extract_selector</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&#39;id:1 more:stuff,here&#39;</span>
        <span class="n">exp</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;1 more:stuff,here&#39;</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">utils</span><span class="o">.</span><span class="n">extract_selector</span><span class="p">(</span><span class="n">s</span><span class="p">),</span> <span class="n">exp</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestDehumanizeExtractionUtils.test_extract_selector_use_name_if_noselector"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeExtractionUtils.test_extract_selector_use_name_if_noselector">[docs]</a>    <span class="k">def</span> <span class="nf">test_extract_selector_use_name_if_noselector</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&#39;Sensor1 more:stuff,here&#39;</span>
        <span class="n">exp</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;Sensor1 more:stuff,here&#39;</span><span class="p">,</span> <span class="s">&#39;name&#39;</span><span class="p">)</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">extract_selector</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">exp</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestDehumanizeExtractionUtils.test_extract_params"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeExtractionUtils.test_extract_params">[docs]</a>    <span class="k">def</span> <span class="nf">test_extract_params</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&#39;Sensor1{k1=v1,k2=v2}, more:stuff,here&#39;</span>
        <span class="n">exp</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;Sensor1, more:stuff,here&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;k2&#39;</span><span class="p">:</span> <span class="s">&#39;v2&#39;</span><span class="p">,</span> <span class="s">&#39;k1&#39;</span><span class="p">:</span> <span class="s">&#39;v1&#39;</span><span class="p">})</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">extract_params</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">exp</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestDehumanizeExtractionUtils.test_extract_params_noparams"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeExtractionUtils.test_extract_params_noparams">[docs]</a>    <span class="k">def</span> <span class="nf">test_extract_params_noparams</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&#39;Sensor1, more:stuff,here&#39;</span>
        <span class="n">exp</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;Sensor1, more:stuff,here&#39;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">extract_params</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">exp</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestDehumanizeExtractionUtils.test_extract_options_single"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeExtractionUtils.test_extract_options_single">[docs]</a>    <span class="k">def</span> <span class="nf">test_extract_options_single</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&#39;Sensor1, more:stuff,here, opt:ignore_case&#39;</span>
        <span class="n">exp</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;Sensor1, more:stuff,here&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;ignore_case_flag&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">extract_options</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">exp</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestDehumanizeExtractionUtils.test_extract_options_many"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeExtractionUtils.test_extract_options_many">[docs]</a>    <span class="k">def</span> <span class="nf">test_extract_options_many</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s">&#39;Sensor1, more:stuff,here, opt:ignore_case, opt:max_data_age:3600&#39;</span>
            <span class="s">&#39;, opt:match_any_value, opt:value_type:string&#39;</span>
        <span class="p">)</span>
        <span class="n">exp</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s">&#39;Sensor1, more:stuff,here&#39;</span><span class="p">,</span>
            <span class="p">{</span>
                <span class="s">&#39;value_type&#39;</span><span class="p">:</span> <span class="s">&#39;string&#39;</span><span class="p">,</span>
                <span class="s">&#39;ignore_case_flag&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="s">&#39;max_age_seconds&#39;</span><span class="p">:</span> <span class="s">&#39;3600&#39;</span><span class="p">,</span>
                <span class="s">&#39;all_values_flag&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s">&#39;all_times_flag&#39;</span><span class="p">:</span> <span class="mi">0</span>
            <span class="p">}</span>
        <span class="p">)</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">extract_options</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">exp</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestDehumanizeExtractionUtils.test_extract_options_nooptions"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeExtractionUtils.test_extract_options_nooptions">[docs]</a>    <span class="k">def</span> <span class="nf">test_extract_options_nooptions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&#39;Sensor1, more:stuff,here&#39;</span>
        <span class="n">exp</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;Sensor1, more:stuff,here&#39;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">extract_options</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">exp</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestDehumanizeExtractionUtils.test_extract_filter_valid"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeExtractionUtils.test_extract_filter_valid">[docs]</a>    <span class="k">def</span> <span class="nf">test_extract_filter_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&#39;Sensor1, that is:.*&#39;</span>
        <span class="n">exp</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s">&#39;Sensor1&#39;</span><span class="p">,</span>
            <span class="p">{</span><span class="s">&#39;operator&#39;</span><span class="p">:</span> <span class="s">&#39;RegexMatch&#39;</span><span class="p">,</span> <span class="s">&#39;not_flag&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="s">&#39;.*&#39;</span><span class="p">}</span>
        <span class="p">)</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">extract_filter</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">exp</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestDehumanizeExtractionUtils.test_extract_filter_valid_all"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeExtractionUtils.test_extract_filter_valid_all">[docs]</a>    <span class="k">def</span> <span class="nf">test_extract_filter_valid_all</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">constants</span><span class="o">.</span><span class="n">FILTER_MAPS</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">x</span><span class="p">[</span><span class="s">&#39;human&#39;</span><span class="p">]:</span>
                <span class="n">z</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">extract_filter</span><span class="p">(</span><span class="s">&#39;Sensor1, that {}:test value&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">z</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">z</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s">&#39;Sensor1&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s">&#39;test value&#39;</span><span class="p">,</span> <span class="n">z</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s">&#39;value&#39;</span><span class="p">])</span></div>

<div class="viewcode-block" id="TestDehumanizeExtractionUtils.test_extract_filter_nofilter"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeExtractionUtils.test_extract_filter_nofilter">[docs]</a>    <span class="k">def</span> <span class="nf">test_extract_filter_nofilter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&#39;Sensor1&#39;</span>
        <span class="n">exp</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;Sensor1&#39;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">extract_filter</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">exp</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestDehumanizeExtractionUtils.test_extract_params_multiparams"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeExtractionUtils.test_extract_params_multiparams">[docs]</a>    <span class="k">def</span> <span class="nf">test_extract_params_multiparams</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&#39;Sensor1{k1=v1,k2=v2}{}, more:stuff,here&#39;</span>
        <span class="n">e</span> <span class="o">=</span> <span class="s">&quot;More than one parameter \(\{\}\) passed in &#39;.*&#39;&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegexp</span><span class="p">(</span><span class="n">HumanParserError</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">extract_params</span><span class="p">(</span><span class="n">s</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestDehumanizeExtractionUtils.test_extract_params_missing_seperator"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeExtractionUtils.test_extract_params_missing_seperator">[docs]</a>    <span class="k">def</span> <span class="nf">test_extract_params_missing_seperator</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&#39;Sensor1{v1,v2}, more:stuff,here&#39;</span>
        <span class="n">e</span> <span class="o">=</span> <span class="s">&quot;Parameter v1 missing key/value seperator \(=\)&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegexp</span><span class="p">(</span><span class="n">HumanParserError</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">extract_params</span><span class="p">(</span><span class="n">s</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestDehumanizeExtractionUtils.test_extract_options_missing_value_max_data_age"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeExtractionUtils.test_extract_options_missing_value_max_data_age">[docs]</a>    <span class="k">def</span> <span class="nf">test_extract_options_missing_value_max_data_age</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&#39;Sensor1, more:stuff,here, opt:max_data_age&#39;</span>
        <span class="n">e</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s">&quot;Option &#39;max_data_age&#39; is missing a &lt;type &#39;int&#39;&gt; value of seconds&quot;</span>
            <span class="s">&quot;.*&quot;</span>
        <span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegexp</span><span class="p">(</span><span class="n">HumanParserError</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">extract_options</span><span class="p">(</span><span class="n">s</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestDehumanizeExtractionUtils.test_extract_options_missing_value_value_type"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeExtractionUtils.test_extract_options_missing_value_value_type">[docs]</a>    <span class="k">def</span> <span class="nf">test_extract_options_missing_value_value_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&#39;Sensor1, more:stuff,here, opt:value_type&#39;</span>
        <span class="n">e</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s">&quot;Option &#39;value_type&#39; is missing a &lt;type &#39;str&#39;&gt; value of &quot;</span>
            <span class="s">&quot;value_type.*&quot;</span>
        <span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegexp</span><span class="p">(</span><span class="n">HumanParserError</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">extract_options</span><span class="p">(</span><span class="n">s</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestDehumanizeExtractionUtils.test_extract_options_invalid_option"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeExtractionUtils.test_extract_options_invalid_option">[docs]</a>    <span class="k">def</span> <span class="nf">test_extract_options_invalid_option</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&#39;Sensor1, more:stuff,here, opt:invalid_option&#39;</span>
        <span class="n">e</span> <span class="o">=</span> <span class="s">&quot;Option &#39;invalid_option&#39; is not a valid option!&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegexp</span><span class="p">(</span><span class="n">HumanParserError</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">extract_options</span><span class="p">(</span><span class="n">s</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestDehumanizeExtractionUtils.test_extract_filter_invalid"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDehumanizeExtractionUtils.test_extract_filter_invalid">[docs]</a>    <span class="k">def</span> <span class="nf">test_extract_filter_invalid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">s</span> <span class="o">=</span> <span class="s">&#39;Sensor1, that meets:.*&#39;</span>
        <span class="n">e</span> <span class="o">=</span> <span class="s">&quot;Filter .* is not a valid filter!&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegexp</span><span class="p">(</span><span class="n">HumanParserError</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">extract_filter</span><span class="p">(</span><span class="n">s</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TestManualSensorDefParseUtils"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualSensorDefParseUtils">[docs]</a><span class="k">class</span> <span class="nc">TestManualSensorDefParseUtils</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<div class="viewcode-block" id="TestManualSensorDefParseUtils.test_parse_str1"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualSensorDefParseUtils.test_parse_str1">[docs]</a>    <span class="k">def</span> <span class="nf">test_parse_str1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;simple str is parsed into list of same str&#39;&#39;&#39;</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;sensor_defs&#39;</span><span class="p">:</span> <span class="s">&#39;Sensor1&#39;</span><span class="p">}</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">parse_defs</span><span class="p">(</span>
            <span class="n">defname</span><span class="o">=</span><span class="s">&#39;sensor_defs&#39;</span><span class="p">,</span>
            <span class="n">deftypes</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;list()&#39;</span><span class="p">,</span> <span class="s">&#39;str()&#39;</span><span class="p">,</span> <span class="s">&#39;dict()&#39;</span><span class="p">],</span>
            <span class="n">strconv</span><span class="o">=</span><span class="s">&#39;name&#39;</span><span class="p">,</span>
            <span class="n">empty_ok</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>
        <span class="n">exp</span> <span class="o">=</span> <span class="p">[{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Sensor1&#39;</span><span class="p">}]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">exp</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestManualSensorDefParseUtils.test_parse_dict_name"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualSensorDefParseUtils.test_parse_dict_name">[docs]</a>    <span class="k">def</span> <span class="nf">test_parse_dict_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;dict with name is parsed into list of same dict&#39;&#39;&#39;</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;sensor_defs&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Sensor1&#39;</span><span class="p">}}</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">parse_defs</span><span class="p">(</span>
            <span class="n">defname</span><span class="o">=</span><span class="s">&#39;sensor_defs&#39;</span><span class="p">,</span>
            <span class="n">deftypes</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;list()&#39;</span><span class="p">,</span> <span class="s">&#39;str()&#39;</span><span class="p">,</span> <span class="s">&#39;dict()&#39;</span><span class="p">],</span>
            <span class="n">strconv</span><span class="o">=</span><span class="s">&#39;name&#39;</span><span class="p">,</span>
            <span class="n">empty_ok</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>
        <span class="n">exp</span> <span class="o">=</span> <span class="p">[{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Sensor1&#39;</span><span class="p">}]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">exp</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestManualSensorDefParseUtils.test_parse_dict_id"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualSensorDefParseUtils.test_parse_dict_id">[docs]</a>    <span class="k">def</span> <span class="nf">test_parse_dict_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;dict with id is parsed into list of same dict&#39;&#39;&#39;</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;sensor_defs&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="s">&#39;1&#39;</span><span class="p">}}</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">parse_defs</span><span class="p">(</span>
            <span class="n">defname</span><span class="o">=</span><span class="s">&#39;sensor_defs&#39;</span><span class="p">,</span>
            <span class="n">deftypes</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;list()&#39;</span><span class="p">,</span> <span class="s">&#39;str()&#39;</span><span class="p">,</span> <span class="s">&#39;dict()&#39;</span><span class="p">],</span>
            <span class="n">strconv</span><span class="o">=</span><span class="s">&#39;name&#39;</span><span class="p">,</span>
            <span class="n">empty_ok</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>
        <span class="n">exp</span> <span class="o">=</span> <span class="p">[{</span><span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="s">&#39;1&#39;</span><span class="p">}]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">exp</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestManualSensorDefParseUtils.test_parse_dict_hash"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualSensorDefParseUtils.test_parse_dict_hash">[docs]</a>    <span class="k">def</span> <span class="nf">test_parse_dict_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;dict with hash is parsed into list of same dict&#39;&#39;&#39;</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;sensor_defs&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;hash&#39;</span><span class="p">:</span> <span class="s">&#39;1&#39;</span><span class="p">}}</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">parse_defs</span><span class="p">(</span>
            <span class="n">defname</span><span class="o">=</span><span class="s">&#39;sensor_defs&#39;</span><span class="p">,</span>
            <span class="n">deftypes</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;list()&#39;</span><span class="p">,</span> <span class="s">&#39;str()&#39;</span><span class="p">,</span> <span class="s">&#39;dict()&#39;</span><span class="p">],</span>
            <span class="n">strconv</span><span class="o">=</span><span class="s">&#39;name&#39;</span><span class="p">,</span>
            <span class="n">empty_ok</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>
        <span class="n">exp</span> <span class="o">=</span> <span class="p">[{</span><span class="s">&#39;hash&#39;</span><span class="p">:</span> <span class="s">&#39;1&#39;</span><span class="p">}]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">exp</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestManualSensorDefParseUtils.test_parse_complex"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualSensorDefParseUtils.test_parse_complex">[docs]</a>    <span class="k">def</span> <span class="nf">test_parse_complex</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;list with many items is parsed into same list&#39;&#39;&#39;</span>
        <span class="n">sensor_defs</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s">&#39;filter&#39;</span><span class="p">:</span> <span class="p">{},</span>
                <span class="s">&#39;params&#39;</span><span class="p">:</span> <span class="p">{},</span>
                <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Computer Name&#39;</span><span class="p">,</span>
                <span class="s">&#39;options&#39;</span><span class="p">:</span> <span class="p">{}</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="s">&#39;filter&#39;</span><span class="p">:</span> <span class="p">{},</span>
                <span class="s">&#39;params&#39;</span><span class="p">:</span> <span class="p">{},</span>
                <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="s">&#39;1&#39;</span><span class="p">,</span>
                <span class="s">&#39;options&#39;</span><span class="p">:</span> <span class="p">{}</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="s">&#39;filter&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s">&#39;operator&#39;</span><span class="p">:</span> <span class="s">&#39;RegexMatch&#39;</span><span class="p">,</span>
                    <span class="s">&#39;not_flag&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="s">&#39;.*Windows.*&#39;</span>
                <span class="p">},</span>
                <span class="s">&#39;params&#39;</span><span class="p">:</span> <span class="p">{},</span>
                <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Operating System&#39;</span><span class="p">,</span>
                <span class="s">&#39;options&#39;</span><span class="p">:</span> <span class="p">{}</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="s">&#39;filter&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s">&#39;operator&#39;</span><span class="p">:</span> <span class="s">&#39;RegexMatch&#39;</span><span class="p">,</span>
                    <span class="s">&#39;not_flag&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="s">&#39;.*&#39;</span>
                <span class="p">},</span>
                <span class="s">&#39;params&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;k2&#39;</span><span class="p">:</span> <span class="s">&#39;v2&#39;</span><span class="p">,</span> <span class="s">&#39;k1&#39;</span><span class="p">:</span> <span class="s">&#39;v1&#39;</span><span class="p">},</span>
                <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Sensor1&#39;</span><span class="p">,</span>
                <span class="s">&#39;options&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s">&#39;all_values_flag&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="s">&#39;ignore_case_flag&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="s">&#39;max_age_seconds&#39;</span><span class="p">:</span> <span class="s">&#39;3600&#39;</span><span class="p">,</span>
                    <span class="s">&#39;value_type&#39;</span><span class="p">:</span> <span class="s">&#39;string&#39;</span><span class="p">,</span>
                    <span class="s">&#39;all_times_flag&#39;</span><span class="p">:</span> <span class="mi">0</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">]</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;sensor_defs&#39;</span><span class="p">:</span> <span class="n">sensor_defs</span><span class="p">}</span>

        <span class="n">r</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">parse_defs</span><span class="p">(</span>
            <span class="n">defname</span><span class="o">=</span><span class="s">&#39;sensor_defs&#39;</span><span class="p">,</span>
            <span class="n">deftypes</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;list()&#39;</span><span class="p">,</span> <span class="s">&#39;str()&#39;</span><span class="p">,</span> <span class="s">&#39;dict()&#39;</span><span class="p">],</span>
            <span class="n">strconv</span><span class="o">=</span><span class="s">&#39;name&#39;</span><span class="p">,</span>
            <span class="n">empty_ok</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">sensor_defs</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestManualSensorDefParseUtils.test_parse_noargs"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualSensorDefParseUtils.test_parse_noargs">[docs]</a>    <span class="k">def</span> <span class="nf">test_parse_noargs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;no args throws exception&#39;&#39;&#39;</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">e</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s">&quot;&#39;sensor_defs&#39; requires a non-empty value of type: list\(\) or &quot;</span>
            <span class="s">&quot;str\(\) or dict\(\)&quot;</span>
        <span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegexp</span><span class="p">(</span><span class="n">DefinitionParserError</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">parse_defs</span><span class="p">(</span>
                <span class="n">defname</span><span class="o">=</span><span class="s">&#39;sensor_defs&#39;</span><span class="p">,</span>
                <span class="n">deftypes</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;list()&#39;</span><span class="p">,</span> <span class="s">&#39;str()&#39;</span><span class="p">,</span> <span class="s">&#39;dict()&#39;</span><span class="p">],</span>
                <span class="n">strconv</span><span class="o">=</span><span class="s">&#39;name&#39;</span><span class="p">,</span>
                <span class="n">empty_ok</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span>
            <span class="p">)</span></div>

<div class="viewcode-block" id="TestManualSensorDefParseUtils.test_parse_none"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualSensorDefParseUtils.test_parse_none">[docs]</a>    <span class="k">def</span> <span class="nf">test_parse_none</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;args==None throws exception&#39;&#39;&#39;</span>
        <span class="n">e</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s">&quot;&#39;sensor_defs&#39; requires a non-empty value of type: list\(\) or &quot;</span>
            <span class="s">&quot;str\(\) or dict\(\)&quot;</span>
        <span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegexp</span><span class="p">(</span><span class="n">DefinitionParserError</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
            <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;sensor_defs&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">parse_defs</span><span class="p">(</span>
                <span class="n">defname</span><span class="o">=</span><span class="s">&#39;sensor_defs&#39;</span><span class="p">,</span>
                <span class="n">deftypes</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;list()&#39;</span><span class="p">,</span> <span class="s">&#39;str()&#39;</span><span class="p">,</span> <span class="s">&#39;dict()&#39;</span><span class="p">],</span>
                <span class="n">strconv</span><span class="o">=</span><span class="s">&#39;name&#39;</span><span class="p">,</span>
                <span class="n">empty_ok</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span>
            <span class="p">)</span></div>

<div class="viewcode-block" id="TestManualSensorDefParseUtils.test_parse_emptystr"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualSensorDefParseUtils.test_parse_emptystr">[docs]</a>    <span class="k">def</span> <span class="nf">test_parse_emptystr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;args==&#39;&#39; throws exception&#39;&#39;&#39;</span>
        <span class="n">e</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s">&quot;&#39;sensor_defs&#39; requires a non-empty value of type: list\(\) or &quot;</span>
            <span class="s">&quot;str\(\) or dict\(\)&quot;</span>
        <span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegexp</span><span class="p">(</span><span class="n">DefinitionParserError</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
            <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;sensor_defs&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">parse_defs</span><span class="p">(</span>
                <span class="n">defname</span><span class="o">=</span><span class="s">&#39;sensor_defs&#39;</span><span class="p">,</span>
                <span class="n">deftypes</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;list()&#39;</span><span class="p">,</span> <span class="s">&#39;str()&#39;</span><span class="p">,</span> <span class="s">&#39;dict()&#39;</span><span class="p">],</span>
                <span class="n">strconv</span><span class="o">=</span><span class="s">&#39;name&#39;</span><span class="p">,</span>
                <span class="n">empty_ok</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span>
            <span class="p">)</span></div>

<div class="viewcode-block" id="TestManualSensorDefParseUtils.test_parse_emptylist"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualSensorDefParseUtils.test_parse_emptylist">[docs]</a>    <span class="k">def</span> <span class="nf">test_parse_emptylist</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;args==[] throws exception&#39;&#39;&#39;</span>
        <span class="n">e</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s">&quot;&#39;sensor_defs&#39; requires a non-empty value of type: list\(\) or &quot;</span>
            <span class="s">&quot;str\(\) or dict\(\)&quot;</span>
        <span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegexp</span><span class="p">(</span><span class="n">DefinitionParserError</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
            <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;sensor_defs&#39;</span><span class="p">:</span> <span class="p">[]}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">parse_defs</span><span class="p">(</span>
                <span class="n">defname</span><span class="o">=</span><span class="s">&#39;sensor_defs&#39;</span><span class="p">,</span>
                <span class="n">deftypes</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;list()&#39;</span><span class="p">,</span> <span class="s">&#39;str()&#39;</span><span class="p">,</span> <span class="s">&#39;dict()&#39;</span><span class="p">],</span>
                <span class="n">strconv</span><span class="o">=</span><span class="s">&#39;name&#39;</span><span class="p">,</span>
                <span class="n">empty_ok</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span>
            <span class="p">)</span></div>

<div class="viewcode-block" id="TestManualSensorDefParseUtils.test_parse_emptydict"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualSensorDefParseUtils.test_parse_emptydict">[docs]</a>    <span class="k">def</span> <span class="nf">test_parse_emptydict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;args=={} throws exception&#39;&#39;&#39;</span>
        <span class="n">e</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s">&quot;&#39;sensor_defs&#39; requires a non-empty value of type: list\(\) or &quot;</span>
            <span class="s">&quot;str\(\) or dict\(\)&quot;</span>
        <span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegexp</span><span class="p">(</span><span class="n">DefinitionParserError</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
            <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;sensor_defs&#39;</span><span class="p">:</span> <span class="p">{}}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">parse_defs</span><span class="p">(</span>
                <span class="n">defname</span><span class="o">=</span><span class="s">&#39;sensor_defs&#39;</span><span class="p">,</span>
                <span class="n">deftypes</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;list()&#39;</span><span class="p">,</span> <span class="s">&#39;str()&#39;</span><span class="p">,</span> <span class="s">&#39;dict()&#39;</span><span class="p">],</span>
                <span class="n">strconv</span><span class="o">=</span><span class="s">&#39;name&#39;</span><span class="p">,</span>
                <span class="n">empty_ok</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span>
            <span class="p">)</span></div></div>


<div class="viewcode-block" id="TestManualQuestionFilterDefParseUtils"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualQuestionFilterDefParseUtils">[docs]</a><span class="k">class</span> <span class="nc">TestManualQuestionFilterDefParseUtils</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<div class="viewcode-block" id="TestManualQuestionFilterDefParseUtils.test_parse_noargs"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualQuestionFilterDefParseUtils.test_parse_noargs">[docs]</a>    <span class="k">def</span> <span class="nf">test_parse_noargs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">parse_defs</span><span class="p">(</span>
            <span class="n">defname</span><span class="o">=</span><span class="s">&#39;question_filter_defs&#39;</span><span class="p">,</span>
            <span class="n">deftypes</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;list()&#39;</span><span class="p">,</span> <span class="s">&#39;dict()&#39;</span><span class="p">],</span>
            <span class="n">empty_ok</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">r</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestManualQuestionFilterDefParseUtils.test_parse_none"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualQuestionFilterDefParseUtils.test_parse_none">[docs]</a>    <span class="k">def</span> <span class="nf">test_parse_none</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;question_filter_defs&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">}</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">parse_defs</span><span class="p">(</span>
            <span class="n">defname</span><span class="o">=</span><span class="s">&#39;question_filter_defs&#39;</span><span class="p">,</span>
            <span class="n">deftypes</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;list()&#39;</span><span class="p">,</span> <span class="s">&#39;dict()&#39;</span><span class="p">],</span>
            <span class="n">empty_ok</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">r</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestManualQuestionFilterDefParseUtils.test_parse_emptystr"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualQuestionFilterDefParseUtils.test_parse_emptystr">[docs]</a>    <span class="k">def</span> <span class="nf">test_parse_emptystr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;question_filter_defs&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">}</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">parse_defs</span><span class="p">(</span>
            <span class="n">defname</span><span class="o">=</span><span class="s">&#39;question_filter_defs&#39;</span><span class="p">,</span>
            <span class="n">deftypes</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;list()&#39;</span><span class="p">,</span> <span class="s">&#39;dict()&#39;</span><span class="p">],</span>
            <span class="n">empty_ok</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">r</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestManualQuestionFilterDefParseUtils.test_parse_emptylist"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualQuestionFilterDefParseUtils.test_parse_emptylist">[docs]</a>    <span class="k">def</span> <span class="nf">test_parse_emptylist</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;question_filter_defs&#39;</span><span class="p">:</span> <span class="p">[]}</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">parse_defs</span><span class="p">(</span>
            <span class="n">defname</span><span class="o">=</span><span class="s">&#39;question_filter_defs&#39;</span><span class="p">,</span>
            <span class="n">deftypes</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;list()&#39;</span><span class="p">,</span> <span class="s">&#39;dict()&#39;</span><span class="p">],</span>
            <span class="n">empty_ok</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">r</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestManualQuestionFilterDefParseUtils.test_parse_emptydict"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualQuestionFilterDefParseUtils.test_parse_emptydict">[docs]</a>    <span class="k">def</span> <span class="nf">test_parse_emptydict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;question_filter_defs&#39;</span><span class="p">:</span> <span class="p">{}}</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">parse_defs</span><span class="p">(</span>
            <span class="n">defname</span><span class="o">=</span><span class="s">&#39;question_filter_defs&#39;</span><span class="p">,</span>
            <span class="n">deftypes</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;list()&#39;</span><span class="p">,</span> <span class="s">&#39;dict()&#39;</span><span class="p">],</span>
            <span class="n">empty_ok</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">r</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestManualQuestionFilterDefParseUtils.test_parse_single_filter"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualQuestionFilterDefParseUtils.test_parse_single_filter">[docs]</a>    <span class="k">def</span> <span class="nf">test_parse_single_filter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;question_filter_defs&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">&#39;filter&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s">&#39;operator&#39;</span><span class="p">:</span> <span class="s">&#39;RegexMatch&#39;</span><span class="p">,</span>
                <span class="s">&#39;not_flag&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="s">&#39;.*Windows.*&#39;</span>
            <span class="p">},</span>
            <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Operating System&#39;</span><span class="p">,</span>
        <span class="p">}}</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">parse_defs</span><span class="p">(</span>
            <span class="n">defname</span><span class="o">=</span><span class="s">&#39;question_filter_defs&#39;</span><span class="p">,</span>
            <span class="n">deftypes</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;list()&#39;</span><span class="p">,</span> <span class="s">&#39;dict()&#39;</span><span class="p">],</span>
            <span class="n">empty_ok</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="p">[</span><span class="n">kwargs</span><span class="p">[</span><span class="s">&#39;question_filter_defs&#39;</span><span class="p">]])</span></div>

<div class="viewcode-block" id="TestManualQuestionFilterDefParseUtils.test_parse_multi_filter"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualQuestionFilterDefParseUtils.test_parse_multi_filter">[docs]</a>    <span class="k">def</span> <span class="nf">test_parse_multi_filter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;question_filter_defs&#39;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s">&#39;filter&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s">&#39;operator&#39;</span><span class="p">:</span> <span class="s">&#39;RegexMatch&#39;</span><span class="p">,</span>
                    <span class="s">&#39;not_flag&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="s">&#39;.*Windows.*&#39;</span>
                <span class="p">},</span>
                <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Operating System&#39;</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="s">&#39;filter&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s">&#39;operator&#39;</span><span class="p">:</span> <span class="s">&#39;RegexMatch&#39;</span><span class="p">,</span>
                    <span class="s">&#39;not_flag&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="s">&#39;.*Linux.*&#39;</span>
                <span class="p">},</span>
                <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Operating System&#39;</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">]}</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">parse_defs</span><span class="p">(</span>
            <span class="n">defname</span><span class="o">=</span><span class="s">&#39;question_filter_defs&#39;</span><span class="p">,</span>
            <span class="n">deftypes</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;list()&#39;</span><span class="p">,</span> <span class="s">&#39;dict()&#39;</span><span class="p">],</span>
            <span class="n">empty_ok</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">[</span><span class="s">&#39;question_filter_defs&#39;</span><span class="p">])</span></div>

<div class="viewcode-block" id="TestManualQuestionFilterDefParseUtils.test_parse_str"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualQuestionFilterDefParseUtils.test_parse_str">[docs]</a>    <span class="k">def</span> <span class="nf">test_parse_str</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">e</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s">&quot;Argument &#39;question_filter_defs&#39; has an invalid type &quot;</span>
            <span class="s">&quot;&lt;type &#39;str&#39;&gt;&quot;</span>
        <span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegexp</span><span class="p">(</span><span class="n">DefinitionParserError</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
            <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;question_filter_defs&#39;</span><span class="p">:</span> <span class="s">&#39;no string allowed&#39;</span><span class="p">}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">parse_defs</span><span class="p">(</span>
                <span class="n">defname</span><span class="o">=</span><span class="s">&#39;question_filter_defs&#39;</span><span class="p">,</span>
                <span class="n">deftypes</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;list()&#39;</span><span class="p">,</span> <span class="s">&#39;dict()&#39;</span><span class="p">],</span>
                <span class="n">empty_ok</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span>
            <span class="p">)</span></div></div>


<div class="viewcode-block" id="TestManualQuestionOptionDefParseUtils"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualQuestionOptionDefParseUtils">[docs]</a><span class="k">class</span> <span class="nc">TestManualQuestionOptionDefParseUtils</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<div class="viewcode-block" id="TestManualQuestionOptionDefParseUtils.test_parse_noargs"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualQuestionOptionDefParseUtils.test_parse_noargs">[docs]</a>    <span class="k">def</span> <span class="nf">test_parse_noargs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">parse_defs</span><span class="p">(</span>
            <span class="n">defname</span><span class="o">=</span><span class="s">&#39;question_option_defs&#39;</span><span class="p">,</span>
            <span class="n">deftypes</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;dict()&#39;</span><span class="p">],</span>
            <span class="n">empty_ok</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">r</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestManualQuestionOptionDefParseUtils.test_parse_none"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualQuestionOptionDefParseUtils.test_parse_none">[docs]</a>    <span class="k">def</span> <span class="nf">test_parse_none</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;question_option_defs&#39;</span><span class="p">:</span> <span class="bp">None</span><span class="p">}</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">parse_defs</span><span class="p">(</span>
            <span class="n">defname</span><span class="o">=</span><span class="s">&#39;question_option_defs&#39;</span><span class="p">,</span>
            <span class="n">deftypes</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;dict()&#39;</span><span class="p">],</span>
            <span class="n">empty_ok</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">r</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestManualQuestionOptionDefParseUtils.test_parse_emptystr"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualQuestionOptionDefParseUtils.test_parse_emptystr">[docs]</a>    <span class="k">def</span> <span class="nf">test_parse_emptystr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;question_option_defs&#39;</span><span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">}</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">parse_defs</span><span class="p">(</span>
            <span class="n">defname</span><span class="o">=</span><span class="s">&#39;question_option_defs&#39;</span><span class="p">,</span>
            <span class="n">deftypes</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;dict()&#39;</span><span class="p">],</span>
            <span class="n">empty_ok</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">r</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestManualQuestionOptionDefParseUtils.test_parse_emptylist"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualQuestionOptionDefParseUtils.test_parse_emptylist">[docs]</a>    <span class="k">def</span> <span class="nf">test_parse_emptylist</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;question_option_defs&#39;</span><span class="p">:</span> <span class="p">[]}</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">parse_defs</span><span class="p">(</span>
            <span class="n">defname</span><span class="o">=</span><span class="s">&#39;question_option_defs&#39;</span><span class="p">,</span>
            <span class="n">deftypes</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;dict()&#39;</span><span class="p">],</span>
            <span class="n">empty_ok</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">r</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestManualQuestionOptionDefParseUtils.test_parse_emptydict"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualQuestionOptionDefParseUtils.test_parse_emptydict">[docs]</a>    <span class="k">def</span> <span class="nf">test_parse_emptydict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;question_option_defs&#39;</span><span class="p">:</span> <span class="p">{}}</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">parse_defs</span><span class="p">(</span>
            <span class="n">defname</span><span class="o">=</span><span class="s">&#39;question_option_defs&#39;</span><span class="p">,</span>
            <span class="n">deftypes</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;dict()&#39;</span><span class="p">],</span>
            <span class="n">empty_ok</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">r</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestManualQuestionOptionDefParseUtils.test_parse_options_dict"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualQuestionOptionDefParseUtils.test_parse_options_dict">[docs]</a>    <span class="k">def</span> <span class="nf">test_parse_options_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;question_option_defs&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">&#39;all_values_flag&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s">&#39;ignore_case_flag&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s">&#39;max_age_seconds&#39;</span><span class="p">:</span> <span class="s">&#39;3600&#39;</span><span class="p">,</span>
            <span class="s">&#39;value_type&#39;</span><span class="p">:</span> <span class="s">&#39;string&#39;</span><span class="p">,</span>
            <span class="s">&#39;all_times_flag&#39;</span><span class="p">:</span> <span class="mi">0</span>
        <span class="p">}}</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">parse_defs</span><span class="p">(</span>
            <span class="n">defname</span><span class="o">=</span><span class="s">&#39;question_option_defs&#39;</span><span class="p">,</span>
            <span class="n">deftypes</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;dict()&#39;</span><span class="p">],</span>
            <span class="n">empty_ok</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">[</span><span class="s">&#39;question_option_defs&#39;</span><span class="p">])</span></div>

<div class="viewcode-block" id="TestManualQuestionOptionDefParseUtils.test_parse_str"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualQuestionOptionDefParseUtils.test_parse_str">[docs]</a>    <span class="k">def</span> <span class="nf">test_parse_str</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">e</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s">&quot;&#39;question_option_defs&#39; requires a non-empty value of type:&quot;</span>
            <span class="s">&quot; dict\(\)&quot;</span>
        <span class="p">)</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;question_option_defs&#39;</span><span class="p">:</span> <span class="s">&#39;no string allowed&#39;</span><span class="p">}</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegexp</span><span class="p">(</span><span class="n">DefinitionParserError</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">parse_defs</span><span class="p">(</span>
                <span class="n">defname</span><span class="o">=</span><span class="s">&#39;question_option_defs&#39;</span><span class="p">,</span>
                <span class="n">deftypes</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;dict()&#39;</span><span class="p">],</span>
                <span class="n">empty_ok</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span>
            <span class="p">)</span></div>

<div class="viewcode-block" id="TestManualQuestionOptionDefParseUtils.test_parse_list"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualQuestionOptionDefParseUtils.test_parse_list">[docs]</a>    <span class="k">def</span> <span class="nf">test_parse_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">e</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s">&quot;&#39;question_option_defs&#39; requires a non-empty value of type:&quot;</span>
            <span class="s">&quot; dict\(\)&quot;</span>
        <span class="p">)</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;question_option_defs&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;no list allowed&#39;</span><span class="p">]}</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegexp</span><span class="p">(</span><span class="n">DefinitionParserError</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">parse_defs</span><span class="p">(</span>
                <span class="n">defname</span><span class="o">=</span><span class="s">&#39;question_option_defs&#39;</span><span class="p">,</span>
                <span class="n">deftypes</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;dict()&#39;</span><span class="p">],</span>
                <span class="n">empty_ok</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span>
            <span class="p">)</span></div></div>


<div class="viewcode-block" id="TestManualPackageDefValidateUtils"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualPackageDefValidateUtils">[docs]</a><span class="k">class</span> <span class="nc">TestManualPackageDefValidateUtils</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<div class="viewcode-block" id="TestManualPackageDefValidateUtils.test_valid1"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualPackageDefValidateUtils.test_valid1">[docs]</a>    <span class="k">def</span> <span class="nf">test_valid1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;package_def&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Package1&#39;</span><span class="p">}}</span>
        <span class="n">utils</span><span class="o">.</span><span class="n">val_package_def</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestManualPackageDefValidateUtils.test_valid2"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualPackageDefValidateUtils.test_valid2">[docs]</a>    <span class="k">def</span> <span class="nf">test_valid2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;package_def&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Package1&#39;</span><span class="p">,</span>
            <span class="s">&#39;params&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;dirname&#39;</span><span class="p">:</span> <span class="s">&#39;Program Files&#39;</span><span class="p">},</span>
        <span class="p">}}</span>
        <span class="n">utils</span><span class="o">.</span><span class="n">val_package_def</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestManualPackageDefValidateUtils.test_invalid1"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualPackageDefValidateUtils.test_invalid1">[docs]</a>    <span class="k">def</span> <span class="nf">test_invalid1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">e</span> <span class="o">=</span> <span class="s">&quot;Package definition.*missing one of id, name!&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegexp</span><span class="p">(</span><span class="n">DefinitionParserError</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
            <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;package_def&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;NONAME&#39;</span><span class="p">:</span> <span class="s">&#39;Package1&#39;</span><span class="p">}}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">val_package_def</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestManualPackageDefValidateUtils.test_invalid2"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualPackageDefValidateUtils.test_invalid2">[docs]</a>    <span class="k">def</span> <span class="nf">test_invalid2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">e</span> <span class="o">=</span> <span class="s">&quot;Package definition.*has more than one of id, name!&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegexp</span><span class="p">(</span><span class="n">DefinitionParserError</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
            <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;package_def&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;test1&#39;</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="s">&#39;2&#39;</span><span class="p">}}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">val_package_def</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TestManualSensorDefValidateUtils"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualSensorDefValidateUtils">[docs]</a><span class="k">class</span> <span class="nc">TestManualSensorDefValidateUtils</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<div class="viewcode-block" id="TestManualSensorDefValidateUtils.test_valid1"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualSensorDefValidateUtils.test_valid1">[docs]</a>    <span class="k">def</span> <span class="nf">test_valid1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;sensor_defs&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Sensor1&#39;</span><span class="p">}]}</span>
        <span class="n">utils</span><span class="o">.</span><span class="n">val_sensor_defs</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestManualSensorDefValidateUtils.test_valid2"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualSensorDefValidateUtils.test_valid2">[docs]</a>    <span class="k">def</span> <span class="nf">test_valid2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;sensor_defs&#39;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Sensor1&#39;</span><span class="p">,</span>
                <span class="s">&#39;filter&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s">&#39;operator&#39;</span><span class="p">:</span> <span class="s">&#39;RegexMatch&#39;</span><span class="p">,</span>
                    <span class="s">&#39;not_flag&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="s">&#39;.*&#39;</span>
                <span class="p">},</span>
            <span class="p">}</span>
        <span class="p">]}</span>
        <span class="n">utils</span><span class="o">.</span><span class="n">val_sensor_defs</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestManualSensorDefValidateUtils.test_valid3"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualSensorDefValidateUtils.test_valid3">[docs]</a>    <span class="k">def</span> <span class="nf">test_valid3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;sensor_defs&#39;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Sensor1&#39;</span><span class="p">,</span>
                <span class="s">&#39;filter&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s">&#39;operator&#39;</span><span class="p">:</span> <span class="s">&#39;RegexMatch&#39;</span><span class="p">,</span>
                    <span class="s">&#39;not_flag&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="s">&#39;.*&#39;</span>
                <span class="p">},</span>
                <span class="s">&#39;options&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s">&#39;all_values_flag&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="s">&#39;ignore_case_flag&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="s">&#39;max_age_seconds&#39;</span><span class="p">:</span> <span class="s">&#39;3600&#39;</span><span class="p">,</span>
                    <span class="s">&#39;value_type&#39;</span><span class="p">:</span> <span class="s">&#39;string&#39;</span><span class="p">,</span>
                    <span class="s">&#39;all_times_flag&#39;</span><span class="p">:</span> <span class="mi">0</span>
                <span class="p">},</span>
            <span class="p">}</span>
        <span class="p">]}</span>
        <span class="n">utils</span><span class="o">.</span><span class="n">val_sensor_defs</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestManualSensorDefValidateUtils.test_valid4"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualSensorDefValidateUtils.test_valid4">[docs]</a>    <span class="k">def</span> <span class="nf">test_valid4</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;sensor_defs&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;test1&#39;</span><span class="p">,</span> <span class="s">&#39;filter&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;n&#39;</span><span class="p">:</span> <span class="s">&#39;k&#39;</span><span class="p">}}]}</span>
        <span class="n">utils</span><span class="o">.</span><span class="n">val_sensor_defs</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestManualSensorDefValidateUtils.test_invalid1"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualSensorDefValidateUtils.test_invalid1">[docs]</a>    <span class="k">def</span> <span class="nf">test_invalid1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">e</span> <span class="o">=</span> <span class="s">&quot;Sensor definition.*missing one of id, name, hash!&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegexp</span><span class="p">(</span><span class="n">DefinitionParserError</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
            <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;sensor_defs&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s">&#39;NONAME&#39;</span><span class="p">:</span> <span class="s">&#39;Sensor1&#39;</span><span class="p">}]}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">val_sensor_defs</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestManualSensorDefValidateUtils.test_invalid2"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualSensorDefValidateUtils.test_invalid2">[docs]</a>    <span class="k">def</span> <span class="nf">test_invalid2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">e</span> <span class="o">=</span> <span class="s">&quot;Sensor definition.*missing one of id, name, hash!&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegexp</span><span class="p">(</span><span class="n">DefinitionParserError</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
            <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;sensor_defs&#39;</span><span class="p">:</span> <span class="p">[{}]}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">val_sensor_defs</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestManualSensorDefValidateUtils.test_invalid3"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualSensorDefValidateUtils.test_invalid3">[docs]</a>    <span class="k">def</span> <span class="nf">test_invalid3</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">e</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s">&quot;&#39;filter&#39; key in definition dictionary must be a \[&lt;type &#39;dict&#39;&gt;\]&quot;</span>
            <span class="s">&quot;, you supplied a &lt;type &#39;list&#39;&gt;!&quot;</span>
        <span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegexp</span><span class="p">(</span><span class="n">DefinitionParserError</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
            <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;sensor_defs&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;test1&#39;</span><span class="p">,</span> <span class="s">&#39;filter&#39;</span><span class="p">:</span> <span class="p">[{}]}]}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">val_sensor_defs</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestManualSensorDefValidateUtils.test_invalid4"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualSensorDefValidateUtils.test_invalid4">[docs]</a>    <span class="k">def</span> <span class="nf">test_invalid4</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">e</span> <span class="o">=</span> <span class="s">&quot;Sensor definition.*has more than one of id, name, hash!&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegexp</span><span class="p">(</span><span class="n">DefinitionParserError</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
            <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;sensor_defs&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;test1&#39;</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="s">&#39;2&#39;</span><span class="p">}]}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">val_sensor_defs</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TestManualQuestionFilterDefValidateUtils"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualQuestionFilterDefValidateUtils">[docs]</a><span class="k">class</span> <span class="nc">TestManualQuestionFilterDefValidateUtils</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<div class="viewcode-block" id="TestManualQuestionFilterDefValidateUtils.test_valid1"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualQuestionFilterDefValidateUtils.test_valid1">[docs]</a>    <span class="k">def</span> <span class="nf">test_valid1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;q_filter_defs&#39;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Sensor1&#39;</span><span class="p">,</span>
                <span class="s">&#39;filter&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s">&#39;operator&#39;</span><span class="p">:</span> <span class="s">&#39;RegexMatch&#39;</span><span class="p">,</span>
                    <span class="s">&#39;not_flag&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="s">&#39;.*&#39;</span>
                <span class="p">},</span>
            <span class="p">}</span>
        <span class="p">]}</span>
        <span class="n">utils</span><span class="o">.</span><span class="n">val_q_filter_defs</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestManualQuestionFilterDefValidateUtils.test_valid2"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualQuestionFilterDefValidateUtils.test_valid2">[docs]</a>    <span class="k">def</span> <span class="nf">test_valid2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;q_filter_defs&#39;</span><span class="p">:</span> <span class="p">[]}</span>
        <span class="n">utils</span><span class="o">.</span><span class="n">val_q_filter_defs</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestManualQuestionFilterDefValidateUtils.test_invalid1"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualQuestionFilterDefValidateUtils.test_invalid1">[docs]</a>    <span class="k">def</span> <span class="nf">test_invalid1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">e</span> <span class="o">=</span> <span class="s">&quot;Definition.*missing &#39;filter&#39; key!&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegexp</span><span class="p">(</span><span class="n">DefinitionParserError</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
            <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;q_filter_defs&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Sensor1&#39;</span><span class="p">}]}</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">val_q_filter_defs</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TestManualBuildObjectUtils"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestManualBuildObjectUtils">[docs]</a><span class="k">class</span> <span class="nc">TestManualBuildObjectUtils</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span></div>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">setUpClass</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span> <span class="c"># noqa</span>
        <span class="c"># load in our JSON sensor object for testing</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">my_dir</span><span class="p">,</span> <span class="s">&#39;sensor_obj_with_params.json&#39;</span><span class="p">)</span>
        <span class="n">cls</span><span class="o">.</span><span class="n">sensor_obj_with_params</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">load_taniumpy_from_json</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

        <span class="n">f</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">my_dir</span><span class="p">,</span> <span class="s">&#39;sensor_obj_no_params.json&#39;</span><span class="p">)</span>
        <span class="n">cls</span><span class="o">.</span><span class="n">sensor_obj_no_params</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">load_taniumpy_from_json</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_build_selectlist_obj_noparamssensorobj_noparams</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;builds a selectlist object using a sensor obj with no params&#39;&#39;&#39;</span>

        <span class="n">sensor_defs</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Fake Sensor&#39;</span><span class="p">,</span>
                <span class="s">&#39;filter&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s">&#39;operator&#39;</span><span class="p">:</span> <span class="s">&#39;regexmatch&#39;</span><span class="p">,</span>
                    <span class="s">&#39;not_flag&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="s">&#39;.*&#39;</span>
                <span class="p">},</span>
                <span class="s">&#39;options&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s">&#39;all_values_flag&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="s">&#39;ignore_case_flag&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="s">&#39;max_age_seconds&#39;</span><span class="p">:</span> <span class="s">&#39;3600&#39;</span><span class="p">,</span>
                    <span class="s">&#39;value_type&#39;</span><span class="p">:</span> <span class="s">&#39;string&#39;</span><span class="p">,</span>
                    <span class="s">&#39;all_times_flag&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="s">&#39;ignored_option&#39;</span><span class="p">:</span> <span class="s">&#39;tt&#39;</span><span class="p">,</span>
                <span class="p">},</span>
                <span class="s">&#39;sensor_obj&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">sensor_obj_no_params</span>
            <span class="p">}</span>
        <span class="p">]</span>

        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;sensor_defs&#39;</span><span class="p">:</span> <span class="n">sensor_defs</span><span class="p">}</span>

        <span class="n">r</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">build_selectlist_obj</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">taniumpy</span><span class="o">.</span><span class="n">SelectList</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">taniumpy</span><span class="o">.</span><span class="n">Select</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="p">,</span> <span class="n">taniumpy</span><span class="o">.</span><span class="n">Filter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">sensor</span><span class="p">,</span> <span class="n">taniumpy</span><span class="o">.</span><span class="n">Sensor</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">sensor</span><span class="o">.</span><span class="n">hash</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sensor_obj_no_params</span><span class="o">.</span><span class="n">hash</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="o">.</span><span class="n">sensor</span><span class="o">.</span><span class="n">hash</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sensor_obj_no_params</span><span class="o">.</span><span class="n">hash</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">sensor</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="o">.</span><span class="n">operator</span><span class="p">,</span> <span class="s">&#39;RegexMatch&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="o">.</span><span class="n">not_flag</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="s">&#39;.*&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="o">.</span><span class="n">all_values_flag</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="o">.</span><span class="n">ignore_case_flag</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="o">.</span><span class="n">max_age_seconds</span><span class="p">,</span> <span class="mi">3600</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="o">.</span><span class="n">value_type</span><span class="p">,</span> <span class="s">&#39;String&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="o">.</span><span class="n">all_times_flag</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="nb">hasattr</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="p">,</span> <span class="s">&#39;ignored_option&#39;</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">test_build_selectlist_obj_noparamssensorobj_withparams</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;builds a selectlist object using a sensor obj with no params,</span>
<span class="sd">        but passing in params (which should be added as of 1.0.4)&#39;&#39;&#39;</span>

        <span class="n">sensor_defs</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Fake Sensor&#39;</span><span class="p">,</span>
                <span class="s">&#39;filter&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s">&#39;operator&#39;</span><span class="p">:</span> <span class="s">&#39;regexmatch&#39;</span><span class="p">,</span>
                    <span class="s">&#39;not_flag&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="s">&#39;.*&#39;</span>
                <span class="p">},</span>
                <span class="s">&#39;params&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s">&#39;dirname&#39;</span><span class="p">:</span> <span class="s">&#39;Program Files&#39;</span><span class="p">,</span>
                <span class="p">},</span>
                <span class="s">&#39;options&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s">&#39;all_values_flag&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="s">&#39;ignore_case_flag&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="s">&#39;max_age_seconds&#39;</span><span class="p">:</span> <span class="s">&#39;3600&#39;</span><span class="p">,</span>
                    <span class="s">&#39;value_type&#39;</span><span class="p">:</span> <span class="s">&#39;string&#39;</span><span class="p">,</span>
                    <span class="s">&#39;all_times_flag&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="s">&#39;ignored_option&#39;</span><span class="p">:</span> <span class="s">&#39;tt&#39;</span><span class="p">,</span>
                <span class="p">},</span>
                <span class="s">&#39;sensor_obj&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">sensor_obj_no_params</span>
            <span class="p">}</span>
        <span class="p">]</span>

        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;sensor_defs&#39;</span><span class="p">:</span> <span class="n">sensor_defs</span><span class="p">}</span>

        <span class="n">r</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">build_selectlist_obj</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">taniumpy</span><span class="o">.</span><span class="n">SelectList</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">taniumpy</span><span class="o">.</span><span class="n">Select</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="p">,</span> <span class="n">taniumpy</span><span class="o">.</span><span class="n">Filter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">sensor</span><span class="p">,</span> <span class="n">taniumpy</span><span class="o">.</span><span class="n">Sensor</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">sensor</span><span class="o">.</span><span class="n">source_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sensor_obj_no_params</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="o">.</span><span class="n">sensor</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sensor_obj_no_params</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">sensor</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="o">.</span><span class="n">operator</span><span class="p">,</span> <span class="s">&#39;RegexMatch&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="o">.</span><span class="n">not_flag</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="s">&#39;.*&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="o">.</span><span class="n">all_values_flag</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="o">.</span><span class="n">ignore_case_flag</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="o">.</span><span class="n">max_age_seconds</span><span class="p">,</span> <span class="mi">3600</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="o">.</span><span class="n">value_type</span><span class="p">,</span> <span class="s">&#39;String&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="o">.</span><span class="n">all_times_flag</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="nb">hasattr</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="p">,</span> <span class="s">&#39;ignored_option&#39;</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">test_build_selectlist_obj_withparamssensorobj_noparams</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;builds a selectlist object using a sensor obj with 4 params</span>
<span class="sd">        but not supplying any values for any of the params&#39;&#39;&#39;</span>

        <span class="n">sensor_defs</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Fake Sensor&#39;</span><span class="p">,</span>
                <span class="s">&#39;filter&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s">&#39;operator&#39;</span><span class="p">:</span> <span class="s">&#39;regexmatch&#39;</span><span class="p">,</span>
                    <span class="s">&#39;not_flag&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="s">&#39;.*&#39;</span>
                <span class="p">},</span>
                <span class="s">&#39;options&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s">&#39;all_values_flag&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="s">&#39;ignore_case_flag&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="s">&#39;max_age_seconds&#39;</span><span class="p">:</span> <span class="s">&#39;3600&#39;</span><span class="p">,</span>
                    <span class="s">&#39;value_type&#39;</span><span class="p">:</span> <span class="s">&#39;string&#39;</span><span class="p">,</span>
                    <span class="s">&#39;all_times_flag&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="s">&#39;ignored_option&#39;</span><span class="p">:</span> <span class="s">&#39;tt&#39;</span><span class="p">,</span>
                <span class="p">},</span>
                <span class="s">&#39;sensor_obj&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">sensor_obj_with_params</span>
            <span class="p">}</span>
        <span class="p">]</span>

        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;sensor_defs&#39;</span><span class="p">:</span> <span class="n">sensor_defs</span><span class="p">}</span>

        <span class="n">r</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">build_selectlist_obj</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">taniumpy</span><span class="o">.</span><span class="n">SelectList</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">taniumpy</span><span class="o">.</span><span class="n">Select</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="p">,</span> <span class="n">taniumpy</span><span class="o">.</span><span class="n">Filter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">sensor</span><span class="p">,</span> <span class="n">taniumpy</span><span class="o">.</span><span class="n">Sensor</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">sensor</span><span class="o">.</span><span class="n">source_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sensor_obj_with_params</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="o">.</span><span class="n">sensor</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sensor_obj_with_params</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">sensor</span><span class="o">.</span><span class="n">parameters</span><span class="p">),</span> <span class="mi">4</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">sensor</span><span class="o">.</span><span class="n">parameters</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRegexpMatches</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">key</span><span class="p">,</span> <span class="s">&#39;||.*||&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="s">&#39;||dirname||&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="s">&#39;||regexp||&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="s">&#39;||casesensitive||&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="s">&#39;No&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="s">&#39;||global||&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="s">&#39;No&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="o">.</span><span class="n">operator</span><span class="p">,</span> <span class="s">&#39;RegexMatch&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="o">.</span><span class="n">not_flag</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="s">&#39;.*&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="o">.</span><span class="n">all_values_flag</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="o">.</span><span class="n">ignore_case_flag</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="o">.</span><span class="n">max_age_seconds</span><span class="p">,</span> <span class="mi">3600</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="o">.</span><span class="n">value_type</span><span class="p">,</span> <span class="s">&#39;String&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="o">.</span><span class="n">all_times_flag</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="nb">hasattr</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="p">,</span> <span class="s">&#39;ignored_option&#39;</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">test_build_selectlist_obj_withparamssensorobj_withparams</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;builds a selectlist object using a sensor obj with 4 params</span>
<span class="sd">        but supplying a value for only one param&#39;&#39;&#39;</span>

        <span class="n">sensor_defs</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Fake Sensor&#39;</span><span class="p">,</span>
                <span class="s">&#39;filter&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s">&#39;operator&#39;</span><span class="p">:</span> <span class="s">&#39;regexmatch&#39;</span><span class="p">,</span>
                    <span class="s">&#39;not_flag&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="s">&#39;.*&#39;</span>
                <span class="p">},</span>
                <span class="s">&#39;params&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s">&#39;dirname&#39;</span><span class="p">:</span> <span class="s">&#39;Program Files&#39;</span><span class="p">,</span>
                <span class="p">},</span>
                <span class="s">&#39;options&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s">&#39;all_values_flag&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="s">&#39;ignore_case_flag&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="s">&#39;max_age_seconds&#39;</span><span class="p">:</span> <span class="s">&#39;3600&#39;</span><span class="p">,</span>
                    <span class="s">&#39;value_type&#39;</span><span class="p">:</span> <span class="s">&#39;string&#39;</span><span class="p">,</span>
                    <span class="s">&#39;all_times_flag&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="s">&#39;ignored_option&#39;</span><span class="p">:</span> <span class="s">&#39;tt&#39;</span><span class="p">,</span>
                <span class="p">},</span>
                <span class="s">&#39;sensor_obj&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">sensor_obj_with_params</span>
            <span class="p">}</span>
        <span class="p">]</span>

        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;sensor_defs&#39;</span><span class="p">:</span> <span class="n">sensor_defs</span><span class="p">}</span>

        <span class="n">r</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">build_selectlist_obj</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">taniumpy</span><span class="o">.</span><span class="n">SelectList</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">taniumpy</span><span class="o">.</span><span class="n">Select</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="p">,</span> <span class="n">taniumpy</span><span class="o">.</span><span class="n">Filter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">sensor</span><span class="p">,</span> <span class="n">taniumpy</span><span class="o">.</span><span class="n">Sensor</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">sensor</span><span class="o">.</span><span class="n">source_id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sensor_obj_with_params</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="o">.</span><span class="n">sensor</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sensor_obj_with_params</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">sensor</span><span class="o">.</span><span class="n">parameters</span><span class="p">),</span> <span class="mi">4</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">sensor</span><span class="o">.</span><span class="n">parameters</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertRegexpMatches</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">key</span><span class="p">,</span> <span class="s">&#39;||.*||&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="s">&#39;||dirname||&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="s">&#39;Program Files&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="s">&#39;||regexp||&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="s">&#39;||casesensitive||&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="s">&#39;No&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="s">&#39;||global||&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="s">&#39;No&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="o">.</span><span class="n">operator</span><span class="p">,</span> <span class="s">&#39;RegexMatch&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="o">.</span><span class="n">not_flag</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="s">&#39;.*&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="o">.</span><span class="n">all_values_flag</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="o">.</span><span class="n">ignore_case_flag</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="o">.</span><span class="n">max_age_seconds</span><span class="p">,</span> <span class="mi">3600</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="o">.</span><span class="n">value_type</span><span class="p">,</span> <span class="s">&#39;String&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="o">.</span><span class="n">all_times_flag</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="nb">hasattr</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">select</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">filter</span><span class="p">,</span> <span class="s">&#39;ignored_option&#39;</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">test_build_group_obj</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">q_filter_defs</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Fake Sensor&#39;</span><span class="p">,</span>
                <span class="s">&#39;filter&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s">&#39;operator&#39;</span><span class="p">:</span> <span class="s">&#39;regexmatch&#39;</span><span class="p">,</span>
                    <span class="s">&#39;not_flag&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="s">&#39;.*&#39;</span>
                <span class="p">},</span>
                <span class="s">&#39;sensor_obj&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">sensor_obj_no_params</span>
            <span class="p">}</span>
        <span class="p">]</span>

        <span class="n">q_option_defs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;all_values_flag&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s">&#39;ignore_case_flag&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s">&#39;max_age_seconds&#39;</span><span class="p">:</span> <span class="s">&#39;3600&#39;</span><span class="p">,</span>
            <span class="s">&#39;value_type&#39;</span><span class="p">:</span> <span class="s">&#39;string&#39;</span><span class="p">,</span>
            <span class="s">&#39;all_times_flag&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s">&#39;and_flag&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s">&#39;ignored_option&#39;</span><span class="p">:</span> <span class="s">&#39;tt&#39;</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;q_filter_defs&#39;</span><span class="p">:</span> <span class="n">q_filter_defs</span><span class="p">,</span>
            <span class="s">&#39;q_option_defs&#39;</span><span class="p">:</span> <span class="n">q_option_defs</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="n">r</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">build_group_obj</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">taniumpy</span><span class="o">.</span><span class="n">Group</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">filters</span><span class="p">,</span> <span class="n">taniumpy</span><span class="o">.</span><span class="n">FilterList</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">filters</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">filters</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">taniumpy</span><span class="o">.</span><span class="n">Filter</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">r</span><span class="o">.</span><span class="n">filters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">sensor</span><span class="o">.</span><span class="n">hash</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sensor_obj_no_params</span><span class="o">.</span><span class="n">hash</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">filters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">operator</span><span class="p">,</span> <span class="s">&#39;RegexMatch&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">filters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">not_flag</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">filters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="s">&#39;.*&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">filters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">all_values_flag</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">filters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">ignore_case_flag</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">filters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">max_age_seconds</span><span class="p">,</span> <span class="mi">3600</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">filters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value_type</span><span class="p">,</span> <span class="s">&#39;String&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">filters</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">all_times_flag</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="nb">hasattr</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">filters</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s">&#39;ignored_option&#39;</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">test_build_manual_q</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">build_manual_q</span><span class="p">(</span><span class="n">taniumpy</span><span class="o">.</span><span class="n">SelectList</span><span class="p">(),</span> <span class="n">taniumpy</span><span class="o">.</span><span class="n">Group</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">taniumpy</span><span class="o">.</span><span class="n">Question</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">group</span><span class="p">,</span> <span class="n">taniumpy</span><span class="o">.</span><span class="n">Group</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">selects</span><span class="p">,</span> <span class="n">taniumpy</span><span class="o">.</span><span class="n">SelectList</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_build_selectlist_obj_invalid_filter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">sensor_defs</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Fake Sensor&#39;</span><span class="p">,</span>
                <span class="s">&#39;filter&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s">&#39;operator&#39;</span><span class="p">:</span> <span class="s">&#39;egexMatch&#39;</span><span class="p">,</span>
                    <span class="s">&#39;value&#39;</span><span class="p">:</span> <span class="s">&#39;.*&#39;</span>
                <span class="p">},</span>
                <span class="s">&#39;sensor_obj&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">sensor_obj_no_params</span>
            <span class="p">}</span>
        <span class="p">]</span>

        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;sensor_defs&#39;</span><span class="p">:</span> <span class="n">sensor_defs</span><span class="p">}</span>
        <span class="n">e</span> <span class="o">=</span> <span class="s">&quot;Invalid filter.*&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegexp</span><span class="p">(</span><span class="n">DefinitionParserError</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">build_selectlist_obj</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_build_selectlist_obj_missing_value</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">sensor_defs</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="s">&#39;Fake Sensor&#39;</span><span class="p">,</span>
                <span class="s">&#39;filter&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s">&#39;operator&#39;</span><span class="p">:</span> <span class="s">&#39;RegexMatch&#39;</span><span class="p">,</span>
                <span class="p">},</span>
                <span class="s">&#39;sensor_obj&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">sensor_obj_no_params</span>
            <span class="p">}</span>
        <span class="p">]</span>

        <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;sensor_defs&#39;</span><span class="p">:</span> <span class="n">sensor_defs</span><span class="p">}</span>
        <span class="n">e</span> <span class="o">=</span> <span class="s">&quot;.*requires a &#39;value&#39; key!&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegexp</span><span class="p">(</span><span class="n">DefinitionParserError</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">build_selectlist_obj</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>


<div class="viewcode-block" id="TestGenericUtils"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestGenericUtils">[docs]</a><span class="k">class</span> <span class="nc">TestGenericUtils</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<div class="viewcode-block" id="TestGenericUtils.test_is_list"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestGenericUtils.test_is_list">[docs]</a>    <span class="k">def</span> <span class="nf">test_is_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">utils</span><span class="o">.</span><span class="n">is_list</span><span class="p">([]))</span></div>

<div class="viewcode-block" id="TestGenericUtils.test_is_not_list"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestGenericUtils.test_is_not_list">[docs]</a>    <span class="k">def</span> <span class="nf">test_is_not_list</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">utils</span><span class="o">.</span><span class="n">is_list</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">))</span></div>

<div class="viewcode-block" id="TestGenericUtils.test_is_str"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestGenericUtils.test_is_str">[docs]</a>    <span class="k">def</span> <span class="nf">test_is_str</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">utils</span><span class="o">.</span><span class="n">is_str</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">))</span></div>

<div class="viewcode-block" id="TestGenericUtils.test_is_not_str"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestGenericUtils.test_is_not_str">[docs]</a>    <span class="k">def</span> <span class="nf">test_is_not_str</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">utils</span><span class="o">.</span><span class="n">is_str</span><span class="p">([]))</span></div>

<div class="viewcode-block" id="TestGenericUtils.test_is_dict"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestGenericUtils.test_is_dict">[docs]</a>    <span class="k">def</span> <span class="nf">test_is_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">utils</span><span class="o">.</span><span class="n">is_dict</span><span class="p">({}))</span></div>

<div class="viewcode-block" id="TestGenericUtils.test_is_not_dict"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestGenericUtils.test_is_not_dict">[docs]</a>    <span class="k">def</span> <span class="nf">test_is_not_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">utils</span><span class="o">.</span><span class="n">is_dict</span><span class="p">([]))</span></div>

<div class="viewcode-block" id="TestGenericUtils.test_is_num"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestGenericUtils.test_is_num">[docs]</a>    <span class="k">def</span> <span class="nf">test_is_num</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">utils</span><span class="o">.</span><span class="n">is_num</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span></div>

<div class="viewcode-block" id="TestGenericUtils.test_is_not_num"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestGenericUtils.test_is_not_num">[docs]</a>    <span class="k">def</span> <span class="nf">test_is_not_num</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">utils</span><span class="o">.</span><span class="n">is_num</span><span class="p">({}))</span></div>

<div class="viewcode-block" id="TestGenericUtils.test_version_lower"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestGenericUtils.test_version_lower">[docs]</a>    <span class="k">def</span> <span class="nf">test_version_lower</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">utils</span><span class="o">.</span><span class="n">version_check</span><span class="p">(</span><span class="s">&#39;0.0.0&#39;</span><span class="p">))</span></div>

<div class="viewcode-block" id="TestGenericUtils.test_get_now"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestGenericUtils.test_get_now">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_now</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">utils</span><span class="o">.</span><span class="n">get_now</span><span class="p">())</span></div>

<div class="viewcode-block" id="TestGenericUtils.test_jsonify"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestGenericUtils.test_jsonify">[docs]</a>    <span class="k">def</span> <span class="nf">test_jsonify</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">exp</span> <span class="o">=</span> <span class="s">&#39;{</span><span class="se">\n</span><span class="s">  &quot;x&quot;: &quot;d&quot;</span><span class="se">\n</span><span class="s">}&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEquals</span><span class="p">(</span><span class="n">utils</span><span class="o">.</span><span class="n">jsonify</span><span class="p">({</span><span class="s">&#39;x&#39;</span><span class="p">:</span> <span class="s">&#39;d&#39;</span><span class="p">}),</span> <span class="n">exp</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestGenericUtils.test_invalid_port"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestGenericUtils.test_invalid_port">[docs]</a>    <span class="k">def</span> <span class="nf">test_invalid_port</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">utils</span><span class="o">.</span><span class="n">port_check</span><span class="p">(</span><span class="s">&#39;localhost&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span></div>

<div class="viewcode-block" id="TestGenericUtils.test_version_higher"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestGenericUtils.test_version_higher">[docs]</a>    <span class="k">def</span> <span class="nf">test_version_higher</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">req_ver</span> <span class="o">=</span> <span class="s">&quot;100.100.100&quot;</span>
        <span class="n">e</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s">&quot;Script and API Version mismatch.*version {}, required {}&quot;</span>
        <span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pytan</span><span class="o">.</span><span class="n">__version__</span><span class="p">,</span> <span class="n">req_ver</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegexp</span><span class="p">(</span><span class="ne">Exception</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">version_check</span><span class="p">(</span><span class="n">req_ver</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestGenericUtils.test_empty_obj"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestGenericUtils.test_empty_obj">[docs]</a>    <span class="k">def</span> <span class="nf">test_empty_obj</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="n">taniumpy</span><span class="o">.</span><span class="n">SensorList</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">utils</span><span class="o">.</span><span class="n">empty_obj</span><span class="p">(</span><span class="n">obj</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">utils</span><span class="o">.</span><span class="n">empty_obj</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">))</span></div>

<div class="viewcode-block" id="TestGenericUtils.test_get_q_obj_map"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestGenericUtils.test_get_q_obj_map">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_q_obj_map</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">qtype</span> <span class="o">=</span> <span class="s">&#39;saved&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">utils</span><span class="o">.</span><span class="n">get_q_obj_map</span><span class="p">(</span><span class="n">qtype</span><span class="p">),</span> <span class="p">{</span><span class="s">&#39;handler&#39;</span><span class="p">:</span> <span class="s">&#39;ask_saved&#39;</span><span class="p">})</span>

        <span class="n">qtype</span> <span class="o">=</span> <span class="s">&#39;manual&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">utils</span><span class="o">.</span><span class="n">get_q_obj_map</span><span class="p">(</span><span class="n">qtype</span><span class="p">),</span> <span class="p">{</span><span class="s">&#39;handler&#39;</span><span class="p">:</span> <span class="s">&#39;ask_manual&#39;</span><span class="p">})</span>

        <span class="n">qtype</span> <span class="o">=</span> <span class="s">&#39;_manual&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">get_q_obj_map</span><span class="p">(</span><span class="n">qtype</span><span class="p">),</span> <span class="p">{</span><span class="s">&#39;handler&#39;</span><span class="p">:</span> <span class="s">&#39;_ask_manual&#39;</span><span class="p">})</span>

        <span class="n">qtype</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="n">e</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s">&quot;.*not a valid question type, must be one of.*&quot;</span>
        <span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegexp</span><span class="p">(</span><span class="n">HandlerError</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">get_q_obj_map</span><span class="p">(</span><span class="n">qtype</span><span class="p">)</span>

        <span class="n">qtype</span> <span class="o">=</span> <span class="s">&#39;invalid&#39;</span>
        <span class="n">e</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s">&quot;.*not a valid question type, must be one of.*&quot;</span>
        <span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegexp</span><span class="p">(</span><span class="n">HandlerError</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">get_q_obj_map</span><span class="p">(</span><span class="n">qtype</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestGenericUtils.test_load_taniumpy_file_invalid_file"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestGenericUtils.test_load_taniumpy_file_invalid_file">[docs]</a>    <span class="k">def</span> <span class="nf">test_load_taniumpy_file_invalid_file</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">f</span> <span class="o">=</span> <span class="s">&#39;invalid_file.1234&#39;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">HandlerError</span><span class="p">):</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">load_taniumpy_from_json</span><span class="p">(</span><span class="n">f</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestGenericUtils.test_load_taniumpy_file_invalid_json"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestGenericUtils.test_load_taniumpy_file_invalid_json">[docs]</a>    <span class="k">def</span> <span class="nf">test_load_taniumpy_file_invalid_json</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root_dir</span><span class="p">,</span> <span class="s">&#39;doc/example_of_all_package_parameters.json&#39;</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">HandlerError</span><span class="p">):</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">load_taniumpy_from_json</span><span class="p">(</span><span class="n">f</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestGenericUtils.test_load_param_file_valid"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestGenericUtils.test_load_param_file_valid">[docs]</a>    <span class="k">def</span> <span class="nf">test_load_param_file_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root_dir</span><span class="p">,</span> <span class="s">&#39;doc/example_of_all_package_parameters.json&#39;</span><span class="p">)</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">load_param_json_file</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s">&#39;ParametersArray&#39;</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestGenericUtils.test_load_param_file_invalid_file"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestGenericUtils.test_load_param_file_invalid_file">[docs]</a>    <span class="k">def</span> <span class="nf">test_load_param_file_invalid_file</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">f</span> <span class="o">=</span> <span class="s">&#39;invalid_file.1234&#39;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">HandlerError</span><span class="p">):</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">load_param_json_file</span><span class="p">(</span><span class="n">f</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestGenericUtils.test_load_param_file_invalid_json"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestGenericUtils.test_load_param_file_invalid_json">[docs]</a>    <span class="k">def</span> <span class="nf">test_load_param_file_invalid_json</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">my_dir</span><span class="p">,</span> <span class="s">&#39;sensor_obj_no_params.json&#39;</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">HandlerError</span><span class="p">):</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">load_param_json_file</span><span class="p">(</span><span class="n">f</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestGenericUtils.test_get_obj_map"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestGenericUtils.test_get_obj_map">[docs]</a>    <span class="k">def</span> <span class="nf">test_get_obj_map</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="s">&#39;sensor&#39;</span>
        <span class="n">exp</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;single&#39;</span><span class="p">:</span> <span class="s">&#39;Sensor&#39;</span><span class="p">,</span>
            <span class="s">&#39;multi&#39;</span><span class="p">:</span> <span class="s">&#39;SensorList&#39;</span><span class="p">,</span>
            <span class="s">&#39;all&#39;</span><span class="p">:</span> <span class="s">&#39;SensorList&#39;</span><span class="p">,</span>
            <span class="s">&#39;search&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">,</span> <span class="s">&#39;name&#39;</span><span class="p">,</span> <span class="s">&#39;hash&#39;</span><span class="p">],</span>
            <span class="s">&#39;manual&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
            <span class="s">&#39;delete&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
            <span class="s">&#39;create_json&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">utils</span><span class="o">.</span><span class="n">get_obj_map</span><span class="p">(</span><span class="n">obj</span><span class="p">),</span> <span class="n">exp</span><span class="p">)</span>

        <span class="n">obj</span> <span class="o">=</span> <span class="s">&#39;invalid&#39;</span>
        <span class="n">e</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s">&quot;.*not a valid object to get, must be one of.*&quot;</span>
        <span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegexp</span><span class="p">(</span><span class="n">HandlerError</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
            <span class="n">utils</span><span class="o">.</span><span class="n">get_obj_map</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TestDeserializeBadXML"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDeserializeBadXML">[docs]</a><span class="k">class</span> <span class="nc">TestDeserializeBadXML</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<div class="viewcode-block" id="TestDeserializeBadXML.test_bad_chars_basetype_control"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDeserializeBadXML.test_bad_chars_basetype_control">[docs]</a>    <span class="k">def</span> <span class="nf">test_bad_chars_basetype_control</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        This XML file has a number of control characters that are not valid in XML.</span>

<span class="sd">        This test validates that pytan.xml_clean.xml_cleaner() will remove all the invalid</span>
<span class="sd">        and restricted characters, which should allow the body to be parsed properly.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Logging examples from xml_cleaner():</span>
<span class="sd">        v=open(&#39;bad_chars_basetype_control.xml&#39;).read()</span>
<span class="sd">        &gt;&gt;&gt; pytan.xml_clean.xml_cleaner(v, show_bad_characters=True)</span>
<span class="sd">        XMLCleaner: Replaced 4 invalid characters that did not match the regex u&#39;[^\t\n\r -\ud7ff\ue000-\ufffd]&#39;</span>
<span class="sd">        XMLCleaner: Invalid characters found: [u&#39;\x17&#39;, u&#39;\x04&#39;, u&#39;\x04&#39;, u&#39;\x01&#39;]</span>
<span class="sd">        XMLCleaner: Replaced 10 restricted characters that did not match the regex u&#39;[\x7f-\x84\x86-\x9f\ufdd0-\ufdef]&#39;</span>
<span class="sd">        XMLCleaner: Restricted characters found: [u&#39;\x80&#39;, u&#39;\x80&#39;, u&#39;\x8d&#39;, u&#39;\x95&#39;, u&#39;\x81&#39;, u&#39;\x89&#39;, u&#39;\x89&#39;, u&#39;\x81&#39;, u&#39;\x95&#39;, u&#39;\x8b&#39;]</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">f</span> <span class="o">=</span> <span class="s">&#39;bad_chars_basetype_control.xml&#39;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">my_dir</span><span class="p">,</span> <span class="n">f</span><span class="p">),</span> <span class="s">&#39;rb+&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">pytan</span><span class="o">.</span><span class="n">xml_clean</span><span class="o">.</span><span class="n">xml_cleaner</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">log_messages</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">pytan</span><span class="o">.</span><span class="n">taniumpy</span><span class="o">.</span><span class="n">BaseType</span><span class="o">.</span><span class="n">fromSOAPBody</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">taniumpy</span><span class="o">.</span><span class="n">SystemStatusList</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestDeserializeBadXML.test_bad_chars_resultset_latin1"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDeserializeBadXML.test_bad_chars_resultset_latin1">[docs]</a>    <span class="k">def</span> <span class="nf">test_bad_chars_resultset_latin1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        This XML file has some characters that are actually encoded as latin1 (as well as some</span>
<span class="sd">        restricted characters).</span>

<span class="sd">        This test validates that pytan.xml_clean.xml_cleaner() will properly fall back to latin1</span>
<span class="sd">        for decoding the docuemnt, as well as remove all the invalid and restricted characters,</span>
<span class="sd">        which should allow the body to be parsed properly.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Logging examples from xml_cleaner():</span>
<span class="sd">        &gt;&gt;&gt; v=open(&#39;bad_chars_resultset_latin1.xml&#39;).read()</span>
<span class="sd">        &gt;&gt;&gt; pytan.xml_clean.xml_cleaner(v, show_bad_characters=True)</span>
<span class="sd">        XMLCleaner: Falling back to latin1 for decoding, unable to decode as UTF-8!</span>
<span class="sd">        XMLCleaner: No invalid characters found</span>
<span class="sd">        XMLCleaner: Replaced 2 restricted characters that did not match the regex u&#39;[\x7f-\x84\x86-\x9f\ufdd0-\ufdef]&#39;</span>
<span class="sd">        XMLCleaner: Restricted characters found: [u&#39;\x93&#39;, u&#39;\x94&#39;]</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">f</span> <span class="o">=</span> <span class="s">&#39;bad_chars_resultset_latin1.xml&#39;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">my_dir</span><span class="p">,</span> <span class="n">f</span><span class="p">),</span> <span class="s">&#39;rb+&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">pytan</span><span class="o">.</span><span class="n">xml_clean</span><span class="o">.</span><span class="n">xml_cleaner</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">log_messages</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="n">el</span> <span class="o">=</span> <span class="n">pytan</span><span class="o">.</span><span class="n">taniumpy</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">ET</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
        <span class="n">cdata</span> <span class="o">=</span> <span class="n">el</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;.//ResultXML&#39;</span><span class="p">)</span>
        <span class="n">rd</span> <span class="o">=</span> <span class="n">pytan</span><span class="o">.</span><span class="n">taniumpy</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">ET</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="n">cdata</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">pytan</span><span class="o">.</span><span class="n">taniumpy</span><span class="o">.</span><span class="n">ResultSet</span><span class="o">.</span><span class="n">fromSOAPElement</span><span class="p">(</span><span class="n">rd</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">taniumpy</span><span class="o">.</span><span class="n">ResultSet</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestDeserializeBadXML.test_bad_chars_resultset_surrogate"><a class="viewcode-back" href="../pytan_tests.html#test_pytan_unit.TestDeserializeBadXML.test_bad_chars_resultset_surrogate">[docs]</a>    <span class="k">def</span> <span class="nf">test_bad_chars_resultset_surrogate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        This XML file has some characters that are unpaired surrogates in unicode. Surrogates</span>
<span class="sd">        (unpaired or otherwise) are not legal XML characters.</span>

<span class="sd">        This test validates that pytan.xml_clean.xml_cleaner() will properly remove all the</span>
<span class="sd">        invalid and restricted characters, which should allow the body to be parsed properly.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Logging examples from xml_cleaner():</span>
<span class="sd">        &gt;&gt;&gt; v=open(&#39;bad_chars_resultset_surrogate.xml&#39;).read()</span>
<span class="sd">        &gt;&gt;&gt; pytan.xml_clean.xml_cleaner(v, show_bad_characters=True)</span>
<span class="sd">        XMLCleaner: Replaced 1 invalid characters that did not match the regex u&#39;[^\t\n\r -\ud7ff\ue000-\ufffd]&#39;</span>
<span class="sd">        XMLCleaner: Invalid characters found: [u&#39;\ude64&#39;]</span>
<span class="sd">        XMLCleaner: No restricted characters found</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">f</span> <span class="o">=</span> <span class="s">&#39;bad_chars_resultset_surrogate.xml&#39;</span>
        <span class="n">a</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">my_dir</span><span class="p">,</span> <span class="n">f</span><span class="p">),</span> <span class="s">&#39;rb+&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">pytan</span><span class="o">.</span><span class="n">xml_clean</span><span class="o">.</span><span class="n">xml_cleaner</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">log_messages</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="n">el</span> <span class="o">=</span> <span class="n">pytan</span><span class="o">.</span><span class="n">taniumpy</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">ET</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
        <span class="n">cdata</span> <span class="o">=</span> <span class="n">el</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&#39;.//ResultXML&#39;</span><span class="p">)</span>
        <span class="n">rd</span> <span class="o">=</span> <span class="n">pytan</span><span class="o">.</span><span class="n">taniumpy</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">ET</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="n">cdata</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">pytan</span><span class="o">.</span><span class="n">taniumpy</span><span class="o">.</span><span class="n">ResultSet</span><span class="o">.</span><span class="n">fromSOAPElement</span><span class="p">(</span><span class="n">rd</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">taniumpy</span><span class="o">.</span><span class="n">ResultSet</span><span class="p">)</span></div></div>

<span class="sd">&#39;&#39;&#39;</span>
<span class="sd"># debug path for checking open file handles, ensuring</span>
<span class="sd">import atexit</span>


<span class="sd">@atexit.register</span>
<span class="sd">def get_open_fds():</span>
<span class="sd">    import subprocess</span>
<span class="sd">    import os</span>

<span class="sd">    pid = os.getpid()</span>
<span class="sd">    procs = subprocess.check_output([&quot;lsof&quot;, &#39;-w&#39;, &quot;-p&quot;, str(pid)])</span>
<span class="sd">    print procs</span>

<span class="sd">    procs = subprocess.check_output([&quot;lsof&quot;, &#39;-w&#39;, &#39;-Ff&#39;, &quot;-p&quot;, str(pid)])</span>

<span class="sd">    proc_defs = filter(</span>
<span class="sd">        lambda s: s and s[0] == &#39;f&#39; and s[1:].isdigit(),</span>
<span class="sd">        procs.split(&#39;\n&#39;)</span>
<span class="sd">    )</span>

<span class="sd">    nprocs = len(proc_defs)</span>
<span class="sd">    print &quot;{} number of open FDs&quot;.format(nprocs)</span>
<span class="sd">    for p in proc_defs:</span>
<span class="sd">        print p</span>
<span class="sd">    return nprocs</span>
<span class="sd">&#39;&#39;&#39;</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">unittest</span><span class="o">.</span><span class="n">main</span><span class="p">(</span>
        <span class="n">verbosity</span><span class="o">=</span><span class="n">SERVER_INFO</span><span class="p">[</span><span class="s">&quot;testlevel&quot;</span><span class="p">],</span>
        <span class="n">failfast</span><span class="o">=</span><span class="n">SERVER_INFO</span><span class="p">[</span><span class="s">&quot;FAILFAST&quot;</span><span class="p">],</span>
        <span class="n">catchbreak</span><span class="o">=</span><span class="n">SERVER_INFO</span><span class="p">[</span><span class="s">&quot;CATCHBREAK&quot;</span><span class="p">],</span>
        <span class="nb">buffer</span><span class="o">=</span><span class="n">SERVER_INFO</span><span class="p">[</span><span class="s">&quot;BUFFER&quot;</span><span class="p">],</span>
    <span class="p">)</span>
</pre></div>

          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Tanium.
      Last updated on Sep 04, 2015.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'2.1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>